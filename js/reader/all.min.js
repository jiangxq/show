/*! author:jiangxq. DEMO 2017-02-09 */
!function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa;a=function(){var a=function(){function a(a){return null==a?String(a):U[V.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&Object.getPrototypeOf(a)==Object.prototype}function g(a){return"number"==typeof a.length}function h(a){return D.call(a,function(a){return null!=a})}function i(a){return a.length>0?x.fn.concat.apply([],a):a}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||H[j(a)]?b:b+"px"}function m(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function n(a){return"children"in a?C.call(a.children):x.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function o(a,b,c){for(w in b)c&&(f(b[w])||Z(b[w]))?(f(b[w])&&!f(a[w])&&(a[w]={}),Z(b[w])&&!Z(a[w])&&(a[w]=[]),o(a[w],b[w],c)):b[w]!==v&&(a[w]=b[w])}function p(a,b){return null==b?x(a):x(a).filter(b)}function q(a,c,d,e){return b(c)?c.call(a,d,e):c}function r(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function s(a,b){var c=a.className||"",d=c&&c.baseVal!==v;return b===v?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function t(a){try{return a?"true"==a||"false"!=a&&("null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?x.parseJSON(a):a):a}catch(b){return a}}function u(a,b){b(a);for(var c=0,d=a.childNodes.length;d>c;c++)u(a.childNodes[c],b)}var v,w,x,y,z,A,B=[],C=B.slice,D=B.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},z=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},A=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.fragment=function(a,b,c){var d,e,g;return J.test(a)&&(d=x(E.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(K,"<$1></$2>")),b===v&&(b=I.test(a)&&RegExp.$1),b in R||(b="*"),g=R[b],g.innerHTML=""+a,d=x.each(C.call(g.childNodes),function(){g.removeChild(this)})),f(c)&&(e=x(d),x.each(c,function(a,b){N.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},W.Z=function(a,b){return a=a||[],a.__proto__=x.fn,a.selector=b||"",a},W.isZ=function(a){return a instanceof W.Z},W.init=function(a,c){var d;if(!a)return W.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&I.test(a))d=W.fragment(a,RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}else{if(b(a))return x(E).ready(a);if(W.isZ(a))return a;if(Z(a))d=h(a);else if(e(a))d=[a],a=null;else if(I.test(a))d=W.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}}return W.Z(d,a)},x=function(a,b){return W.init(a,b)},x.extend=function(a){var b,c=C.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){o(a,c,b)}),a},W.qsa=function(a,b){var c,e="#"==b[0],f=!e&&"."==b[0],g=e||f?b.slice(1):b,h=T.test(g);return d(a)&&h&&e?(c=a.getElementById(g))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:C.call(h&&!e?f?a.getElementsByClassName(g):a.getElementsByTagName(b):a.querySelectorAll(b))},x.contains=E.documentElement.contains?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b&&(b=b.parentNode);)if(b===a)return!0;return!1},x.type=a,x.isFunction=b,x.isWindow=c,x.isArray=Z,x.isPlainObject=f,x.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},x.inArray=function(a,b,c){return B.indexOf.call(b,a,c)},x.camelCase=z,x.trim=function(a){return null==a?"":String.prototype.trim.call(a)},x.uuid=0,x.support={},x.expr={},x.map=function(a,b){var c,d,e,f=[];if(g(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return i(f)},x.each=function(a,b){var c,d;if(g(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},x.grep=function(a,b){return D.call(a,b)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),x.fn={forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,indexOf:B.indexOf,concat:B.concat,map:function(a){return x(x.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return x(C.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(x):E.addEventListener("DOMContentLoaded",function(){a(x)},!1),this},get:function(a){return a===v?C.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return B.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):x(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return x(A(this.concat(x(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==v)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):g(a)&&b(a.item)?C.call(a):x(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return x(c)},has:function(a){return this.filter(function(){return e(a)?x.contains(this,a):x(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:x(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:x(a)},find:function(a){var b,c=this;return b=a?"object"==typeof a?x(a).filter(function(){var a=this;return B.some.call(c,function(b){return x.contains(b,a)})}):1==this.length?x(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)}):x()},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=x(a));c&&!(e?e.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return x(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=x.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return p(b,a)},parent:function(a){return p(A(this.pluck("parentNode")),a)},children:function(a){return p(this.map(function(){return n(this)}),a)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(a){return p(this.map(function(a,b){return D.call(n(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return x.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=m(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=x(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){x(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){x(this[0]).before(a=x(a));for(var b;(b=a.children()).length;)a=b.first();x(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=x(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=x(this);(a===v?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return x(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return x(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(b){var c=this.innerHTML;x(this).empty().append(q(this,a,b,c))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(b){var c=q(this,a,b,this.textContent);this.textContent=null==c?"":""+c}):0 in this?this[0].textContent:null},attr:function(a,b){var c;return"string"!=typeof a||1 in arguments?this.each(function(c){if(1===this.nodeType)if(e(a))for(w in a)r(this,w,a[w]);else r(this,a,q(this,b,c,this.getAttribute(a)))}):this.length&&1===this[0].nodeType?!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:v},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){r(this,a)},this)})},prop:function(a,b){return a=Y[a]||a,1 in arguments?this.each(function(c){this[a]=q(this,b,c,this[a])}):this[0]&&this[0][a]},data:function(a,b){var c="data-"+a.replace(M,"-$1").toLowerCase(),d=1 in arguments?this.attr(c,b):this.attr(c);return null!==d?t(d):v},val:function(a){return 0 in arguments?this.each(function(b){this.value=q(this,a,b,this.value)}):this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(b){var c=x(this),d=q(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(!this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2){var d,e=this[0];if(!e)return;if(d=getComputedStyle(e,""),"string"==typeof b)return e.style[z(b)]||d.getPropertyValue(b);if(Z(b)){var f={};return x.each(b,function(a,b){f[b]=e.style[z(b)]||d.getPropertyValue(b)}),f}}var g="";if("string"==a(b))c||0===c?g=j(b)+":"+l(b,c):this.each(function(){this.style.removeProperty(j(b))});else for(w in b)b[w]||0===b[w]?g+=j(w)+":"+l(w,b[w])+";":this.each(function(){this.style.removeProperty(j(w))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(x(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return!!a&&B.some.call(this,function(a){return this.test(s(a))},k(a))},addClass:function(a){return a?this.each(function(b){if("className"in this){y=[];var c=s(this),d=q(this,a,b,c);d.split(/\s+/g).forEach(function(a){x(this).hasClass(a)||y.push(a)},this),y.length&&s(this,c+(c?" ":"")+y.join(" "))}}):this},removeClass:function(a){return this.each(function(b){if("className"in this){if(a===v)return s(this,"");y=s(this),q(this,a,b,y).split(/\s+/g).forEach(function(a){y=y.replace(k(a)," ")}),s(this,y.trim())}})},toggleClass:function(a,b){return a?this.each(function(c){var d=x(this),e=q(this,a,c,s(this));e.split(/\s+/g).forEach(function(a){(b===v?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===v?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===v?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(x(a).css("margin-top"))||0,c.left-=parseFloat(x(a).css("margin-left"))||0,d.top+=parseFloat(x(b[0]).css("border-top-width"))||0,d.left+=parseFloat(x(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==x(a).css("position");)a=a.offsetParent;return a})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});x.fn[a]=function(e){var f,g=this[0];return e===v?c(g)?g["inner"+b]:d(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=x(this),g.css(a,q(this,e,b,g[a]()))})}}),O.forEach(function(b,c){var d=c%2;x.fn[b]=function(){var b,e,f=x.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null;var h=x.contains(E.documentElement,e);f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return x(a).remove();e.insertBefore(a,b),h&&u(a,function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},x.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return x(a)[b](this),this}}),W.Z.prototype=x.fn,W.uniq=A,W.deserializeValue=t,x.zepto=W,x}();return window.Zepto=a,void 0===window.$&&(window.$=a),function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){var e=2 in arguments&&n.call(arguments,2);if(o(c)){var f=function(){return c.apply(d,e?e.concat(n.call(arguments)):arguments)};return f._zid=b(c),f}if(p(d))return e?(e.unshift(c[d],c),a.proxy.apply(null,e)):a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(o(d)||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){b.type in t&&"function"==typeof this[b.type]?this[b.type]():"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),!e.isImmediatePropagationStopped()&&void 0})}),f},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return 0 in arguments?this.bind(b,a):this.trigger(b)}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(a),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)!==!1&&c(b,d,"ajaxBeforeSend",[a,b])!==!1&&void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/,z=s.createElement("a");z.href=window.location.href,a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c,e=a.extend({},b||{}),i=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===e[p]&&(e[p]=a.ajaxSettings[p]);d(e),e.crossDomain||(c=s.createElement("a"),c.href=e.url,c.href=c.href,e.crossDomain=z.protocol+"//"+z.host!=c.protocol+"//"+c.host),e.url||(e.url=window.location.toString()),m(e);var n=e.dataType,o=/\?.+=\?/.test(e.url);if(o&&(n="jsonp"),e.cache!==!1&&(b&&b.cache===!0||"script"!=n&&"jsonp"!=n)||(e.url=l(e.url,"_="+Date.now())),"jsonp"==n)return o||(e.url=l(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),a.ajaxJSONP(e,i);var r,t=e.accepts[n],u={},v=function(a,b){u[a.toLowerCase()]=[a,b]},w=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,x=e.xhr(),A=x.setRequestHeader;if(i&&i.promise(x),e.crossDomain||v("X-Requested-With","XMLHttpRequest"),v("Accept",t||"*/*"),(t=e.mimeType||t)&&(t.indexOf(",")>-1&&(t=t.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(t)),(e.contentType||e.contentType!==!1&&e.data&&"GET"!=e.type.toUpperCase())&&v("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(q in e.headers)v(q,e.headers[q]);if(x.setRequestHeader=v,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=j,clearTimeout(r);var b,c=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==w){n=n||k(e.mimeType||x.getResponseHeader("content-type")),b=x.responseText;try{"script"==n?(0,eval)(b):"xml"==n?b=x.responseXML:"json"==n&&(b=y.test(b)?null:a.parseJSON(b))}catch(a){c=a}c?h(c,"parsererror",x,e,i):g(b,x,e,i)}else h(x.statusText||null,x.status?"error":"abort",x,e,i)}},f(x,e)===!1)return x.abort(),h(null,"abort",x,e,i),x;if(e.xhrFields)for(q in e.xhrFields)x[q]=e.xhrFields[q];var B=!("async"in e)||e.async;x.open(e.type,e.url,B,e.username,e.password);for(q in u)A.apply(x,u[q]);return e.timeout>0&&(r=setTimeout(function(){x.onreadystatechange=j,x.abort(),h(null,"timeout",x,e,i)},e.timeout)),x.send(e.data?e.data:null),x},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var A=encodeURIComponent;a.param=function(b,c){var d=[];return d.add=function(b,c){a.isFunction(c)&&(c=c()),null==c&&(c=""),this.push(A(b)+"="+A(c))},o(d,b,c),d.join("&").replace(/%20/g,"+")}}(a),function(a){a.fn.serializeArray=function(){var b,c,d=[],e=function(a){return a.forEach?a.forEach(e):void d.push({name:b,value:a})};return this[0]&&a.each(this[0].elements,function(d,f){c=f.type,b=f.name,b&&"fieldset"!=f.nodeName.toLowerCase()&&!f.disabled&&"submit"!=c&&"reset"!=c&&"button"!=c&&"file"!=c&&("radio"!=c&&"checkbox"!=c||f.checked)&&e(a(f).val())}),d},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(0 in arguments)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.isDefaultPrevented()||this.get(0).submit()}return this}}(a),function(a){"__proto__"in{}||a.extend(a.zepto,{Z:function(b,c){return b=b||[],a.extend(b,a.fn),b.selector=c||"",b.__Z=!0,b},isZ:function(b){return"array"===a.type(b)&&"__Z"in b}});try{getComputedStyle(void 0)}catch(a){var b=getComputedStyle;window.getComputedStyle=function(a){try{return b(a)}catch(a){return null}}}}(a),function(a){function b(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){k=null,m.last&&(m.el.trigger("longTap"),m={})}function d(){k&&clearTimeout(k),k=null}function e(){h&&clearTimeout(h),i&&clearTimeout(i),j&&clearTimeout(j),k&&clearTimeout(k),h=i=j=k=null,m={}}function f(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function g(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}var h,i,j,k,l,m={},n=750;a(document).ready(function(){var o,p,q,r,s=0,t=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),a(document).bind("MSGestureEnd",function(a){var b=a.velocityX>1?"Right":a.velocityX<-1?"Left":a.velocityY>1?"Down":a.velocityY<-1?"Up":null;b&&(m.el.trigger("swipe"),m.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(b){(r=g(b,"down"))&&!f(b)||(q=r?b:b.touches[0],b.touches&&1===b.touches.length&&m.x2&&(m.x2=void 0,m.y2=void 0),o=Date.now(),p=o-(m.last||o),m.el=a("tagName"in q.target?q.target:q.target.parentNode),h&&clearTimeout(h),m.x1=q.pageX,m.y1=q.pageY,p>0&&p<=250&&(m.isDoubleTap=!0),m.last=o,k=setTimeout(c,n),l&&r&&l.addPointer(b.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){(r=g(a,"move"))&&!f(a)||(q=r?a:a.touches[0],d(),m.x2=q.pageX,m.y2=q.pageY,s+=Math.abs(m.x1-m.x2),t+=Math.abs(m.y1-m.y2))}).on("touchend MSPointerUp pointerup",function(c){(r=g(c,"up"))&&!f(c)||(d(),m.x2&&Math.abs(m.x1-m.x2)>30||m.y2&&Math.abs(m.y1-m.y2)>30?j=setTimeout(function(){if(m.el){m.el.trigger("swipe");var c="swipe"+b(m.x1,m.x2,m.y1,m.y2),d=a.Event(c);d.clientX=m.x2,d.clientY=m.y2,d.cancelTouch=e,m.el.trigger(d)}m={}},0):"last"in m&&(s<30&&t<30?i=setTimeout(function(){var b=a.Event("tap");b.clientX=m.x1,b.clientY=m.y1,b.cancelTouch=e,m.el&&m.el.trigger(b),m.isDoubleTap?(m.el&&m.el.trigger("doubleTap"),m={}):h=setTimeout(function(){h=null,m.el&&m.el.trigger("singleTap"),m={}},250)},0):m={}),s=t=0)}).on("touchcancel MSPointerCancel pointercancel",e),a(window).on("scroll",e)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.on(b,a)}})}(a),function(a,b){function c(a){return a.replace(/([A-Z])/g,"-$1").toLowerCase()}function d(a){return e?e+a:a.toLowerCase()}var e,f,g,h,i,j,k,l,m,n,o="",p={Webkit:"webkit",Moz:"",O:"o"},q=document.createElement("div"),r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,s={};q.style.transform===b&&a.each(p,function(a,c){if(q.style[a+"TransitionProperty"]!==b)return o="-"+a.toLowerCase()+"-",e=c,!1}),f=o+"transform",s[g=o+"transition-property"]=s[h=o+"transition-duration"]=s[j=o+"transition-delay"]=s[i=o+"transition-timing-function"]=s[k=o+"animation-name"]=s[l=o+"animation-duration"]=s[n=o+"animation-delay"]=s[m=o+"animation-timing-function"]="",a.fx={off:e===b&&q.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:o,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(c,d,e,f,g){return a.isFunction(d)&&(f=d,e=b,d=b),a.isFunction(e)&&(f=e,e=b),a.isPlainObject(d)&&(e=d.easing,f=d.complete,g=d.delay,d=d.duration),d&&(d=("number"==typeof d?d:a.fx.speeds[d]||a.fx.speeds._default)/1e3),g&&(g=parseFloat(g)/1e3),this.anim(c,d,e,f,g)},a.fn.anim=function(d,e,o,p,q){var t,u,v,w={},x="",y=this,z=a.fx.transitionEnd,A=!1;if(e===b&&(e=a.fx.speeds._default/1e3),q===b&&(q=0),a.fx.off&&(e=0),"string"==typeof d)w[k]=d,w[l]=e+"s",w[n]=q+"s",w[m]=o||"linear",z=a.fx.animationEnd;else{u=[];for(t in d)r.test(t)?x+=t+"("+d[t]+") ":(w[t]=d[t],u.push(c(t)));x&&(w[f]=x,u.push(f)),e>0&&"object"==typeof d&&(w[g]=u.join(", "),w[h]=e+"s",w[j]=q+"s",w[i]=o||"linear")}return v=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(z,v)}else a(this).unbind(z,v);A=!0,a(this).css(s),p&&p.call(this)},e>0&&(this.bind(z,v),setTimeout(function(){A||v.call(y)},1e3*(e+q)+25)),this.size()&&this.get(0).clientLeft,this.css(w),e<=0&&setTimeout(function(){y.each(function(){v.call(this)})},0),this},q=null}(a),function(a,b){function c(c,d,e,f,g){"function"!=typeof d||g||(g=d,d=b);var h={opacity:e};return f&&(h.scale=f,c.css(a.fx.cssPrefix+"transform-origin","0 0")),c.animate(h,d,null,g)}function d(b,d,e,f){return c(b,d,0,e,function(){g.call(a(this)),f&&f.call(this)})}var e=window.document,f=(e.documentElement,a.fn.show),g=a.fn.hide,h=a.fn.toggle;a.fn.show=function(a,d){return f.call(this),a===b?a=0:this.css("opacity",0),c(this,a,1,"1,1",d)},a.fn.hide=function(a,c){return a===b?g.call(this):d(this,a,"0,0",c)},a.fn.toggle=function(c,d){return c===b||"boolean"==typeof c?h.call(this,c):this.each(function(){var b=a(this);b["none"==b.css("display")?"show":"hide"](c,d)})},a.fn.fadeTo=function(a,b,d){return c(this,a,b,null,d)},a.fn.fadeIn=function(a,b){var c=this.css("opacity");return c>0?this.css("opacity",0):c=1,f.call(this).fadeTo(a,c,b)},a.fn.fadeOut=function(a,b){return d(this,a,null,b)},a.fn.fadeToggle=function(b,c){return this.each(function(){var d=a(this);d[0==d.css("opacity")||"none"==d.css("display")?"fadeIn":"fadeOut"](b,c)})}}(a),function(a){function b(a,b,c,d,e,f){a=String(a);for(var g=0,h=0,i=a.length,j="",k=0;h<i;){var l=a.charCodeAt(h);for(l=l<256?c[l]:-1,g=(g<<e)+l,k+=e;k>=f;){k-=f;var m=g>>k;j+=d.charAt(m),g^=m<<k}++h}return!b&&k>0&&(j+=d.charAt(g<<f-k)),j}for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="",e=[256],f=[256],g=0,h={encode:function(a){var b=a.replace(/[\u0080-\u07ff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(192|b>>6,128|63&b)}).replace(/[\u0800-\uffff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(224|b>>12,128|b>>6&63,128|63&b)});return b},decode:function(a){var b=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){var b=(15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2);return String.fromCharCode(b)}).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){var b=(31&a.charCodeAt(0))<<6|63&a.charCodeAt(1);return String.fromCharCode(b)});return b}};g<256;){var i=String.fromCharCode(g);d+=i,f[g]=g,e[g]=c.indexOf(i),++g}var j=a.base64=function(a,b,c){return b?j[a](b,c):a?null:this};j.btoa=j.encode=function(a,d){return a=h.encode(a),a=b(a,!1,f,c,8,6),a+"====".slice(a.length%4||4)},j.atob=j.decode=function(a,c){a=a.replace(/[^A-Za-z0-9\+\/\=]/g,""),a=String(a).split("=");var f=a.length;do--f,a[f]=b(a[f],!0,e,d,6,8);while(f>0);return a=a.join(""),h.decode(a)}}(a),a}(),b=function(){return window}(),c=function(a){function b(a){for(var b=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],d=a||b,e=[],f=d.length,g=null,h="",i=0,j=4;i<j;i++)g=c(f),
h=d[g],e.push(h);return sectionVal=e.join(""),sectionVal}function c(a){var b=0,c=a-b,d=parseInt(Math.random()*c+0,10);return d}var d=a._,e={LOG:{log:function(a){console.log(a)},info:function(a,b){"undefined"==typeof b&&(b="background: yellowgreen;"),console.info("%c "+a,b)},warn:function(a){console.warn(a)},error:function(a){console.error(a)}},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},_downloadImageFile:function(a,b,c){gli_ftp_download({url:a,local_path:b},function(){console.log("[_downloadImageFile]下载图片-手机:"+a)})},downloadImageFilePc:function(a){gli_ftp_download(a,"gli_ftp_download_cb")},_saveFileCommon:function(a,b,c){console.log("[tool.js] -> _saveFileCommon! ");var d=e.doEncodeData(b);gli_file_put(a,d)},_saveFileEncrypt:function(a,b,c){console.log("[tool.js] -> _saveFileEncrypt! "+a),gli_lockit_encode({output_file:a,input_file:b},c)},_readFileCommon:function(a,b){console.log("[tool.js] -> _readFileCommon! "),gli_file_get(a,"",b)},_readFileDecrypt:function(a,b,c){console.log("[tool.js] -> 读取文件--解密方式:"+b),gli_lockit_decode({input_file:b,output_file:"",license_id:a.license_id,server:a.server,force:!0},c)},createBookPath:function(a,b,c,d){var e="",f=".txt",g="/",h=[];return h.push(d),h.push(a),h.push(b),h.push(c.replace(/\s/g,"")),e=h.join(g)+f},getProgressRate:function(a,b,c){var d=0,e=parseInt(c)||0,f=100-e,g=0;try{g=b/a,d=parseInt(g*f)+e}catch(a){console.error("Utils.js -> getProgressRate. "+a)}return d},emptyFunc:function(){},getNowFormatDate:function(a){var b=a||new Date,c="-",d=":",e=b.getMonth()+1,f=b.getDate(),g=b.getHours(),h=b.getMinutes();e="00"+e,e=e.substr(e.length-2),f="00"+f,f=f.substr(f.length-2),g="00"+g,g=g.substr(g.length-2),h="00"+h,h=h.substr(h.length-2);var i=b.getFullYear()+c+e+c+f+" "+g+d+h;return i},getTimestamp:function(a){var b=(new Date).getTime();return a?b:parseInt((new Date).getTime()/1e3)},formatTime:function(a){var b,c,d,e=Math.floor(a/60);return secends=Math.floor(a%60),e>=60?(b=Math.floor(e/60),c=Math.floor(e%60)):(c=e,b="00"),b="00"+b,b=b.substr(b.length-2),c="00"+c,c=c.substr(c.length-2),secends="00"+secends,secends=secends.substr(secends.length-2),d=b+":"+c+":"+secends},doEncodeData:function(a){return a},doDecodeData:function(a){return a},pushArray:function(a,b){for(var c=a.concat(),d=0,e=b.length;d<e;d++)c.push(b[d]);return c},createFunName:function(b,c){var d=c||b.name;return d="gli_"+d,"undefined"==typeof a[d]?(console.log("%c Not Exits!","background:pink;"),a[d]=b):console.log("%c  Exits! "+d,"background:yellow;"),d},hasFunction:function(a,b){var c=!1;return a&&"function"==typeof a[b]&&(c=!0),c},getRandomKey:function(){var a=[0,1,2,3,4,5,6,7,8,9],c=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],d=[];d=d.concat(a,c);for(var e=[],f=0,g=4;f<g;f++)e.push(b(d));return rankey=e.join("-"),console.log("rankey:"+rankey),rankey},convertData:function(a,b){var c=[];if(!a||0==a.length)return c;var e=d.sortBy(a,function(a){return-new Date(a.note_time).getTime()}),f=d.filter(e,function(a){if("3"!=a.oparate_type)return!0}),g=d.groupBy(f,"chapter_id"),h=null,i=null,j=null;for(h in g)i=g[h],j={},j.chapter_id=i[0].chapter_id,j.chapter_name=i[0].chapter_name,j.note_count=i.length,j[b]=i,c.push(j);return c},filterLocalData:function(a){var b=[],c=null;if("undefined"==typeof a||!a)return b;for(var d=0,e=a.length;d<e;d++)c=a[d],c.s_id?c.s_id&&"2"==c.oparate_type?b.push(c):c.s_id&&"3"==c.oparate_type&&(c.original="",b.push(c)):b.push(c);return b},isBrowserLegal:function(){var a=navigator.userAgent,b=!1;return(a.indexOf("Chrome")>-1||a.indexOf("Firefox")>-1||a.indexOf("Safari")>-1)&&(b=!0),b}};return"function"!=typeof gli_file_get&&(gli_file_get=e.emptyFunc),e}(b),d=function(a,b){var b=a.$,c=function(a){var c={baseData:{hostUrl:"../../PHP/index.php",book_id:"",user_id:"",use_file_url:!1},passData:null};this.opts=b.extend(!0,{},c,a)};return c.prototype.getBookCatalog=function(a,c,d){function e(a){for(var b=a.chapter,c=0,d=b.length;c<d;c++)b[c].chapter_name.trim()||(b[c].chapter_name=b[c].chapter_id+"_默认章节名")}var f=this.opts,g={action:"get_catalog",book_id:f.baseData.book_id,user_id:f.baseData.user_id,use_file_url:f.baseData.use_file_url},h=b.extend(!0,{},g,f.passData,a);b.ajax({type:"get",url:f.baseData.hostUrl,async:!0,data:h,dataType:"json",success:function(a,b,f){a.status&&"function"==typeof c?(e(a.data),c(a.data)):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.getBookmark=function(a,c,d){var e=this.opts,f={action:"get_bookmark",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){if(a.status&&"function"==typeof c){for(var f=a.data.bookmark_list,g=0,h=f.length;g<h;g++)f[g].oparate_type="0";c(a.data)}else"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.setBookmark=function(a,c,d){var e=this.opts,f={action:"set_bookmark",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.delBookmark=function(a,c,d){var e=this.opts,f={action:"del_bookmark",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.getBookNote=function(a,c,d){var e=this.opts,f={action:"get_note",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){if(a.status&&"function"==typeof c){for(var f=a.data.note_list,g=0,h=f.length;g<h;g++)f[g].oparate_type="0";c(a.data)}else"function"==typeof d&&d(a.data)},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.delNote=function(a,c,d){var e=this.opts,f={action:"del_note",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.getChapter=function(a,c,d){var e=this.opts,f={action:"get_chapter",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):a.status||d(a.data)},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.sendComplaint=function(a,c,d){var e=this.opts,f={action:"send_complaint",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.getSearchHistory=function(a,c,d){var e=this.opts,f={action:"search_history",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.delSearchHis=function(a,c,d){var e=this.opts,f={action:"del_history",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.search=function(a,c,d){var e=this.opts,f={action:"search",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a):"function"==typeof d&&d()},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.get_copyright=function(a,c,d){var e=this.opts,f={action:"copyright_get",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.set_copyright=function(a,c,d){var e=this.opts,f={action:"copyright_set",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c():"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.sendNote=function(a,c,d){var e=this.opts,f={action:"send_note",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a):"function"==typeof d&&d(a.msg)},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.sendCorrect=function(a,c,d){var e=this.opts,f={action:"send_correct",book_id:e.baseData.book_id,user_id:e.baseData.user_id,chapter_id:a.chapter_id,chapter_name:a.chapter_name,percent:a.percent,original:a.original,correctVal:a.correctVal},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c():"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(a.responseText)}})},c.prototype.batchUpdateNote=function(a,c,d){var e=this.opts,f={action:"batch_update_note",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a):"function"==typeof d&&d(a.msg)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.batchUpdateBookmark=function(a,c,d){var e=this.opts,f={action:"batch_update_bookmark",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c():"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.setBookState=function(a,c,d){var e=this.opts,f={action:"set_book_state",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c():"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.getProgressData=function(a,c,d){var e=this.opts,f={action:"get_progress",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.getGlossaryList=function(a,c,d){var e=this.opts,f={action:"get_glossary_list",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.getKnowledgeTree=function(a,c,d){var e=this.opts,f={action:"get_knowledge_tree",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c.prototype.getSearchKnowledge=function(a,c,d){var e=this.opts,f={action:"get_search_knowledge",book_id:e.baseData.book_id,user_id:e.baseData.user_id},g=b.extend(!0,{},f,e.passData,a);b.ajax({type:"get",url:e.baseData.hostUrl,async:!0,data:g,timeout:3e3,dataType:"json",success:function(a,b,e){a.status&&"function"==typeof c?c(a.data):"function"==typeof d&&d(a.error)},error:function(a,b,c){"function"==typeof d&&d(c)}})},c}(b,a),e=function(a,b){var c=(a._,{countpage:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-panel%20read-selector-countpage%22%20style=%22z-index:%20-1;%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E7%AB%A0%E8%8A%82%E5%90%8D--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3Eheader%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-countpage-content%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-countpage%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-icon-hv-center%22%3Efooter%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),main:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-panel%20read-selector-main%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-page-storage%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E5%B9%B3%E9%93%BA%E5%8A%A8%E7%94%BB%E9%A1%B5%E9%9D%A2%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content-animate%20read-page-prev%20read-cf%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapterName%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E4%B9%A6%E7%AD%BE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-animate-content%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-icon-hv-center%22%3E%3C%25=%20pagePerc%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view-page%22%20style=%22%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E7%AB%A0%E8%8A%82%E5%90%8D--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapterName%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E4%B9%A6%E7%AD%BE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapterContent%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-delicate%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progressbar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-icon-hv-center%22%3E%3C%25=%20pagePerc%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E5%B9%B3%E9%93%BA%E5%8A%A8%E7%94%BB%E9%A1%B5%E9%9D%A2%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content-animate%20read-page-next%20read-cf%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapterName%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E4%B9%A6%E7%AD%BE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-animate-content%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-icon-hv-center%22%3E%3C%25=%20pagePerc%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E4%BB%BF%E7%9C%9F%E5%8A%A8%E7%94%BB%E9%A1%B5%E9%9D%A2%20--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-real-animate%20read-cf%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapterName%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E4%B9%A6%E7%AD%BE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-animate-content%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-icon-hv-center%22%3E%3C%25=%20pagePerc%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),newpage:decodeURI("%0A%20%20%20%20%3C!--%E7%AB%A0%E8%8A%82%E5%90%8D--%3E%0A%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapterName%20%25%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E4%B9%A6%E7%AD%BE--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%22%20style=%22opacity:%201;%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapterContent%20%25%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-icon-hv-center%22%3E20%25%3C/span%3E%0A%20%20%20%20%3C/div%3E%0A"),setting:decodeURI("%0A%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-setting-panel%22%3E%0A%0A%20%20%20%20%20%20%20%20%3C!--%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B7%A6%E4%BE%A7%E9%80%80%E5%87%BA%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-exit-reader%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-icon-v-center%20read-sel-out-reader%22%3E%E8%BF%94%E5%9B%9E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-extend-btns%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-copyright%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-kEnhanced%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-knowledge%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3C!--%E4%B8%AD%E9%97%B4%E9%80%8F%E6%98%8E%E5%8C%BA%E5%9F%9F--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-set-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-cbn-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-hv-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-progress-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-hv-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-font-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-hv-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%A4%9C%E9%97%B4%E6%A8%A1%E5%BC%8F--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-speed-night%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A"),fontlight:decodeURI("%0A%0A%20%20%20%20%3C!--%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE%E9%9D%A2%E6%9D%BF--%3E%0A%20%20%20%20%3Cdiv%20class=%22read-font-set-panel%20%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E7%AC%AC%E4%B8%80%E9%A1%B5--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-set-page1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B1%8F%E5%B9%95%E4%BA%AE%E5%BA%A6--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E5%B1%8F%E5%B9%95%E4%BA%AE%E5%BA%A6%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-plugs-group%20read-screen-intensity%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%20style=%22width:70%25;%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-light-bar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon-div%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-lf%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-rt%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%20style=%22width:25%25;%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-system-light%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%E7%B3%BB%E7%BB%9F%E4%BA%AE%E5%BA%A6%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-plugs-group%20read-font-size%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E7%BF%BB%E9%A1%B5%E6%96%B9%E5%BC%8F--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E7%BF%BB%E9%A1%B5%E6%96%B9%E5%BC%8F%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-plugs-group%20read-turn-page%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B0%8F%E6%8C%89%E9%92%AE%20%E5%88%87%E6%8D%A2%E4%B8%A4%E9%A1%B5%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-turn-page-icon%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-icon%20read-active%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C!--%E7%AC%AC%E4%BA%8C%E9%A1%B5--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-set-page2%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%AD%97%E4%BD%93%E7%B1%BB%E5%9E%8B--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E5%AD%97%E4%BD%93%E7%B1%BB%E5%9E%8B%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-plugs-group%20read-font-family%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-font-family-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-more-font-btn%20read-disabled%22%3E%E6%9B%B4%E5%A4%9A%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-plugs-group%20read-bg-color%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B1%8F%E5%B9%95%E5%B8%B8%E4%BA%AE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E5%B1%8F%E5%B9%95%E9%95%BF%E4%BA%AE%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-plugs-group%20read-screen-always-bright%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-font%22%3E%E5%BC%80%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-turn-off-on%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-font%20read-active%22%3E%E5%85%B3%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B0%8F%E6%8C%89%E9%92%AE%20%E5%88%87%E6%8D%A2%E4%B8%A4%E9%A1%B5%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-turn-page-icon%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-icon%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-icon%20read-active%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),
progress:decodeURI("%0A%0A%20%20%20%20%3C!--%E8%BF%9B%E5%BA%A6%E8%AE%BE%E7%BD%AE%E9%9D%A2%E6%9D%BF--%3E%0A%20%20%20%20%3Cdiv%20class=%22read-schedule-set-panel%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-adjust%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-font%20read-prev-chapter%22%3E1%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-center-click-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-icon%20read-prev%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-count-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-text-over%20read-chapt-title%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-text-over%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-chapt-current%22%3E2%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E/%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-chapt-total%22%3E10%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-icon%20read-next%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-font%20read-next-chapter%22%3E3%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C!--%E8%BF%9B%E5%BA%A6%E8%B0%83%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-schedule-adjust%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%3Cdiv%20class=%22prev-step%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22icon-v-center%22%3E6%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-bar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A"),complain:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-copyright-complaint%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-cancel%22%3E%E5%8F%96%E6%B6%88%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon-hv-center%22%3E%E7%89%88%E6%9D%83%E6%8A%95%E8%AF%89%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-sub-blue-color%20read-send%22%3E%E5%8F%91%E9%80%81%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20placeholder=%22%E4%BF%9D%E6%8A%A4%E7%89%88%E6%9D%83%EF%BC%8C%E5%85%B1%E5%BB%BA%E7%99%BE%E5%AE%B6%E4%BA%89%E9%B8%A3%E7%9A%84%E5%8E%9F%E5%88%9B%E5%A4%A7%E7%8E%AF%E5%A2%83%EF%BC%8C%E6%84%9F%E8%B0%A2%E6%9C%89%E6%82%A8%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),search:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-search-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-cancel%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search-ipt-box%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-search%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type=%22search%22%20class=%22read-search-ipt%22%20placeholder=%22%E8%AF%B7%E8%BE%93%E5%85%A5%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%22%20/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-sub-blue-color%20read-send%22%3E%E6%90%9C%E7%B4%A2%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search-history%20read-hide%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search-result%20read-hide%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),correct:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-reader-correct%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-cancel%22%3E%E5%8F%96%E6%B6%88%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon-hv-center%22%3E%E7%BA%A0%E9%94%99%E6%96%87%E5%AD%97%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-sub-blue-color%20read-send%22%3E%E5%8F%91%E9%80%81%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20placeholder=%22%E5%B8%AE%E5%8A%A9%E6%88%91%E4%BB%AC%E7%BA%A0%E6%AD%A3%E9%94%99%E8%AF%AF%EF%BC%8C%E8%AE%A9%E6%88%91%E4%BB%AC%E4%B8%BA%E5%A4%A7%E5%AE%B6%E6%9B%B4%E5%A5%BD%E7%9A%84%E6%9C%8D%E5%8A%A1%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),cbn:decodeURI("%0A%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-cbn-panel%22%20style=%22display:%20none;%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header-nav%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C!--%E5%BA%95%E9%83%A8%E7%BB%A7%E7%BB%AD%E9%98%85%E8%AF%BB%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-back-read%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-h-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%E7%BB%A7%E7%BB%AD%E9%98%85%E8%AF%BB%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A"),cbnNavMenu:decodeURI("%0A%20%20%20%20%3C%25%20_.each(obj,%20function(%20menu%20)%7B%20%20%20%25%3E%0A%0A%20%20%20%20%3Cdiv%20class=%22read-lf%20%3C%25=%20menu.state%20%25%3E%20read-nav-menus%3C%25=%20obj.length%20%25%3E%20%22%3E%0A%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-pointer%20read-text-over%22%20data-view=%22%3C%25=%20menu.view%20%25%3E%22%3E%3C%25=%20menu.text%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C%25%20%20%20%7D);%20%20%25%3E%0A"),cbnNavBody:decodeURI("%0A%20%20%20%20%3C%25%20_.each(obj,%20function(%20menu%20)%7B%20%20%20%25%3E%0A%20%20%20%20%3Cdiv%20class=%22%3C%25=%20menu.view%20%25%3E%20%3C%25%20if(menu.state%20!=%20'read-active')%7B%20%25%3E%20read-hide%20%20%3C%25%20%7D%20%25%3E%20%22%20style=%22height:%20100%25;%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-no-%3C%25=%20menu.name%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-h-center%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%3C%25=%20menu.prompt%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C%25%20%20%20%7D);%20%20%25%3E%0A"),catalog:decodeURI("%0A%0A%20%20%20%20%3Cdiv%20class=%22read-book-info%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%3Ch1%20class=%22read-text-over%22%3E%3C%25=%20obj.name%20%25%3E%3C/h1%3E%0A%20%20%20%20%20%20%20%20%3Ch2%20class=%22read-text-over%22%3E%3C%25=%20obj.subtitle%20%25%3E%3C/h2%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-catalog-author%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-lf%20read-text-over%22%3E%3C%25=%20obj.author%20%25%3E%3C/span%3E%3Cspan%20class=%22%22%3E%E8%91%97%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-lf%20read-text-over%22%3E%3C%25=%20obj.translator%20%25%3E%3C/span%3E%3Cspan%20class=%22%22%3E%E8%AF%91%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-catalog-visitors%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%3Cspan%3E%3C%25=%20obj.read_num%20%25%3E%20%E9%98%85%E8%AF%BB%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%3Cspan%3E%3C%25=%20obj.word_count%20%25%3E%20%E5%AD%97%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20class=%22read-chapter-list%22%3E%0A%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22%3C%25%20if%20(!chapt.chapter_status)%20%7B%20%25%3Eread-no-data%3C%25%20%7D%20%25%3E%22%20data-status=%22%3C%25=%20chapt.chapter_status%20%25%3E%22%20data-id=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-chapter-name%22%3E%3C%25=%20chapt.chapter_name%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%3Cspan%20class=%22read-rt%20read-chapter-seat%22%3E%3C%25=%20!!chapt.pageNum%20?%20chapt.pageNum%20:%200%20%25%3E%3C/span%3E--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-chapter-seat%22%3E%3C%25=%20(parseInt(chapt.textlen)/parseInt(obj.word_count)%20*%20100).toFixed(2)%20%25%3E%25%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%3C/div%3E%0A%0A"),note:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-has-note%20%22%3E%0A%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter_list,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%3C%25%20if(!_.isEmpty(chapt.note_list))%7B%20%25%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-one-chapter-notes%22%20data-chapterid=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-chapter%20cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-note-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.chapter_name%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-note-chapter-count%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.note_count%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(chapt.note_list,%20function(note)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note%22%20data-noteid=%22%3C%25=%20note.note_id%20%25%3E%22%20data-percent=%22%3C%25=%20note.note_page%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-left%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20note.original%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20note.note_text%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-note-time%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-note-or-underline%20read-note-%3C%25=%20!note.note_text%20?%200%20:%201%20%20%25%3E%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=(parseFloat(note.note_page)*100).toFixed(2)+%20%22%25%22%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20obj.nowDate%20==%20note.note_time.substr(0,%2010)%20?%20note.note_time.substring(11)%20:%20note.note_time.substr(0,%2010)%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-del%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%E5%88%A0%E9%99%A4%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D;%20%25%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20class=%22read-no-note%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-h-center%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF%E6%8C%89%E6%96%87%E5%AD%97%E5%8F%AF%E6%B7%BB%E5%8A%A0%E7%AC%94%E8%AE%B0%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),bookmark:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-has-bookmark%22%3E%0A%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter_list,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-one-chapter-bookmark%22%20data-chapterid=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%20data-chapterName=%22%3C%25=%20chapt.chapter_name%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-chapter%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-text-over%20read-bookmark-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.chapter_name%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-bookmark-chapter-count%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.count%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(chapt.bookmark_list,%20function(bookmark)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark%20read-bookmark%3C%25=%20bookmark.bookmark_id%20%25%3E%22%20data-bookmarkid=%22%3C%25=%20bookmark.bookmark_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-left%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20bookmark.bookmark_text%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-bookmark-time%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-icon%20read-icon-v-center%22%3E%3C/span%3E%3Cspan%20class=%22read-bookmark-percent%22%3E%3C%25=%20(parseFloat(bookmark.bookmark_page)*100).toFixed(2)%20%25%3E%25%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20bookmark.bookmark_time%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-del%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%E5%88%A0%E9%99%A4%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20class=%22read-no-bookmark%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-h-center%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E9%98%85%E8%AF%BB%E6%97%B6%E4%B8%8B%E6%8B%89%E6%B7%BB%E5%8A%A0%E4%B9%A6%E7%AD%BE%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),firstOpen:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-first-time%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-flex-item-1%20read-icon%20%20read-icon-left%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-flex-item-2%20read-icon%20%20read-icon-middle%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-flex-item-1%20read-icon%20%20read-icon-right%22%3E%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),viewImg:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-viewimg-panel%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-img-setting%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-exit-img%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E8%BF%94%E5%9B%9E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-save-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E4%BF%9D%E5%AD%98%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-rotate-btn%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-viewimg-content%22%3E%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),knowledge:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-knowledge-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-knowledge-echarts%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btns%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-exit%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%E8%BF%94%E5%9B%9E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type=%22text%22%20placeholder=%22%E8%AF%B7%E8%BE%93%E5%85%A5%E6%82%A8%E6%83%B3%E6%90%9C%E7%B4%A2%E7%9A%84%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%85%B3%E9%94%AE%E5%AD%97%22%20/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-hide%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cancel%22%3E%E5%8F%96%E6%B6%88%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-echarts-title%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-echarts%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-echarts-list%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-knowledge-nav%20read-cf%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btns%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-exit%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%E9%80%80%E5%87%BA%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-back%22%3E%E8%BF%94%E5%9B%9E%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-nav%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteEdit:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-note-edit%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-cancel%22%3E%E5%8F%96%E6%B6%88%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon-hv-center%22%3E%E7%BC%96%E8%BE%91%E7%AC%94%E8%AE%B0%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-sub-blue-color%20read-send%22%3E%E4%BF%9D%E5%AD%98%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20placeholder=%22%E8%BD%BB%E6%9D%BE%E8%AE%B0%E5%BD%95%E6%82%A8%E7%9A%84%E6%89%80%E6%83%B3%E3%80%81%E6%89%80%E6%84%9F%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteDetail:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-note-detail%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-detail-left%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-detail-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon-hv-center%20read-font%22%3E%E6%9C%AC%E7%AB%A0%E8%8A%82%E7%AC%94%E8%AE%B0%E8%AF%A6%E6%83%85%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-rt%20read-share-btn%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%8E%9F%E6%96%87%E6%91%98%E8%A6%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%E5%8E%9F%E6%96%87%E6%91%98%E8%A6%81%E5%8E%9F%E6%96%87%E6%91%98%E8%A6%81%E5%8E%9F%E6%96%87%E6%91%98%E8%A6%81%E5%8E%9F%E6%96%87%E6%91%98%E8%A6%81%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-text%22%3E%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%97%B6%E9%97%B4--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-time%20read-rt%22%3E2016/08/01%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btns%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-lf%20read-delete-btn%22%3E%E5%88%A0%E9%99%A4%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-rt%20read-edit-btn%22%3E%E7%BC%96%E8%BE%91%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-prev%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%E4%B8%8A%E4%B8%80%E4%B8%AA%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon-hv-center%20read-page%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-current%22%3E1%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E/%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-total%22%3E3%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-next%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%E4%B8%8B%E4%B8%80%E4%B8%AA%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteShare:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-note-share%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-share-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-share-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%20class=%22read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(obj,%20function(item)%7B%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22%3C%25if(!item.flag)%7B%20%25%3E%20read-close%20%3C%25%20%7D%20%25%3E%22%20data-type=%22%3C%25=item.type%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%20%20%3C%25=item.icon_css%20%25%3E%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%20read-text-over%22%3E%3C%25=item.txt%20%25%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-note-share-cancel%22%3E%E5%8F%96   %E6%B6%88%3C/button%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),video:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-mobile-video-wrap%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-list%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bigSizeVideo%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cvideo%20class=%22read-current-video%22%20width=%22100%25%20%22%20height=%2299%25%20%22%3E%3C/video%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E6%8E%A7%E5%88%B6%E6%9D%A1%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-contorls-container%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-controls%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-play-btn%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-currenttime%20%22%3E00:00%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedprogress-bar%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-totaltime%20%22%3E00:00%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-full-screen%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header-back-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header-video-title%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E8%B0%83%E8%8A%82%E9%9F%B3%E9%87%8F%E6%9D%A1%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-volume-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-addvolume-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-totalvolume-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedvolume-bar%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-reducevolume-icon%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6%E6%9D%A1%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-light-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-light-icon%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-totallight-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedlight-bar%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E5%BC%95%E5%AF%BC%E9%A1%B5%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-guide-page%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E8%BF%9B%E5%BA%A6%E9%81%AE%E7%BD%A9%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-current-time%22%3E%3C/span%3E%3Cspan%3E/%3C/span%3E%3Cspan%20class=%22read-total-time%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E6%AD%A3%E5%9C%A8%E5%8A%A0%E8%BD%BD%E9%81%AE%E7%BD%A9%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-waiting-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-play-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E6%9A%82%E5%81%9C%E9%81%AE%E7%BD%A9%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pause-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-play-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A")
});return output={getTempl:function(a){return c[a]}}}(b,a),function(){function a(b){var c=a.modules[b];if(!c)throw new Error('failed to moveLoad "'+b+'"');return"exports"in c||"function"!=typeof c.definition||(c.client=c.component=!0,c.definition.call(this,c.exports={},c),delete c.definition),c.exports}a.loader="component",a.helper={},a.helper.semVerSort=function(a,b){for(var c=a.version.split("."),d=b.version.split("."),e=0;e<c.length;++e){var f=parseInt(c[e],10),g=parseInt(d[e],10);if(f!==g)return f>g?1:-1;var h=c[e].substr((""+f).length),i=d[e].substr((""+g).length);if(""===h&&""!==i)return 1;if(""!==h&&""===i)return-1;if(""!==h&&""!==i)return h>i?1:-1}return 0},a.latest=function(b,c){function d(a){throw new Error('failed to find latest module of "'+a+'"')}var e=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/,f=/(.*)~(.*)/;f.test(b)||d(b);for(var g=Object.keys(a.modules),h=[],i=[],j=0;j<g.length;j++){var k=g[j];if(new RegExp(b+"@").test(k)){var l=k.substr(b.length+1),m=e.exec(k);null!=m?h.push({version:l,name:k}):i.push({version:l,name:k})}}if(0===h.concat(i).length&&d(b),h.length>0){var n=h.sort(a.helper.semVerSort).pop().name;return c===!0?n:a(n)}var n=i.sort(function(a,b){return a.name>b.name})[0].name;return c===!0?n:a(n)},a.modules={},a.register=function(b,c){a.modules[b]={definition:c}},a.define=function(b,c){return a.modules[b]={exports:c},c},a.register("component~transform-property@0.0.1",function(a,b){a=a||{};for(var c,d=["webkitTransform","MozTransform","msTransform","OTransform","transform"],e=document.createElement("p"),f=0;f<d.length;f++)if(c=d[f],null!=e.style[c]){b.exports=c;break}return a}),a.register("component~has-translate3d@0.0.3",function(b,c){b=b||{};var d=a("component~transform-property@0.0.1");if(d&&window.getComputedStyle){var e={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},f=document.createElement("div");f.style[d]="translate3d(1px,1px,1px)",document.body.insertBefore(f,null);var g=getComputedStyle(f).getPropertyValue(e[d]);document.body.removeChild(f),c.exports=null!=g&&g.length&&"none"!=g}else c.exports=!1;return b}),a.register("yields~has-transitions@1.0.0",function(a,b){function c(a,b){return!!a.transition||(b=window.getComputedStyle(a),!!parseFloat(b.transitionDuration,10))}a=a||{},a=b.exports=function(a){switch(arguments.length){case 0:return e;case 1:return e?c(a):e}};var d=document.body.style,e="transition"in d||"webkitTransition"in d||"MozTransition"in d||"msTransition"in d;return a}),a.register("component~event@0.1.4",function(a,b){a=a||{};var c=window.addEventListener?"addEventListener":"attachEvent",d=window.removeEventListener?"removeEventListener":"detachEvent",e="addEventListener"!==c?"on":"";return a.bind=function(a,b,d,f){return a[c](e+b,d,f||!1),d},a.unbind=function(a,b,c,f){return a[d](e+b,c,f||!1),c},a}),a.register("ecarter~css-emitter@0.0.1",function(b,c){function d(a){return this instanceof d?void(this.el=a):new d(a)}b=b||{};var e=a("component~event@0.1.4"),f=["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd","animationend","webkitAnimationEnd","oAnimationEnd","MSAnimationEnd"];return c.exports=d,d.prototype.bind=function(a){for(var b=0;b<f.length;b++)e.bind(this.el,f[b],a);return this},d.prototype.unbind=function(a){for(var b=0;b<f.length;b++)e.unbind(this.el,f[b],a);return this},d.prototype.once=function(a){function b(){c.unbind(b),a.apply(c.el,arguments)}var c=this;return c.bind(b),this},b}),a.register("component~once@0.0.1",function(a,b){a=a||{};var c=0,d=function(){return this}();return b.exports=function(a){function b(){if(this==d){if(b.called)return;return b.called=!0,a.apply(this,arguments)}var c="__called_"+e+"__";if(!this[c])return this[c]=!0,a.apply(this,arguments)}var e=c++;return b},a}),a.register("yields~after-transition@0.0.1",function(b,c){function d(a,b){return h&&e(a)?(f(a).bind(b),b):b()}b=b||{};var e=a("yields~has-transitions@1.0.0"),f=a("ecarter~css-emitter@0.0.1"),g=a("component~once@0.0.1"),h=e();return c.exports=d,d.once=function(a,b){var c=g(b);d(a,b=function(){f(a).unbind(b),c()})},b}),a.register("component~emitter@1.2.0",function(a,b){function c(a){if(a)return d(a)}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}return a=a||{},b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length},a}),a.register("yields~css-ease@0.0.1",function(a,b){return a=a||{},b.exports={in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)","ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},a}),a.register("component~query@0.0.3",function(a,b){function c(a,b){return b.querySelector(a)}return a=a||{},a=b.exports=function(a,b){return b=b||document,c(a,b)},a.all=function(a,b){return b=b||document,b.querySelectorAll(a)},a.engine=function(b){if(!b.one)throw new Error(".one callback required");if(!b.all)throw new Error(".all callback required");return c=b.one,a.all=b.all,a},a}),a.register("move",function(b,c){function d(a){if(!(this instanceof d))return new d(a);if("string"==typeof a&&(a=f(a)),!a)throw new TypeError("Move must be initialized with element or selector");this.el=a,this._props={},this._rotate=0,this._transitionProps=[],this._transforms=[],this.duration(d.defaults.duration)}b=b||{};var e=a("component~emitter@1.2.0"),f=a("component~query@0.0.3"),g=a("yields~after-transition@0.0.1"),h=a("component~has-translate3d@0.0.3"),i=a("yields~css-ease@0.0.1"),j=h?["translate3d(",", 0)"]:["translate(",")"];c.exports=d;var k=window.getComputedStyle||window.currentStyle;return d.version="0.5.0",d.ease=i,d.defaults={duration:500},d.select=function(a){return"string"!=typeof a?a:f(a)},e(d.prototype),d.prototype.transform=function(a){return this._transforms.push(a),this},d.prototype.skew=function(a,b){return this.transform("skew("+a+"deg, "+(b||0)+"deg)")},d.prototype.skewX=function(a){return this.transform("skewX("+a+"deg)")},d.prototype.skewY=function(a){return this.transform("skewY("+a+"deg)")},d.prototype.translate=d.prototype.to=function(a,b){return this.transform(j.join(""+a+"px, "+(b||0)+"px"))},d.prototype.translateX=d.prototype.x=function(a){return this.transform("translateX("+a+"px)")},d.prototype.translateY=d.prototype.y=function(a){return this.transform("translateY("+a+"px)")},d.prototype.scale=function(a,b){return this.transform("scale("+a+", "+(b||a)+")")},d.prototype.scaleX=function(a){return this.transform("scaleX("+a+")")},d.prototype.matrix=function(a,b,c,d,e,f){return this.transform("matrix("+[a,b,c,d,e,f].join(",")+")")},d.prototype.scaleY=function(a){return this.transform("scaleY("+a+")")},d.prototype.rotate=function(a){return this.transform("rotate("+a+"deg)")},d.prototype.ease=function(a){return a=i[a]||a||"ease",this.setVendorProperty("transition-timing-function",a)},d.prototype.animate=function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setVendorProperty("animation-"+c,b[c]);return this.setVendorProperty("animation-name",a)},d.prototype.duration=function(a){return a=this._duration="string"==typeof a?1e3*parseFloat(a):a,this.setVendorProperty("transition-duration",a+"ms")},d.prototype.delay=function(a){return a="string"==typeof a?1e3*parseFloat(a):a,this.setVendorProperty("transition-delay",a+"ms")},d.prototype.setProperty=function(a,b){return this._props[a]=b,this},d.prototype.setVendorProperty=function(a,b){return this.setProperty("-webkit-"+a,b),this.setProperty("-moz-"+a,b),this.setProperty("-ms-"+a,b),this.setProperty("-o-"+a,b),this},d.prototype.set=function(a,b){return this.transition(a),this._props[a]=b,this},d.prototype.add=function(a,b){if(k){var c=this;return this.on("start",function(){var d=parseInt(c.current(a),10);c.set(a,d+b+"px")})}},d.prototype.sub=function(a,b){if(k){var c=this;return this.on("start",function(){var d=parseInt(c.current(a),10);c.set(a,d-b+"px")})}},d.prototype.current=function(a){return k(this.el).getPropertyValue(a)},d.prototype.transition=function(a){return this._transitionProps.indexOf(a)?(this._transitionProps.push(a),this):this},d.prototype.applyProperties=function(){for(var a in this._props)this.el.style.setProperty(a,this._props[a],"");return this},d.prototype.move=d.prototype.select=function(a){return this.el=d.select(a),this},d.prototype.then=function(a){if(a instanceof d)this.on("end",function(){a.end()});else{if("function"!=typeof a){var b=new d(this.el);return b._transforms=this._transforms.slice(0),this.then(b),b.parent=this,b}this.on("end",a)}return this},d.prototype.pop=function(){return this.parent},d.prototype.reset=function(){return this.el.style.webkitTransitionDuration=this.el.style.mozTransitionDuration=this.el.style.msTransitionDuration=this.el.style.oTransitionDuration="",this},d.prototype.end=function(a){var b=this;return this.emit("start"),this._transforms.length&&this.setVendorProperty("transform",this._transforms.join(" ")),this.setVendorProperty("transition-properties",this._transitionProps.join(", ")),this.applyProperties(),a&&this.then(a),g.once(this.el,function(){b.reset(),b.emit("end")}),this},b}),"object"==typeof exports?module.exports=a("move"):f=function(){return a("move")}()}(),g=function(a,b,c,d){var e=a._,f=function(a){var c={$readerObj:null,templHtml:"",$domObj:null,data:{chapterName:"",chapterContent:"",pagePerc:""},isMobile:!0,swipe:"X",basePoint:{X:0,Y:0},width:0,height:0};this.opts=b.extend(!0,{},c,a),this.opts.$animatePage=null,this.opts.$mainCont=null,this.opts.$animateCont=null,this._init()};return f.prototype._init=function(){console.log("[panelMain] --> _init"),this._renderLayout(),this._bindEvent()},f.prototype._renderLayout=function(){var a=this.opts,c=a.$readerObj.offset();a.basePoint.X=c.left,a.basePoint.Y=c.top;var d=e.template(a.templHtml),f=d(a.data);if(a.$readerObj.append(f),a.$domObj=a.$readerObj.find(".read-selector-main"),a.$mainCont=a.$domObj.find(".read-content"),a.width=c.width,a.height=c.height,a.$content=a.$domObj.find(".read-content"),a.$chapter=a.$domObj.find(".read-chapter-view"),a.$page=a.$domObj.find(".read-page"),a.$animatePage=a.$domObj.find(".read-content-animate"),a.$animateCont=a.$animatePage.find(".read-animate-content"),a.$Achapter=a.$domObj.find(".read-content-animate .read-chapter-view"),a.$Acontent=a.$domObj.find(".read-animate-content"),a.$Apage=a.$domObj.find(".read-content-animate .read-page"),a.$real=a.$domObj.find(".read-real-animate"),a.$realChapter=a.$real.find(".read-chapter-view"),a.$realContent=a.$real.find(".read-animate-content"),a.$realPage=a.$real.find(".read-page"),a.useKEnhanced){var g='<div class="read-glossary-panel"><div class="read-glossary-cover"></div><div class="read-glossary-main read-glossary-f"><div class="read-glossary-content"></div><div class="read-glossary-icon"></div></div><div class="read-big-enhanced"><div class="read-enhanced-header"></div><div class="read-enhanced-body"></div></div></div>';a.$glossaryObj=b(g),a.$domObj.append(a.$glossaryObj)}if(a.useKnowledge){var h='<div class="read-kMenu-panel"><div class="read-kMenu-cover"></div><div class="read-knowledge-menu"><div class="read-ledge read-ledge-back"></div><div class="read-ledge read-ledge-exit"></div><div class="read-ledge read-ledge-prev"></div><div class="read-ledge read-ledge-next"></div><div class="read-ledge-count"></div></div>';a.$kMenuObj=b(h),a.$domObj.append(a.$kMenuObj)}},f.prototype._bindEvent=function(){var a=this.opts,c=a.basePoint,e=a.width,f=(a.height,this);a.isLeft=!0,a.isMove=!1,a.$domObj.on("touchstart",function(b){var c=b.touches[0];a.flag=null,a.movement=0,a.pageX=c.pageX,a.pageY=c.pageY,a.isMove=!0}),a.$domObj.on("touchmove",function(b){"page_2"!=a.$readerObj.attr("data-pageway")&&f.touchmove(b)}),a.$domObj.on("touchend",function(a){f.touchend(a)});var g=a.isMobile?"tap":"click";a.$domObj.on(g,function(d){var g=b(this).attr("data-animate");if("1"==g)return void console.info("%c [panelMain.js] -> 动画中!","background:yellow;");var h=d.target;if("IMG"==h.nodeName&&h.getAttribute("data-index")&&1!=h.getAttribute("data-cover"))return console.info("[panelMain.js]-> 点击了图片!"),console.info("data-index:"+h.getAttribute("data-index")),void a.$domObj.trigger("mainpanel:img",{currentIdx:h.getAttribute("data-index")});if("VIDEO"==h.nodeName){console.info("[panelMain.js]-> 点击了视频!");var i=h.getAttribute("src")||h.querySelector("source").getAttribute("src"),j=h.getAttribute("data-name")||i.split("/").pop();return void a.$domObj.trigger("mainpanel:video",{src:i,name:j})}if(b(h).hasClass("read-footnote-mark"))return void f._showFootnote(b(h));if(a.useKEnhanced){if(b(h).parents().hasClass("read-Knowledge-enhanced"))return void f._showGlossary(b(h).parents(".read-Knowledge-enhanced"));if(b(h).hasClass("read-glossary-cover"))return void a.$glossaryObj.fadeOut(10);if(b(h).parents().hasClass("read-glossary-main"))return;if(b(h).parents().hasClass("read-big-enhanced")||b(h).hasClass("read-big-enhanced"))return}if(a.useKnowledge){if(b(h).hasClass("read-kMenu-cover"))return void f._closeKnowledge();if(b(h).parents().hasClass("read-kMenu-panel"))return}console.log("MainPanel -> x: "+d.clientX+" , y:"+d.clientY+", type:"+d.type);var k=d.clientX-c.X,l=(d.clientY-c.Y,Math.floor(k/e*100));70<l&&l<=100?a.$domObj.trigger("mainpanel:right"):30<l&&l<=70?a.$domObj.trigger("mainpanel:middle"):0<l&&l<=30?a.$domObj.trigger("mainpanel:left"):console.warn("[panelMain] -> eventPos:"+l)}),a.$domObj.on("swipeDown",function(b,c,d){if(!a.useSettingBookmark){console.info("下滑 --> 添加/删除 书签!!");var e=a.$domObj.find(".read-view-page .read-bookmark-view").attr("data-bookmarkid");a.$domObj.trigger("mainpanel:swipeDown",e)}}),touchCount=0,a.$domObj.on("touchstart",".read-glossary-main",function(b){if(touchCount+=1,2==touchCount){console.log("[panelMainPc]--> 打开增强释义面板"),touchCount=0;var c=a.$domObj.find(".read-big-enhanced");setTimeout(function(){d(c[0]).set("top","0").duration("0.3s").end()},10),c.find(".read-enhanced-header").text(a.glossaryDetail.name),c.find(".read-enhanced-body").html(a.glossaryDetail.content)}setTimeout(function(){touchCount=0},350)}),a.$domObj.on("touchmove",".read-glossary-main",function(a){a.stopPropagation()}),a.$domObj.on("touchmove",".read-glossary-cover",function(b){a.$glossaryObj.fadeOut(10)}),a.$domObj.on(g,".read-big-enhanced",function(b){setTimeout(function(){d(a.$domObj.find(".read-big-enhanced")[0]).set("top","-101%").duration("0.3s").end()},10)}),a.$domObj.on(g,".read-ledge-back",function(b){console.log("[panelMainPc]--> 点击知识型菜单回到知识列表按钮"),a.$domObj.trigger("knowledge:open")}),a.$domObj.on(g,".read-ledge-exit",function(a){console.log("[panelMainPc]--> 退出知识型阅读模式"),f._closeKnowledge(),a.stopPropagation()}),a.$domObj.on(g,".read-ledge-prev",function(b){console.log("[panelMainPc]--> 本知识点的上一个锚点位置");var c=a.knowledgeData,d=c.index-1;if(d>0){c.index=d,c.pageCount=0;var e=c.point_list[d-1].chapter_id;a.$domObj.trigger("knowledge:showKMenu",{chapter_id:e,direction:"prev"})}b.stopPropagation()}),a.$domObj.on(g,".read-ledge-next",function(b){console.log("[panelMainPc]--> 本知识点的下一个锚点位置");var c=a.knowledgeData,d=c.index+1,e=c.point_list.length;if(d<e+1){c.index=d,c.pageCount=0;var f=c.point_list[d-1].chapter_id;a.$domObj.trigger("knowledge:showKMenu",{chapter_id:f,direction:"next"})}b.stopPropagation()})},f.prototype._showGlossary=function(a){var c=this.opts,d=c.$glossaryObj.find(".read-glossary-main"),e=c.$glossaryObj.find(".read-glossary-content"),f=c.$glossaryObj.find(".read-glossary-icon"),g=a.attr("term"),h=g.indexOf("base64:")!=-1?b.base64.atob(g.slice(7,-1)):g;c.glossaryDetail={name:a.text(),content:h};var i=b("<div>");i.html(h),e.html(""),e.append(i);var j=a.children().length,k=a.children().eq(parseInt(j/2)),l=k.offset().top,m=k.offset().left+k.width()/2,n=0,o=0,p=c.$mainCont,q=p.offset().top,r=p.offset().left;d.css("width",c.$content.width()/2),c.$glossaryObj.fadeIn(0);var s=e.height()+f.height();d.height(s),l-q<p.height()/3?(o=l+k.height(),d.removeClass("read-glossary-f").addClass("read-glossary-h")):(o=l-s,d.removeClass("read-glossary-h").addClass("read-glossary-f"));var t=r+p.width()-m,u=m-r,v=d.width()/2;n=t<v?t+m-2*v:u<v?r:m-v;var w=m-n-f.width()/2;f.css("left",w),d.css({left:n,top:o})},f.prototype.showKnowledge=function(a){var b=this.opts;if(null!=a)b.knowledgeData=a;else{var c=b.knowledgeData;if(c){b.$mainCont.find(".read-knowledge-bg").removeClass("read-knowledge-bg");var d=c.point_list[c.index-1].pid,e='span[type="knowledge"][data-pid="'+d+'"]',f=b.$mainCont.find(e),g=!0;if(0==f.length)return void b.$kMenuObj.fadeOut(10);f.length>1&&(f=f.eq(1),g=!1),b.$kMenuObj.fadeIn(10);var h=c.index+"/"+c.point_list.length;b.$kMenuObj.find(".read-ledge-count").text(h);var i=b.$kMenuObj.find(".read-knowledge-menu"),j=f.offset().top-i.height(),k=i.width();f.addClass("read-knowledge-bg");for(var l=parseInt(f.attr("data-len")),m=parseInt(f.find(".read-filterSpan").attr("data-id")),n=1;n<l;n++)m+=1,b.$mainCont.find('span[data-id="'+m+'"]').addClass("read-knowledge-bg");k=b.$content.find(e).length&&g?b.$content.offset().left+b.$content.width()/2-k/2:b.$content2.offset().left+b.$content2.width()/2-k/2,i.css({top:j,left:k})}}},f.prototype._closeKnowledge=function(){var a=this.opts;a.knowledgeData=null,a.$kMenuObj.fadeOut(10),a.$mainCont.find(".read-knowledge-bg").removeClass("read-knowledge-bg"),a.$domObj.trigger("knowledge:closeKnowledge")},f.prototype._showFootnote=function(a){var d=this.opts,e=d.$readerObj,f="";f="["+a.attr("data-count")+"]",f+=c.trim(a.parent().find("footnote").text()),c.LOG.info("[readerPc.js] --> setFootNote:"+f);var g="<div class='read-footnote-mask'><div class='read-footnote-exitdiv'><div class='read-footnote-exit'></div></div><div class='read-footnote-div'><p class='read-footnote-txt'>"+f+"</p></div></div>",h=b(g);e.append(h);var i=e.height(),j=e.width(),k=.4*i>500?500:i/3,l=.4*j<500?j-20:j/3;h.find(".read-footnote-exitdiv").css({width:l+"px",left:(j-l)/2+"px",top:(i-k)/2-10+"px"}),h.find(".read-footnote-div").css({width:l+"px",height:k+"px",left:(j-l)/2+"px",top:(i-k+20)/2+"px","font-size":"0.3em"}),h.on("tap",function(a){var b=a.target.className;"read-footnote-mask"!=b&&"read-footnote-exit"!=b||h.remove()})},f.prototype.showPagedata=function(a,b){var c=this,d=c.opts;d.data=a,"page_1"==b&&1!=a.turnMode?c._getTileData():"page_2"==b?c.firstPage():c.firstPage()},f.prototype._getTileData=function(){var a=this,b=a.opts,c=b.data.direction;"next"==c?(b.$animatePage.eq(1).find(".read-chapter-view").html(b.data.chapterName),b.$animatePage.eq(1).find(".read-animate-content").html(b.data.chapterContent),b.$animatePage.eq(1).find(".read-page").html(b.data.currPage)):"prev"==c&&(b.$animatePage.eq(0).find(".read-chapter-view").html(b.data.chapterName),b.$animatePage.eq(0).find(".read-animate-content").html(b.data.chapterContent),b.$animatePage.eq(0).find(".read-page").html(b.data.currPage)),"swipe"!=b.operation&&this._tilePage(c)},f.prototype._tilePage=function(a){var b=this,c=b.opts;c.$domObj.find(".read-header .read-bookmark-view").removeClass("read-active"),c.$domObj.attr("data-animate","1"),"prev"==a?(c.$animatePage.eq(0).removeClass("read-hide"),setTimeout(function(){d(c.$animatePage[0]).translate(c.width,0).duration("0.3s").ease("out").end()},10)):(c.$animatePage.eq(1).removeClass("read-hide"),setTimeout(function(){d(c.$animatePage[1]).translate(-c.width,0).duration("0.3s").ease("out").end()},10)),setTimeout(function(){c.$chapter.html(c.data.chapterName),c.$content.html(c.data.chapterContent),c.$page.html(c.data.currPage),b._setPageShow(),c.$domObj.find(".read-content-animate").css({transform:"none","-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none"}).addClass("read-hide"),c.$animatePage.eq(1).find(".read-chapter-view").html(""),c.$animatePage.eq(1).find(".read-animate-content").html(""),c.$animatePage.eq(1).find(".read-page").html(""),c.$animatePage.eq(0).find(".read-chapter-view").html(""),c.$animatePage.eq(0).find(".read-animate-content").html(""),c.$animatePage.eq(0).find(".read-page").html(""),c.$domObj.attr("data-animate","0"),c.$domObj.trigger("mainpanel:showBookmark",c.data)},300)},f.prototype.realPage=function(){var a=this,b=a.opts,c=b.data.direction;b.$domObj.attr("data-animate","1"),b.$domObj.find(".read-header .read-bookmark-view").removeClass("read-active"),b.$real.show(),setTimeout(function(){b.$real.addClass("read-real-turn-"+c)},10),b.$realChapter.html(b.$chapter.html()),b.$realContent.html(b.$content.html()),b.$chapter.html(b.data.chapterName),b.$content.html(b.data.chapterContent),setTimeout(function(){b.$real.removeClass("read-real-turn-"+c),b.$real.hide(),b.$domObj.attr("data-animate","0"),b.$domObj.trigger("mainpanel:showBookmark",b.data)},500),b.$page.html(b.data.currPage),this._setPageShow()},f.prototype.firstPage=function(){var a=this,b=a.opts;b.data.direction;b.$domObj.trigger("mainpanel:showBookmark",b.data),b.$chapter.html(b.data.chapterName),b.$content.html(b.data.chapterContent),b.$page.html(b.data.currPage),this._setPageShow()},f.prototype._setPageShow=function(){var a=this.opts;"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),this._setImgSrc(),this._setVideoSrc(),this._setTableStyle(),this._bindTableEvent(),this.highLight(),a.$domObj.trigger("mainpanel:showNote"),a.useKEnhanced&&a.$readerObj.find(".read-extend-btns .read-kEnhanced").hasClass("read-active")&&a.$mainCont.find("span[type='term']").addClass("read-Knowledge-enhanced"),a.useKnowledge&&this.showKnowledge()},f.prototype.highLight=function(){var a=this.opts,c=a.$readerObj.attr("data-searchKword");if(c){var d=/(([\w_\.%]+)|([^\2]))/gi,e=[];c.replace(d,function(a){e.push(a)});for(var f=b("span[data-id]"),g="",h=0;h<f.length;h++)if(g="",b(f[h]).text()==e[0]){for(var i=0;i<e.length;i++)g+=b(f[h+i]).text();if(g.indexOf(c)!=-1)for(var j=0;j<i;j++)b(f[h+j]).addClass("read-highlight"),console.log("高亮显示搜索结果！")}a.$readerObj.attr("data-searchKword","")}},f.prototype._setImgSrc=function(){var a=this.opts;a.$mainCont.find("img[data-src]").each(function(){var a=b(this).attr("data-src");b(this).attr("src",a),b(this).removeAttr("data-src")}),a.$mainCont.find("img[data-old-src]").on("error",function(){var a=b(this).attr("data-old-src");b(this).attr("src",a),b(this).removeAttr("data-old-src")})},f.prototype._setVideoSrc=function(){var a=this.opts;a.$mainCont.find("source[data-src]").each(function(){var a=b(this).attr("data-src");b(this).attr("src",a),b(this).removeAttr("data-src")})},f.prototype._setTableStyle=function(){var a=this.opts,c=a.$mainCont.width(),d=0;a.$mainCont.find("table").each(function(){return"1"==b(this).attr("zoom")||void(b(this).width()>c&&(d=b(this).parent().height(),b(this).parent().addClass("read-tbl-big-data"),d=2*d-b(this).parent().height(),b(this).attr("zoom","1"),b(this).attr("data-resth",d)))}),a.$mainCont.find('table[zoom="1"]').each(function(){var a=b(this).attr("data-resth"),c=b('<div class="read-tbl-wrap" style="height: '+a+'px">');b(this).parent().append(c);var d=b('<div class="read-open-pop">');b(this).parent().append(d),c.append(b(this))})},f.prototype._bindTableEvent=function(){var a=this,c=this.opts,d=c.basePoint,e=c.width,f=c.$mainCont.find('table[zoom="1"]'),g=c.isMobile?"tap":"click";f.on(g,function(c){var f=c.clientX-d.X,g=Math.floor(f/e*100);if(30<g&&g<=70){var h=b(this).clone(!0);a._expandTable(h),c.stopPropagation()}})},f.prototype._expandTable=function(a){var c=this.opts,d=c.isMobile?"tap":"click",e=b('<div class="read-comm-panel read-comm-table">'),f=b('<div class="read-comm-tbl-wrap">'),g=b('<div class="read-close-btn">');e.append(g),e.append(f),f.append(a),c.$readerObj.append(e),e.on(d+" swipeDown",function(a){return!1}),g.on(d,function(a){e.remove(),a.stopPropagation()})},f.prototype.setFontSize=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-size-"+a.oldValue,c.newValue="read-size-"+a.newValue,b.$domObj.find(".read-content").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-delicate").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-animate-content").removeClass(c.oldValue).addClass(c.newValue)},f.prototype.setFontFamily=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-font-family-"+a.oldValue,c.newValue="read-font-family-"+a.newValue,b.$domObj.find(".read-content").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-delicate").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-animate-content").removeClass(c.oldValue).addClass(c.newValue)},f.prototype.setBgColor=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-bg-"+a.oldValue,c.newValue="read-bg-"+a.newValue,b.$readerObj.removeClass("read-night"),b.$domObj.removeClass(c.oldValue),b.$domObj.addClass(c.newValue)},f.prototype.open=function(){console.log("[panelMain] --> open");var a=this.opts;a.$domObj.fadeIn(300)},f.prototype.close=function(){var a=this.opts;a.$domObj.fadeOut(100)},f.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},f.prototype.touchmove=function(a){var b=this.opts,c=a.touches[0],d=c.pageX-b.pageX,e=c.pageY-b.pageY;b.operation="swipe",b.flag||(b.flag=Math.abs(d)>Math.abs(e)?"X":"Y"),b.flag===b.swipe&&(a.preventDefault(),a.stopPropagation(),b.movement=d,b.isMove&&(b.isLeft=!(d<0),d<0?(b.isLeft=!1,b.$domObj.trigger("mainpanel:right")):(b.isLeft=!0,b.$domObj.trigger("mainpanel:left")),b.isMove=!1),b.isLeft?b.isLeft&&(b.$animatePage.eq(0).removeClass("read-hide"),b.$animatePage[0].style.webkitTransform="translate3d("+d+"px,0,0)"):(b.$animatePage.eq(1).removeClass("read-hide"),b.$animatePage[1].style.webkitTransform="translate3d("+d+"px,0,0)"))},f.prototype.touchend=function(a){var b=this,c=this.opts,d=50,e=c.movement;if(c.operation="tap",c.flag)if(a.preventDefault(),Math.abs(e)>Math.abs(d)){var f=c.isLeft?"prev":"next";b._tilePage(f)}else c.$animatePage[1].style.webkitTransform="translate3d(0px,0,0)",c.$animatePage[0].style.webkitTransform="translate3d(0px,0,0)",c.$animatePage.addClass("read-hide")},f}(b,a,c,f),h=function(a,b){var c=a._,d=function(a){console.log("[RadioGroup] -> 构造函数!");var d='<% if(list.length > 0) {%><ul class="read-reader-radio-group <%= type%>"><% _.each(list, function(radio) {   %><li class=\'read-item <% if(!!radio.bg) {  %> <%= radio.bg %> <% } %> \' data-active="<%= !!radio.active ? radio.active : \'true\' %>" data-val="<%= radio.value %>" style="<%= itemStyle%>"> <%= radio.text%> </li><% }); %> </ul> <% } %>',e={domSelector:"",$domObj:null,groupCssName:"read-reader-radio-group",itemCssName:"read-item",selectedCssName:"read-selected",type:"round",data:[],value:"",oldValue:"",newText:"",isMobile:!0,templ:c.template(d)};this.opts=b.extend(!0,{},e,a),this._init()};return d.prototype._init=function(){var a=this.opts;return a.oldValue=a.value,null==a.$domObj&&(a.$domObj=b(a.domSelector)),!!this._check()&&(this._setLayout(),this._bindEvent(),void a.$domObj.find("[data-val='"+a.value+"'  ]").addClass(a.selectedCssName))},d.prototype._check=function(){var a=this.opts,c=!0;return 0===a.$domObj.length&&(console.warn("[RadioGroup]: 请传入合法 dom 选择器!"),c=!1),b.isArray(a.data)&&a.data.length<2&&(console.warn("[RadioGroup]: 请传入至少两个单选按钮数据!"),c=!1),c},d.prototype._setLayout=function(){var a=this.opts,b={width:a.$domObj.width()||0,height:a.$domObj.height()||0},c={width:Math.floor((b.width-.1*b.width)/a.data.length)||0,height:b.height||0},d="";"round"==a.type&&(c.width=c.height),d="line-height:"+c.height+"px; width:"+c.width+"px; border-radius:"+Math.ceil(c.height/2)+"px";var e={type:a.type,itemStyle:d,list:a.data},f=a.templ(e);a.$domObj.html(f)},d.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap":"click";c.$domObj.on(d,".read-item,.read-pc-item",function(a){return 0!=b(this).data("active")&&(b(this).addClass(c.selectedCssName).siblings().removeClass(c.selectedCssName),c.oldValue=c.value,c.value=b(this).data("val"),c.newText=b(this).text(),console.log("[执行切换]"+c.value),void b(this).trigger("change:click",{oldValue:c.oldValue,newValue:c.value,newText:c.newText}))})},d.prototype.setValue=function(a,b){var c=this.opts;c.$domObj.find('[data-val="'+a+'"]').text(b)},d.prototype.getValue=function(){return this.opts.value},d.prototype.getDomObj=function(){return this.opts.$domObj},d.prototype.reSize=function(){console.log(" %c [RadioGroup] -> reSize!","background: skyblue");var a=this.opts,c={width:a.$domObj.width()||0,height:a.$domObj.height()||0},d={width:Math.floor((c.width-.1*c.width)/a.data.length)||0,height:c.height||0},e="";"round"==a.type&&(d.width=d.height),e="line-height:"+d.height+"px; width:"+d.width+"px; border-radius:"+Math.ceil(d.height/2)+"px",a.$domObj.find("li").each(function(a,c){b(this).attr("style",e)})},d.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},d}(b,a),i=function(a,b,c){var d=a._,e=function(a){console.log("[Switches] -> 构造函数!");var c='<div class="read-reader-switch" style=<%= switchesStyle %>><div class="read-switch-cursor" style=<%= btnStyle %>></div><div class="read-switch-label read-switch-label-on" style="<%= fontStyle %> <%= onStyle %>"></div><div class="read-switch-label read-switch-label-off" style="<%= fontStyle %> <%= offStyle %>"></div></div>',e={domSelector:"",$domObj:null,data:[!0,!1],switchesStyle:"",bgCssName:"",btnStyle:"",fontStyle:"",onStyle:"",offStyle:"",value:!1,isMobile:!0,templ:d.template(c)};this.opts=b.extend(!0,{},e,a),this._init()};return e.prototype._init=function(){var a=this.opts;return a.$domObj=b(a.domSelector),!!this._check()&&(this._setLayout(),void this._bindEvent())},e.prototype._check=function(){
var a=this.opts,b=!0;return 0===a.$domObj.length&&(console.warn("[Switches]: 请传入合法 dom 选择器!"),b=!1),2!=a.data.length&&(console.warn("[Switches]: 只能传入两个数据!"),b=!1),b},e.prototype._setLayout=function(){var a=this.opts;a.$domObj=b(a.domSelector);var c={width:a.$domObj.width()||0,height:a.$domObj.height()||0},d="width:"+c.width+"px;height:"+c.height+"px;border-radius:"+c.height+"px;",e=Math.floor(c.height/10),f={height:c.height-2*e-2};a.topH=e,a.btnWH=f,a.divWH=c,a.rightValue=a.divWH.width-a.btnWH.height-a.topH-2;var g="",h="left:"+(f.height/2+e)+"px",i="right:"+(f.height/2-f.height/4+e)+"px;width:"+f.height/2+"px;height:"+f.height/2+"px;",j="width:"+f.height+"px;height:"+f.height+"px;border-radius:50%;top:"+e+"px;";a.value?(d+="background:#1b88ee;",j+="left:"+a.rightValue+"px"):j+="left:"+e+"px";var k={state:a.state,switchesStyle:d,btnStyle:j,fontStyle:g,onStyle:h,offStyle:i},l=a.templ(k);a.$domObj.html(l)},e.prototype.reSize=function(){console.log(" %c [Switches] -> reSize!","background: skyblue");var a=this.opts,b={width:a.$domObj.width()||0,height:a.$domObj.height()||0},c="width:"+b.width+"px;height:"+b.height+"px;border-radius:"+b.height+"px;",d=Math.floor(b.height/10),e={height:b.height-2*d-2};a.topH=d,a.btnWH=e,a.divWH=b,a.rightValue=a.divWH.width-a.btnWH.height-a.topH-2;var f="left:"+(e.height/2+d)+"px",g="right:"+(e.height/2-e.height/4+d)+"px;width:"+e.height/2+"px;height:"+e.height/2+"px;",h="width:"+e.height+"px;height:"+e.height+"px;border-radius:50%;top:"+d+"px;";a.value?(c+="background:#1b88ee;",h+="left:"+a.rightValue+"px"):h+="left:"+d+"px",a.$domObj.find(".read-reader-switch").attr("style",c),a.$domObj.find(".read-switch-cursor").attr("style",h),a.$domObj.find(".read-switch-label-on").attr("style",f),a.$domObj.find(".read-switch-label-off").attr("style",g)},e.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.isMobile?"tap":"click";b.$domObj.on(c,".read-reader-switch",function(b){a.changeState()})},e.prototype.getValue=function(){return this.opts.value},e.prototype.getDomObj=function(){return this.opts.$domObj},e.prototype.changeState=function(){var a=this,b=a.opts;b.value?(c(b.$domObj.find(".read-reader-switch")[0]).set("background","").duration("0.15s").end(),c(b.$domObj.find(".read-switch-cursor")[0]).set("left",b.topH+"px").duration("0.15s").end()):(c(b.$domObj.find(".read-reader-switch")[0]).set("background","#1b88ee").duration("0.15s").end(),c(b.$domObj.find(".read-switch-cursor")[0]).set("left",b.rightValue+"px").duration("0.15s").end()),b.value=!b.value,console.log("[执行切换]"+b.value),b.$domObj.trigger("change:click",b.value)},e.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},e}(b,a,f),j=function(a,b){var c=a._,d=function(a){console.log("[Drag] -> 构造函数!");var d='<div class="read-drag-bar" style="<%= dragStyle %>"><div class="read-drag-percent" style="<%= percentStyle %>"><div class="read-drag-btn" style="<%= btnStyle %>"><span class="read-font read-hide">0%</span></div></div></div>',e={domSelector:"",$domObj:null,dragColor:"",percentColor:"",btnColor:"",btnBorderColor:"",state:!1,value:0,isMobile:!0,templ:c.template(d),initX:0};this.opts=b.extend(!0,{},e,a),this._init()};return d.prototype._init=function(){var a=this.opts;return a.$domObj=b(a.domSelector),!!this._check()&&(this._setLayout(),void this._bindEvent())},d.prototype._check=function(){var a=this.opts,b=!0;return 0===a.$domObj.length&&(console.warn("[Drag]: 请传入合法 dom 选择器!"),b=!1),b},d.prototype._setLayout=function(){var a=this.opts;a.$domObj=b(a.domSelector);var c={width:a.$domObj.width()||0,height:a.$domObj.height()||0},d=c.height,e=d;"PC"==a.clientType&&(d=8,e=30);var f=(c.width-e)*parseInt(a.value);a.canDragWidth=a.$domObj.width()-e;var g="background-color:"+a.dragColor+";",h="width:"+f+"px;background-color:"+a.percentColor+";",i="width:"+e+"px;height:"+d+"px;background-color:"+a.btnColor+";border-color:"+a.btnBorderColor+";left:"+f+"px;",j={dragStyle:g,percentStyle:h,btnStyle:i},k=a.templ(j);a.$domObj.html(k)},d.prototype.reSize=function(){this._setLayout()},d.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"touchstart":"mousedown";c.$domObj.on("mouseup tap",function(d){if(!c.state){d.stopPropagation();var e=d.clientX-b(this)[0].getBoundingClientRect().left,f=e/c.canDragWidth;c.value=f>1?1:f,a.setValue(c.value),c.$domObj.trigger("dragEnd",c.value)}}),c.$domObj.on(d,".read-drag-btn",function(a){function e(){c.state&&b(g).trigger("dragEnd",c.value),c.state=!1}function f(a){if(c.state){var d=a.clientX||a.touches[0].clientX,e=d-c.initX;if(e+c.width<=c.canDragWidth&&e+c.width>=0?(b(g).parent().width(c.width+e),b(g).css("left",parseInt(c.left)+e)):e+c.width>c.canDragWidth?(b(g).parent().width(c.canDragWidth),b(g).css("left",c.canDragWidth)):e+c.width<0&&(b(g).parent().width(0),b(g).css("left",0)),c.value=(b(g).parent().width()/c.canDragWidth).toFixed(4),b(g).trigger("dragMove",c.value),"PC"==c.clientType){var f=Math.floor(100*parseFloat(c.value))+"%";c.$domObj.find(".read-drag-btn .read-font").text(f)}}}a.stopPropagation();var g=this;c.state=!0,c.initX=a.clientX||a.touches[0].clientX,c.left=b(g).css("left"),c.width=b(g).parent().width(),"touchstart"==d?(document.ontouchend=function(){e()},document.ontouchmove=function(a){f(a)}):(document.onmouseup=function(){e()},document.onmousemove=function(a){f(a)})})},d.prototype.getValue=function(){return this.opts.value},d.prototype.setValue=function(a){var b=this,c=b.opts;if(c.value=parseFloat(a),a&&a>=0){a=a>=1?1:a;var d=c.canDragWidth*a;c.$domObj.find(".read-drag-percent").width(d),c.$domObj.find(".read-drag-btn").css("left",d);var e=Math.floor(100*parseFloat(c.value))+"%";c.$domObj.find(".read-drag-btn .read-font").text(e)}c.useTV&&c.$domObj.trigger("dragEnd",c.value)},d.prototype.setColor=function(a){var b=this.opts;b.$domObj.find(".read-drag-percent").css("background",a)},d.prototype.getDomObj=function(){return this.opts.$domObj},d.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},d.prototype.disabled=function(){var a=this.opts;a.$domObj.find(".read-drag-percent").addClass("read-disabled")},d.prototype.enable=function(){var a=this.opts;a.$domObj.find(".read-drag-percent").removeClass("read-disabled")},d}(b,a),k=function(a,b,c,d,e,f){var g=a._,h=function(a){var b={wrapDomId:"",$readerObj:null,templHtml:"",fontlightHtml:"",progressHtml:"",$domObj:null,$headerObj:null,$footerObj:null,$bodyObj:null,$fontlight:null,$progress:null,isMobile:!0,isNightMode:null,settingData:null,progressData:null,settingPage:2};this.opts=e.extend(!0,{},b,a),this._init()};return h.prototype._init=function(){console.log("[SettingPanel] --> _init"),this._renderLayout(),this._bindEvent()},h.prototype._renderLayout=function(){var a=this.opts,b=g.template(a.templHtml),c=b();a.$domObj=e(c),a.$readerObj.append(a.$domObj),a.$headerObj=a.$domObj.find(".read-header"),a.$footerObj=a.$domObj.find(".read-footer");var d=a.$headerObj.css("top"),f=a.$footerObj.css("bottom");a.$headerObj.attr("data-top",d),a.$footerObj.attr("data-bottom",f),this._renderProgress(),this._renderFontlight()},h.prototype._renderProgress=function(){var a=this.opts,b=g.template(a.progressHtml),c=b();a.$footerObj.append(c),a.$progress=a.$footerObj.find(".read-schedule-set-panel"),console.info("%c 阅读进度!!:"+a.progressData,"background:yellow;");var e=a.$progress.find(".read-progress-bar");this.$progressObj=new d({domSelector:e,value:a.progressData||0,isMobile:a.isMobile}),a.$progress.on("dragEnd",function(b,c){a.$domObj.trigger("progress:click",c)})},h.prototype._renderFontlight=function(){function a(){f.useKEnhanced||f.$domObj.find(".read-header .read-kEnhanced").css("display","none"),f.useKnowledge||f.$domObj.find(".read-header .read-knowledge").css("display","none"),f.useComplaint||f.$domObj.find(".read-header .read-copyright").css("display","none"),f.useSearch||f.$domObj.find(".read-header .read-search").css("display","none"),f.useExit||f.$domObj.find(".read-exit-reader").hide(),f.useFonts||(n.parents(".read-setting-bar").hide(),p.parents(".read-setting-bar").hide()),f.useBgColor||q.parents(".read-setting-bar").hide(),f.useLight||(l.parents(".read-setting-bar").hide(),m.parents(".read-setting-bar").hide(),f.$domObj.find(".read-footer .read-speed-night").hide()),f.usePageWay||o.parents(".read-setting-bar").hide(),f.useSettingBookmark||f.$domObj.find(".read-header .read-bookmark").css("display","none");var a=[],b=[],c=0;f.$fontlight.find(".read-setting-bar").each(function(){"none"!=e(this).css("display")?a.push(e(this)):b.push(e(this))}),c=a.length;for(var d=0,g=b.length;d<g;d++)a.push(b[d]);for(var d=a.length-1;d>=0;d--)d<3?f.$fontlight.find(".read-set-page1").prepend(a[d]):f.$fontlight.find(".read-set-page2").prepend(a[d]);0==c?f.$footerObj.find(".read-font-btn").hide():c<4&&(f.settingPage=1,f.$fontlight.find(".read-set-page2").hide(),f.$fontlight.find(".read-set-page1 .read-turn-page-icon").hide())}var f=this.opts,h=f.settingData,i=g.template(f.fontlightHtml),j=i();f.$footerObj.append(j),f.$fontlight=f.$footerObj.find(".read-font-set-panel");var k=f.$fontlight.find(".read-light-bar");this.$systemLightbarObj=new d({domSelector:k,value:h.brightness,isMobile:f.isMobile});var l=f.$fontlight.find(".read-system-light");this.$systemLightObj=new c({domSelector:l,value:h.useSysBrightness,isMobile:f.isMobile});var m=f.$fontlight.find(".read-screen-always-bright .read-turn-off-on");this.$screenLightObj=new c({domSelector:m,value:h.screenLongActive,isMobile:f.isMobile});var n=f.$fontlight.find(".read-font-size");this.$fontSizeObj=new b({$domObj:n,data:h.fontSize.list,value:h.fontSize.value,isMobile:f.isMobile});var o=f.$fontlight.find(".read-turn-page");this.$pagingObj=new b({type:"oval",$domObj:o,data:[{text:"平铺翻页",value:"page_1"},{text:"无",value:"page_2"}],value:"page_1",isMobile:f.isMobile});var p=f.$fontlight.find(".read-font-family-view");this.$fontFamilyObj=new b({type:"oval",$domObj:p,data:h.fontFamily.list,value:h.fontFamily.value});var q=f.$fontlight.find(".read-bg-color");this.$bgColorObj=new b({type:"round",$domObj:q,data:h.bgColor.list,value:h.bgColor.value}),a()},h.prototype._bindEvent=function(){function a(a){f(b.$fontlight[0]).set("left",a).duration("0.5s").end()}var b=this.opts,c=this,d=b.isMobile?"tap":"click";b.$domObj.find(".read-body").on(d,function(){c.close()}),b.$domObj.find(".read-exit-reader").on(d,function(){c.close(),b.$domObj.trigger("out:click")}),b.$footerObj.find(".read-cbn-btn").on(d,function(){b.$domObj.trigger("cbn:click"),c.close()}),b.$headerObj.find(".read-bookmark").on(d,function(){var a=e(this).attr("data-bookmarkid");b.$domObj.trigger("bookmark:setting",a)}),b.$headerObj.find(".read-copyright").on(d,function(){b.$domObj.trigger("complaint:click"),c.close()}),b.$headerObj.find(".read-search").on(d,function(){b.$domObj.trigger("search:click"),c.close()}),b.$headerObj.find(".read-kEnhanced").on(d,function(){e(this).toggleClass("read-active"),b.$readerObj.find(".read-selector-main span[type='term']").toggleClass("read-Knowledge-enhanced")}),b.$headerObj.find(".read-knowledge").on(d,function(){b.$domObj.trigger("knowledge:click"),c.close()}),b.$footerObj.find(".read-prev").on(d,function(){b.$domObj.trigger("progress:prev")}),b.$footerObj.find(".read-next").on(d,function(){b.$domObj.trigger("progress:next")}),b.$footerObj.find(".read-progress-btn").on(d,function(){e(this).addClass("read-active").siblings().removeClass("read-active"),c._hideChildPanel(b.$fontlight),c._showChildPanel(b.$progress),b.$domObj.trigger("progress:setVal")}),b.$footerObj.find(".read-font-btn").on(d,function(){e(this).addClass("read-active").siblings().removeClass("read-active"),c._hideChildPanel(b.$progress),c._showChildPanel(b.$fontlight)}),this.$systemLightbarObj.on("dragMove",function(a,b){console.info("[panelSetting.js] -> dragMove:"+b),c._setScreenBrightness(parseFloat(b)),c.$systemLightbarObj.enable()}),this.$systemLightbarObj.on("dragEnd",function(a,b){console.info("[panelSetting.js] -> dragEnd:"+b),c.$systemLightObj.getValue()&&c.$systemLightObj.changeState()}),this.$systemLightObj.on("change:click",function(a,b){b?(c.$systemLightbarObj.disabled(),c._useSysBrightness()):(c.$systemLightbarObj.enable(),c._setScreenBrightness(c.$systemLightbarObj.getValue()))}),this.$pagingObj.on("change:click",function(a,c){console.log(" %c 设置翻页方式! "+c,"color:green"),b.$domObj.trigger("pageway:click",c)}),this.$fontSizeObj.on("change:click",function(a,c){b.$domObj.trigger("size:click",c)}),this.$fontFamilyObj.on("change:click",function(a,c){b.$domObj.trigger("family:click",c)}),this.$bgColorObj.on("change:click",function(a,c){b.isNightMode=!1,b.$domObj.trigger("bgcolor:click",c)}),this.$screenLightObj.on("change:click",function(a,c){gli_set_keepscreenon(c);var d=b.$domObj.find(".read-footer .read-set-page2 .read-screen-always-bright");c?(d.find("read-.font.read-lf").addClass("read-active"),d.find(".read-font.read-rt").removeClass("read-active")):(d.find(".read-font.read-lf").removeClass("read-active"),d.find(".read-font.read-rt").addClass("read-active"))}),b.$domObj.find(".read-footer .read-speed-night").on(d,function(){b.isNightMode=!b.isNightMode,b.$domObj.trigger("night:click",b.isNightMode)}),b.$fontlight.on("swipeLeft",function(c){b.settingPage>1&&(console.log(" %c swipeleft! ","color:green"),a("-100%"))}),b.$fontlight.on("swipeRight",function(c){b.settingPage>1&&(console.log(" %c swiperight! ","color:green"),a("0"))})},h.prototype.setProgressVal=function(a){var b=this.opts,c=a.currIndex-1,d=a.total-a.currIndex;0===c&&(c="无"),0===d&&(c="无"),a.turnMode&&this.$progressObj.setValue(a.val),b.$footerObj.find(".read-prev-chapter").html(c),b.$footerObj.find(".read-next-chapter").html(d),b.$footerObj.find(".read-chapt-title").html(a.name),b.$footerObj.find(".read-chapt-current").html(a.currIndex),b.$footerObj.find(".read-chapt-total").html(a.total)},h.prototype.setColor=function(a){this.$systemLightbarObj.setColor(a)},h.prototype._showChildPanel=function(a){this.opts;f(a[0]).set("top",-a.height()+"px").duration("0.5s").end()},h.prototype._hideChildPanel=function(a){this.opts;f(a[0]).set("top","0").duration("0.5s").end()},h.prototype.getPanelObject=function(){},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h.prototype.open=function(){console.log("[SettingPanel] --> open");var a=this.opts;a.$domObj.fadeIn(200),f(a.wrapDomId+" .read-setting-panel  .read-header").set("top","0").duration("0.3s").end(),f(a.wrapDomId+" .read-setting-panel  .read-footer").set("bottom","0").duration("0.3s").end(),a.$footerObj.find(".read-set-btn").children().each(function(){e(this).removeClass("read-active")}),this.$fontSizeObj.reSize(),this.$pagingObj.reSize(),this.$fontFamilyObj.reSize(),this.$bgColorObj.reSize(),this.$systemLightbarObj.reSize(),this.$progressObj.reSize(),this.$screenLightObj.reSize(),this.$systemLightObj.reSize()},h.prototype.close=function(){var a=this.opts,b=a.$headerObj.attr("data-top"),c=a.$footerObj.attr("data-bottom");f(a.wrapDomId+" .read-setting-panel .read-header").set("top",b).duration("0.3s").end(),f(a.wrapDomId+" .read-setting-panel .read-footer").set("bottom",c).duration("0.3s").end(),setTimeout(function(){a.$domObj.fadeOut(10)},300),this._hideChildPanel(a.$progress),this._hideChildPanel(a.$fontlight),a.$domObj.trigger("close:click")},h.prototype.getSettingData=function(){var a=this.opts,b=a.settingData;return b.brightness=this.$systemLightbarObj.getValue(),b.useSysBrightness=this.$systemLightObj.getValue(),b.screenLongActive=this.$screenLightObj.getValue(),b.fontSize.value=this.$fontSizeObj.getValue(),b.pagingType.value=this.$pagingObj.getValue(),b.fontFamily.value=this.$fontFamilyObj.getValue(),b.bgColor.value=this.$bgColorObj.getValue(),b.isNightMode=a.isNightMode,b},h.prototype._setScreenBrightness=function(a){var b=.3,c=.7,d=b+a*c;d=parseFloat(d.toFixed(2)),"function"==typeof gli_set_brightness&&gli_set_brightness(d)},h.prototype._useSysBrightness=function(){var a=this;"function"==typeof gli_get_brightness&&gli_get_brightness(function(b){a._setScreenBrightness(b)})},h}(b,h,i,j,a,f),l=function(a,b){var c=a._,d=function(a){var c={wrapObj:null,tmplHtml:"",isMobile:!0,data:null};this.opts=b.extend(!0,{},c,a),this._init()};return d.prototype._init=function(){var a=this.opts;a.templObj=c.template(a.tmplHtml),this._bindEvent()},d.prototype._bindEvent=function(){var a=this.opts,c=a.isMobile?"tap":"click";a.wrapObj.on(c,"li",function(){a.wrapObj.trigger("catalog:click",{id:b(this).attr("data-id"),status:b(this).attr("data-status")})})},d.prototype.renderLayout=function(a){var b=this.opts,c=b.templObj(a);b.wrapObj.html(c)},d}(b,a),m=function(a,b){var c=function(a){var c={$wrapDomObj:null,isMobile:!0,msg:"这是对话框，请确认你的操作!",okBtn:{txt:"确认",cssClass:"",func:function(){console.log("[plugDialog] -> OK!")}},cancelBtn:{txt:"取消",cssClass:"",func:function(){console.log("[plugDialog] -> Cancel!")}}};this.opts=b.extend(!0,{},c,a),this.$dialogDomObj=null,this.$msgObj=null,this.$okBtnObj=null,this.$cacelBtnObj=null,this._init()};return c.prototype._init=function(){this._renderLayout(),this._bindEvent()},c.prototype._renderLayout=function(){var a=this.opts,c="";c+="<div class='read-dialog-main'>",c+="<div class='read-msg-content'></div>",c+="<div class='read-btns'>",c+="<div class='read-item read-ok-btn'>OK</div>",c+="<div class='read-item read-cancel-btn'>CANCEL</div>",c+="</div>",c+="</div>","MOBILE"==a.clientType?this.$dialogDomObj=b("<div class='read-reader-dialog-mask'>"):this.$dialogDomObj=b("<div class='read-reader-dialog-mask read-pc-dialog'>"),this.$dialogDomObj.html(c),this.$msgObj=this.$dialogDomObj.find(".read-msg-content"),this.$okBtnObj=this.$dialogDomObj.find(".read-ok-btn"),this.$cacelBtnObj=this.$dialogDomObj.find(".read-cancel-btn"),this.$msgObj.html(a.msg),this.$okBtnObj.html(a.okBtn.txt),this.$cacelBtnObj.html(a.cancelBtn.txt),a.$wrapDomObj.append(this.$dialogDomObj)},c.prototype._bindEvent=function(){var a=this,b=this.opts,c=b.isMobile?"tap":"click";this.$okBtnObj.on(c,function(){a.close(),b.okBtn.func()}),this.$cacelBtnObj.on(c,function(){a.close(),b.cancelBtn.func()})},c.prototype._resize=function(){console.log("[plugDialog.js] -> _resize:")},c.prototype.setMsg=function(a){this.$msgObj.html(a)},c.prototype.open=function(){this.opts;console.log("[plugDialog.js] -> open"),this._resize(),this.$dialogDomObj.show(200)},c.prototype.close=function(){this.opts;console.log("[plugDialog.js] -> close"),this.$dialogDomObj.hide(300)},c.prototype.destroy=function(){this.$okBtnObj.off(),this.$cacelBtnObj.off(),this.$dialogDomObj.remove()},c}(b,a),n={loading:"加载中...",downloadBooks:"书籍下载中...",chapterFalse:"获取章节失败！！",copyRunOut:"可复制次数已用完",copyStill:"复制字数超长,还能复制",firstPage:"已经是第一页了",lastPage:"已经是最后一页了",testReadOver:"试读结束,请购买",compCancel:"取消后投诉信息将不会保存",dealWith:"处理中",compSucess:"发送成功！！我们会尽快处理！",sendError:"发送失败！！请检查你的网络！",inputContent:"请输入内容",nowSearch:"正在搜索,请等待",emptySearch:"搜索结果为空！",noteCancel:"取消后笔记信息将不会保存",noteSucess:"笔记保存成功",noteError:"您选择的内容已经有笔记或者划线",noteFail:"笔记保存失败",noteDelFail:"笔记删除失败",bookMarkFail:"书签保存失败",bookMarkDelFail:"书签删除失败",correctCancel:"取消后纠错信息将不会保存",correctSucess:"感谢您的纠正",correctError:"请您输入纠错信息",compInterval:"20秒之内只能投诉一次,请过会再来！",changeFont:"正在修改字体,请稍等！",changeImgtxt:"正在修改阅读模式",noReadContent:"无可读内容",checkNetwork:"请检查你的网络！",chaangeVertical:"正在切换",checkBrowserTxt:"你的浏览器不能满足此应用, 建议使用 谷歌,火狐,Safri!"},o=function(a,b,c,d,e,f){var g=a._,h=function(a){console.log("[Bookmark] -> 构造函数!");var c={wrapObj:null,tmplHtml:"",isMobile:!0,data:null,markDomObj:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){var a=this.opts;a.templObj=g.template(a.tmplHtml),this._bindEvent(),this.dialog=new d({$wrapDomObj:a.$readerObj,isMobile:a.isMobile,okBtn:{txt:"确定",cssClass:"",func:function(){}},cancelBtn:{txt:"离开",cssClass:"",func:function(){}}})},h.prototype._bindEvent=function(){var a=this,c=this.opts,d=c.isMobile?"tap swipeLeft swipeRight":"click swipeLeft swipeRight";c.wrapObj.on(d,".read-bookmark-del",function(d){console.log("[bookmark.js]书签点击了删除"+d.type),c.wrapObj.trigger("bookmark:delclick");var e=b(this).parents(".read-one-chapter-bookmark"),f={chapterId:e.attr("data-chapterid"),bookmarkid:b(this).attr("data-bookmarkid")};a.delBookmark(f)}),c.wrapObj.on(d,".read-bookmark-left",function(d){if(console.log("书签执行了"+d.type),"swipeLeft"==d.type)a.bookmarkLeft(this);else if("swipeRight"==d.type)a.cancelDel();else{var e=parseFloat(b(this).find(".read-bookmark-percent").text())/100;c.wrapObj.trigger("bookmark:click",e),a.cancelDel()}})},h.prototype.renderLayout=function(a){var b=this.opts,d=null;d=a?a:{time_stamp:"0",bookmark_list:[]};var e=c.convertData(d.bookmark_list,"bookmark_list"),f={chapter_list:e,bookmark_list:d.bookmark_list};if(b.data=f,e.length>0){var g=b.templObj(f);b.wrapObj.html(g)}else b.wrapObj.find(".read-has-bookmark").html("").hide(),b.wrapObj.find(".read-no-bookmark").fadeIn()},h.prototype.bookmarkLeft=function(a){for(var c=(this.opts,b(a).parents(".read-bookmark")),d=b(a).parents(".read-has-bookmark").find(".read-bookmark"),e=!1,g=0;g<d.length;g++)if("true"==b(d[g]).attr("data-hasDel")&&b(d[g]).attr("data-bookmarkid")!=c.attr("data-bookmarkid")){e=!0;var h=b(d[g]).find(".read-bookmark-del");f(h[0]).set("right",h.attr("data-right")).duration("0.2s").end(),b(d[g]).attr("data-hasDel","false")}if(!e){var h=c.find(".read-bookmark-del");"true"!=c.attr("data-hasDel")&&(c.attr("data-hasDel","true"),c.find(".read-bookmark-del").attr("data-bookmarkid",c.attr("data-bookmarkid")),h.attr("data-right",h.css("right")),f(h[0]).set("right","0").duration("0.2s").end())}},h.prototype.cancelDel=function(){for(var a=this,c=a.opts,d=c.wrapObj.find(".read-has-bookmark .read-bookmark"),e=0;e<d.length;e++)if("true"==b(d[e]).attr("data-hasDel")){var g=b(d[e]).find(".read-bookmark-del");f(g[0]).set("right",g.attr("data-right")).duration("0.2s").end(),b(d[e]).attr("data-hasDel","false")}},h.prototype.addBookmark=function(a){function d(){g.data.bookmark_list.push(h);var a={time_stamp:g.data.time_stamp,bookmark_list:g.data.bookmark_list};g.saveFile(g.filePath,JSON.stringify(a)),f.renderLayout(g.data)}var f=this,g=this.opts;console.log("[Bookmark] -> addBookmark!");var h={bookmark_id:c.getRandomKey(),bookmark_text:a.text.slice(0,30),bookmark_time:c.getNowFormatDate(),bookmark_page:a.pageSite,chapter_name:a.chapterName,chapter_id:a.chapterId,oparate_type:"1",s_id:""};g.markDomObj.attr({"data-bookmarkid":h.bookmark_id,"data-chapterid":a.chapterId}).addClass("read-active");var i=b.extend(!0,{},h);g.api.setBookmark(i,function(a){console.log("[Bookmark.prototype.addBookmark] --> 增加书签-成功!"+a),d();var b={oparate_type:"1",s_id:a.s_id,bookmark_id:a.bookmark_id,time_stamp:a.time_stamp};f._updLocalData(b)},function(a){g.isClient?d():(f.dialog.setMsg(e.bookMarkFail),f.dialog.open(),g.markDomObj.removeClass("read-active"))})},h.prototype.delBookmark=function(a){var b=this,c=this.opts;console.log("[Bookmark] -> delBookmark!"),g.isEmpty(a)&&(a={bookmarkid:c.markDomObj.attr("data-bookmarkid"),chapterId:c.markDomObj.attr("data-chapterid")});for(var d=a.bookmarkid,f=c.data.bookmark_list,h=null,i=0,j=f.length;i<j;i++)if(h=f[i],h.bookmark_id==a.bookmarkid){h.oparate_type="3";break}var k={time_stamp:c.data.time_stamp,bookmark_list:c.data.bookmark_list};c.saveFile(c.filePath,JSON.stringify(k)),c.markDomObj.attr("data-bookmarkid")==d&&c.markDomObj.removeClass("read-active").attr("data-bookmarkid",""),b.renderLayout(c.data),h.s_id&&c.api.delBookmark({bookmark_id:d},function(a){var c={oparate_type:"3",s_id:a.s_id,bookmark_id:a.bookmark_id,time_stamp:a.time_stamp};b._updLocalData(c)},function(a){c.isClient||(b.dialog.setMsg(e.bookMarkDelFail),b.dialog.open(),h.oparate_type="0",c.markDomObj.attr("data-bookmarkid")==d&&c.markDomObj.addClass("read-active").attr("data-bookmarkid",d),b.renderLayout(c.data))})},h.prototype.updateBookmarks=function(a){var b=this,c=this.opts;console.log("[Bookmark] -> updateBookmarks!"),c.useSettingBookmark&&(c.markDomObj=c.$readerObj.find(".read-setting-panel .read-header .read-bookmark"));var d=c.markDomObj.attr("data-bookmarkid");d?b.delBookmark(a):b.addBookmark(a)},h.prototype.getBookmarks=function(){console.log("[Bookmark] -> getBookmarks! ");var a=this.opts;return a.data},h.prototype.destoryBookmarks=function(){console.log("[Bookmark] -> destoryBookmarks!")},h.prototype._initBookmarks=function(){console.log("[Bookmark] -> _initBookmarks!")},h.prototype.isShowBookmark=function(a){console.log("[Bookmark] -> isShowBookmark!");var b=this,c=b.opts,d=[],e=!0;g.isEmpty(c.data)||(d=c.data.chapter_list);for(var f=0;f<d.length;f++){var h=d[f];if(a.chapterId==h.chapter_id){for(var i=0;i<h.bookmark_list.length;i++){var j=h.bookmark_list[i],k=j.bookmark_page;if(k<=a.endPageOffset&&k>a.startPageOffset||k==a.endPageOffset&&k==a.startPageOffset){e=!1,b._showMarkIcon(j.bookmark_id,"open");break}}break}}e&&b._showMarkIcon("","close")},h.prototype._showMarkIcon=function(a,b){var c=this.opts;0==c.markDomObj.length&&c.useSettingBookmark&&(c.markDomObj=c.$readerObj.find(".read-setting-panel .read-header .read-bookmark")),"open"==b?this.opts.markDomObj.attr("data-bookmarkid",a).addClass("read-active"):this.opts.markDomObj.attr("data-bookmarkid","").removeClass("read-active")},h.prototype.getMarkDom=function(){return this.opts.markDomObj},h.prototype._updLocalData=function(a){for(var b=this.opts,c=b.data.bookmark_list,d=null,e=0,f=c.length;e<f;e++)if(d=c[e],d.bookmark_id==a.bookmark_id){"1"==a.oparate_type?(d.s_id=a.s_id,d.oparate_type="0"):"3"==a.oparate_type&&c.splice(e,1),b.data.time_stamp=a.time_stamp;break}var g={time_stamp:b.data.time_stamp,bookmark_list:b.data.bookmark_list};b.saveFile(b.filePath,JSON.stringify(g))},h}(b,a,c,m,n,f),p=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,editHtml:"",$domObj:null,isMobile:!0,noteData:null,sigleNote:null,api:null};this.opts=b.extend(!1,{},c,a),this._init()};return h.prototype._init=function(){console.log("[editPanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.editHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.isMobile?"tap":"click";b.$domObj.find(".read-header .read-cancel").on(c,function(){var c=b.$domObj.find(".read-body textarea").val().trim();b.$domObj.find(".read-body textarea").blur(),a.cancel(c)}),b.$domObj.find(".read-header .read-send").on(c,function(){var c=b.$domObj.find(".read-body textarea").val().trim();a._sendNote(b.thisNoteObj,c)})},h.prototype.open=function(a){var b=this,c=b.opts;c.thisNoteObj=a,c.$domObj.show(),setTimeout(function(){c.$domObj.height();f(c.$domObj[0]).set("top","0px").duration("0.5s").end(),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])},10),c.$domObj.find(".read-body .read-original-text").html(a.original),a.note_text?(c.isEditNote=!0,c.$domObj.find(".read-body textarea").val(a.note_text)):c.isEditNote=!1,a.isunderline&&g.each(c.noteData.note_list,function(b){if(b.note_id==a.note_id)return c.thisNoteObj.s_id=b.s_id,!1})},h.prototype.cancel=function(a){var b=this,e=b.opts;if(a){var f=new c({$wrapDomObj:e.$domObj,okBtn:{txt:"继续编辑",cssClass:"",func:function(){e.$domObj.find(".read-body textarea").focus(),f.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close(),f.destroy()}}});f.setMsg(d.noteCancel),f.open()}else b.close()},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-body textarea").val("");b.$domObj.height();f(b.$domObj[0]).set("top","-100%").duration("0.3s").end(),setTimeout(function(){b.$domObj.hide()},300)},h.prototype._sendNote=function(a,b){var f=this,g=f.opts;if(b){f.sucessDialog=new c({$wrapDomObj:this.opts.$domObj,okBtn:{txt:"确定",cssClass:"",func:function(){f.close(),f.sucessDialog.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){f.close(),f.sucessDialog.destroy()}}});var h={chapter_id:a.chapter_id,chapter_name:a.chapter_name,firstId:a.firstId,lastId:a.lastId,note_id:a.note_id,note_page:a.note_page,note_text:b,note_time:e.getNowFormatDate(),original:a.original,s_id:a.s_id,oparate_type:"",isSave:!1};if(g.isEditNote||a.isunderline){h.oparate_type=2;for(var i=g.noteData.note_list,j=0,k=i.length;j<k;j++)if(i[j].note_id==h.note_id){i[j]=h;break}}else h.s_id="",h.note_id=e.getRandomKey(),h.oparate_type=1,g.noteData.note_list.push(h);g.$domObj.trigger("addnote:update",{noteData:g.noteData,sigleNote:h,flag:g.isEditNote})}else f.dialog.setMsg(d.inputContent),f.dialog.open()},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h}(b,a,m,n,c,f),q=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,shareHtml:"",$domObj:null,isMobile:!0,note_share_conf:{flag:!1,share_items:[{type:"wx",flag:!1,share_cb:null},{type:"wx_moments",flag:!1,share_cb:null},{type:"sina_weibo",flag:!1,share_cb:null},{type:"qq",flag:!1,share_cb:null},{type:"qq_zone",flag:!1,share_cb:null}]},itemsObj:{wx:{txt:"微信好友",icon_css:"read-icon-wx"},wx_moments:{txt:"微信朋友圈",icon_css:"read-icon-wx-pyq"},sina_weibo:{txt:"新浪微博",icon_css:"read-icon-wb"},qq:{txt:"qq好友",icon_css:"read-icon-qq"},qq_zone:{txt:"qq空间",icon_css:"read-icon-qzone"}},currentNoteInfo:null};this.opts=b.extend(!1,{},c,a),this._init()};return h.prototype._init=function(){console.log("[sharePanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},h.prototype._renderLayout=function(){for(var a=this.opts,c=g.template(a.shareHtml),d=a.note_share_conf.share_items,e=a.itemsObj,f=[],h="",i=null,j=null,k=0,l=d.length;k<l;k++)d[k].flag&&(i=d[k],h=i.type,e[h].share_cb=i.share_cb,j={flag:!0,icon_css:e[h].icon_css,txt:e[h].txt,type:h},f.push(j));var m=c(f);a.$domObj=b(m),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.itemsObj,e=c.isMobile?"tap":"click";c.$domObj.find(".read-note-share-cancel").on(e,function(){a.close()}),c.$domObj.find(".read-share-cover").on(e,function(){a.close()}),c.$domObj.on(e,"li",function(){var e=b(this).attr("data-type");"function"==typeof d[e].share_cb?(d[e].share_cb(c.currentNoteInfo),a.close()):console.error("[笔记分享]:"+d[e].txt+", 请注册相应函数!")})},h.prototype.open=function(a,b){var c=this,d=c.opts;d.$domObj.fadeIn();var e=d.$domObj.find(".read-note-share-content"),g=e.height();f(e[0]).translate(0,-g).duration("0.3s").end()},h.prototype.close=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-note-share-content"),d=c.height();f(c[0]).translate(0,d).duration("0.3s").end(),b.$domObj.fadeOut()},h.prototype.setCurrentNoteInfo=function(a){var b=this.opts;b.currentNoteInfo=a},h}(b,a,m,n,c,f),r=function(a,b,c,d,e,f,g){var h=a._,i=function(a){var c={$readerObj:null,detailHtml:"",$domObj:null,isMobile:!0,noteData:null,thisNoteObj:null,thisNoteList:[],api:null,shareObj:null};this.opts=b.extend(!1,{},c,a),this._init()};return i.prototype._init=function(){console.log("[detailPanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},i.prototype._renderLayout=function(){var a=this.opts,c=h.template(a.detailHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj),a.note_share_conf.flag?a.shareObj=new f({$readerObj:a.$readerObj,shareHtml:a.shareHtml,isMobile:a.isMobile,isMobile:a.isMobile,note_share_conf:a.note_share_conf}):a.$domObj.find(".read-header .read-share-btn").css("visibility","hidden")},i.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.isMobile?"tap swipeRight":"click";b.$domObj.find(".read-note-detail-left").on(c,function(b){("tap"==b.type||"swipeRight"==b.type)&&a.close()}),b.$domObj.find(".read-body .read-delete-btn").on(c,function(b){"tap"==b.type&&a.deleteNote()}),b.$domObj.find(".read-body .read-edit-btn").on(c,function(b){"tap"==b.type&&a.editNote()}),b.note_share_conf.flag&&b.$domObj.find(".read-header .read-share-btn").on(c,function(c){
var d=a._getCurrentNotInfo();b.shareObj.setCurrentNoteInfo(d),"tap"==c.type&&b.shareObj.open()}),b.$domObj.find(".read-footer .read-prev").on(c,function(b){"tap"==b.type&&a._prev()}),b.$domObj.find(".read-footer .read-next").on(c,function(b){"tap"==b.type&&a._next()})},i.prototype.open=function(a,b){var c=this,d=c.opts;d.thisNoteObj={noteid:a,chapterid:b},d.$domObj.fadeIn();var e=d.$domObj.find(".read-note-detail-content"),f=e.width();g(e[0]).translate(-f,0).duration("0.3s").end(),this._filterNote(b),this.viewNote()},i.prototype.close=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-note-detail-content"),d=c.width();g(c[0]).translate(d,0).duration("0.3s").end(),b.$domObj.fadeOut()},i.prototype.viewNote=function(){var a=this,b=a.opts,c=b.thisNoteObj;return c.noteid===-1?(b.$domObj.find(".read-body .read-original-text").html(""),b.$domObj.find(".read-body .read-note-text").html("当前章节没笔记啦！"),b.$domObj.find(".read-body .read-time").html(""),b.$domObj.find(".read-footer .read-page .read-current").html(0),b.$domObj.find(".read-footer .read-page .read-total").html(0),b.$domObj.find(".read-body .read-btns").css("pointer-events","none"),b.$domObj.find(".read-footer").css("pointer-events","none"),!1):(b.$domObj.find(".read-body .read-btns").css("pointer-events",""),b.$domObj.find(".read-footer").css("pointer-events",""),h.each(b.thisNoteList,function(a,d){if(a.note_id==c.noteid)return b.thisNoteData=a,b.$domObj.find(".read-body .read-original-text").html(a.original),b.$domObj.find(".read-body .read-note-text").html(a.note_text),b.$domObj.find(".read-body .read-time").html(a.note_time),b.$domObj.find(".read-footer .read-page .read-current").html(d+1),b.$domObj.find(".read-footer .read-page .read-total").html(b.thisNoteList.length),b.thisNoteIndex=d,!1}),void("undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])))},i.prototype.reshowNote=function(){var a=this.opts;this._filterNote(a.thisNoteObj.chapterid);var b=a.thisNoteIndex;b>0?b-=1:b=b<a.thisNoteList.length?b:-1,a.thisNoteObj.noteid=b>-1?a.thisNoteList[b].note_id:-1,this.viewNote()},i.prototype._filterNote=function(a){var b=this.opts,c=[];b.thisNoteList=[];for(var d=0,e=b.noteData.chapter_list.length;d<e;d++)if(b.noteData.chapter_list[d].chapter_id==a){c=b.noteData.chapter_list[d].note_list;break}for(var f=0,g=c.length;f<g;f++)c[f].note_text&&"3"!=c[f].oparate_type&&b.thisNoteList.push(c[f])},i.prototype._prev=function(){var a=this,b=a.opts,c=b.thisNoteIndex;return b.thisNoteIndex=b.thisNoteIndex>0?b.thisNoteIndex-1:0,b.thisNoteObj.noteid=b.thisNoteList[b.thisNoteIndex].note_id,c!=b.thisNoteIndex&&void this.viewNote()},i.prototype._next=function(){var a=this,b=a.opts,c=b.thisNoteIndex,d=b.thisNoteList.length-1;return b.thisNoteIndex=b.thisNoteIndex<d?b.thisNoteIndex+1:d,b.thisNoteObj.noteid=b.thisNoteList[b.thisNoteIndex].note_id,c!=b.thisNoteIndex&&void this.viewNote()},i.prototype.editNote=function(){var a=this,b=a.opts;b.$domObj.trigger("detailDel:edit",b.thisNoteData)},i.prototype.deleteNote=function(){var a=this,b=a.opts;b.$domObj.trigger("detailDel:delete",b.thisNoteObj)},i.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},i.prototype._getCurrentNotInfo=function(){var a=this,b=a.opts,c={book_id:"",chapter_id:"",note_txt:""};try{c.book_id=b.api.opts.baseData.book_id||"",c.chapter_id=b.thisNoteObj.chapterid,c.note_txt=b.thisNoteData.original}catch(a){console.error("[panelDetail.js]"+a)}return c},i}(b,a,m,n,c,q,f),s=function(a,b,c,d,e,f,g,h){var i=a._,j=function(a){var c={wrapObj:null,$readerObj:null,$contentObj:null,tmplHtml:"",isMobile:!0,data:null,chapter_id:"",editHtml:"",detailHtml:"",shareHtml:""};this.opts=b.extend(!0,{},c,a),this._init()};return j.prototype._init=function(){var a=this.opts;a.templObj=i.template(a.tmplHtml),a.$contentObj=a.$readerObj.find(".read-selector-main .read-content"),this.noteDialog=new f({$wrapDomObj:this.opts.$readerObj,okBtn:{txt:"确定",cssClass:"",func:function(){}},cancelBtn:{txt:"离开",cssClass:"",func:function(){}}})},j.prototype._bindEvent=function(){var a=this.opts,c=this,d=a.isMobile?"tap swipeLeft swipeRight":"click swipeLeft swipeRight";a.wrapObj.on(d,".read-note-del",function(a){console.log("[note.js]笔记点击了删除"+a.type);var d=b(this).parents(".read-one-chapter-notes"),e={chapterid:d.attr("data-chapterid"),noteid:b(this).attr("data-noteid")};c.delNote(e)}),a.wrapObj.on(d,".read-note-left",function(d){if(console.log("笔记执行了"+d.type),"swipeLeft"==d.type)c.noteLeft(this);else if("swipeRight"==d.type)c.cancelDel();else{var e=b(this).parents(".read-note").attr("data-percent");a.wrapObj.trigger("cbnnote:click",e),c.cancelDel()}}),a.editObj.on("addnote:update",function(b,d){a.data=d.noteData,c.renderCbnPage(a.data),c.showNote(a.chapter_id,a.chapter_name),d.flag&&a.noteDetailObj.reshowNote(),d.sigleNote&&c._sendNote(d.sigleNote)}),a.noteDetailObj.on("detailDel:delete",function(a,b){c.delNote(b)}),a.noteDetailObj.on("detailDel:edit",function(b,d){d.chapter_id=a.chapter_id,c.editNote(d)})},j.prototype.renderLayout=function(a){var b=this.opts;b.data=a||{time_stamp:"0",note_list:[]},this.renderCbnPage(b.data),b.editObj=new c({$readerObj:b.$readerObj,editHtml:b.editHtml,isMobile:b.isMobile,api:b.api,saveFile:b.saveFile,filePath:b.filePath,noteData:b.data}),b.noteDetailObj=new d({$readerObj:b.$readerObj,detailHtml:b.detailHtml,shareHtml:b.shareHtml,isMobile:b.isMobile,api:b.api,saveFile:b.saveFile,filePath:b.filePath,noteData:b.data,note_share_conf:b.note_share_conf}),this._bindEvent()},j.prototype.renderCbnPage=function(a){var b=this.opts,c=!1,d=e.convertData(a.note_list,"note_list");a.chapter_list=d;var f={chapter_list:d,nowDate:""};if(f.chapter_list.length>0){for(var g=0,h=f.chapter_list.length;g<h;g++)if(f.chapter_list[g].note_count){c=!0;break}var i=e.getNowFormatDate();f.nowDate=i.substr(0,10);var j=b.templObj(f);b.wrapObj.html(j),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}c||(b.wrapObj.find(".read-has-note").html("").hide(),b.wrapObj.find(".read-no-note").fadeIn())},j.prototype.noteLeft=function(a){for(var c=(this.opts,b(a).parents(".read-note")),d=b(a).parents(".read-has-note").find(".read-note"),e=!1,f=0;f<d.length;f++){var g=b(d[f]);if("true"==g.attr("data-hasDel")&&g.attr("data-noteid")!=c.attr("data-noteid")){e=!0;var i=g.find(".read-note-del"),j=i.width();h(i[0]).translate(j,0).duration("0.2s").end(),g.attr("data-hasDel","false")}}if(!e){var i=c.find(".read-note-del");if("true"!=c.attr("data-hasDel")){c.attr("data-hasDel","true"),c.find(".read-note-del").attr("data-noteid",c.attr("data-noteid"));var j=i.width();h(i[0]).translate(-j,0).duration("0.2s").end()}}},j.prototype.cancelDel=function(){for(var a=this,c=a.opts,d=c.wrapObj.find(".read-has-note .read-note"),e=0;e<d.length;e++)if("true"==b(d[e]).attr("data-hasDel")){var f=b(d[e]).find(".read-note-del"),g=f.width();h(f[0]).translate(g,0).duration("0.2s").end(),b(d[e]).attr("data-hasDel","false")}},j.prototype.delNote=function(a){for(var b=this,c=this.opts,d=a.noteid,e=c.data.note_list,f="",h=null,i=0,j=e.length;i<j;i++)if(h=e[i],h.note_id==d){""==h.s_id?e.splice(i,1):(h.oparate_type="3",f=h.s_id);break}var k={time_stamp:c.data.time_stamp,note_list:c.data.note_list};c.saveFile(c.filePath,JSON.stringify(k)),b.renderCbnPage(c.data),c.noteDetailObj.opts.thisNoteObj&&c.noteDetailObj.reshowNote(),this.showNote(c.chapter_id,c.chapter_name),""!=f&&c.api.delNote({note_id:d},function(a){b._updateSingleNote({s_id:"",note_id:a.note_id,time_stamp:a.time_stamp,oparate_type:3})},function(){c.isClient||(b.noteDialog.setMsg(g.noteDelFail),b.noteDialog.open(),h.oparate_type="0",b.renderCbnPage(c.data),c.noteDetailObj.opts.thisNoteObj&&(c.noteDetailObj._filterNote(c.chapter_id),c.noteDetailObj.opts.thisNoteObj.noteid=d,c.noteDetailObj.viewNote()),b.showNote(c.chapter_id,c.chapter_name))})},j.prototype.showNote=function(a,c){var d=this.opts,e=d.isMobile?"tap swipeLeft swipeRight":"click swipeLeft swipeRight";d.chapter_id=a,d.chapter_name=c;var f=[];d.$contentObj.find(".read-gli-note").removeClass("read-gli-note"),d.$contentObj.find(".read-gli-underline").removeClass("read-gli-underline"),d.$contentObj.find(".read-note-icon").remove();for(var g=d.data?d.data.chapter_list:[],h=0,i=g.length;h<i;h++)if(g[h].chapter_id==a){f=g[h].note_list.concat();break}var j=d.$contentObj.find("span[data-id]").first().attr("data-id"),k=d.$contentObj.find("span[data-id]").last().attr("data-id");j=parseInt(j),k=parseInt(k);var l=0,m=0,n=0,o="",p="",q=d.$contentObj.css("font-size");q=parseFloat(q.replace("px",""));for(var r=d.$readerObj.offset().top,s=d.$readerObj.offset().left;f.length;)if(l=parseInt(f[0].firstId),m=parseInt(f[0].lastId),n=m,o=f[0].note_id,p=f[0].note_text,l=l>j?l:j,m=m<k?m:k,l>m)f.splice(0,1);else{if(""===p)for(var t=l;t<=m;t++)d.$contentObj.find('span[data-id="'+t+'"]').attr("data-noteid",o),d.$contentObj.find('span[data-id="'+t+'"]').hasClass("read-gli-note")||d.$contentObj.find('span[data-id="'+t+'"]').addClass("read-gli-underline");else{for(var t=l;t<=m;t++)d.$contentObj.find('span[data-id="'+t+'"]').attr("data-noteid",o).addClass("read-gli-note");if(m===n){var u=b('<div class="read-note-icon">'),v=d.$contentObj.find('span[data-id="'+m+'"]'),w=v.offset().top-d.$contentObj.offset().top,x=v.offset().left,y=v.width();w=w<q?q:w,u.css({top:w-q-r+"px",left:x-s+y-q+"px"}).attr("data-noteid",o).attr("data-chapterid",a).on(e,function(a){d.noteDetailObj.open(b(this).data("noteid"),d.chapter_id),a.stopPropagation()}),d.$contentObj.eq(0).append(u)}}f.splice(0,1)}},j.prototype.addUnderline=function(a){var b=this.opts;if(b.$contentObj.find(".read-font-select").hasClass("read-gli-underline")||b.$contentObj.find(".read-font-select").hasClass("read-gli-note"))this.noteDialog.setMsg(g.noteError),this.noteDialog.open();else{b.$contentObj.find(".read-font-select").addClass("read-gli-underline");var c=b.data.note_list,d={chapter_id:b.chapter_id,chapter_name:b.chapter_name,s_id:"",note_id:e.getRandomKey(),original:a.original,note_text:"",note_time:e.getNowFormatDate(),firstId:a.firstId,lastId:a.lastId,note_page:a.note_page,oparate_type:"1",isSave:!1};b.$contentObj.find(".read-font-select").attr("data-noteid",d.note_id),c.push(d),this.renderCbnPage(b.data),this._sendNote(d)}},j.prototype.editNote=function(a){var b=this.opts;return a.isunderline||!b.$contentObj.find(".read-font-select").hasClass("read-gli-underline")&&!b.$contentObj.find(".read-font-select").hasClass("read-gli-note")?void b.editObj.open(a):(this.noteDialog.setMsg(g.noteError),this.noteDialog.open(),!1)},j.prototype._sendNote=function(a){function b(a,b){b&&(c.editObj.sucessDialog.setMsg(a),c.editObj.sucessDialog.open())}var c=this.opts,d=this,e={time_stamp:c.data.time_stamp,note_list:c.data.note_list};c.saveFile(c.filePath,JSON.stringify(e)),c.api.sendNote(a,function(c){console.info("[panelNotePc.js --> _sendNote] -- success!"),d._updateSingleNote({s_id:c.s_id,note_id:c.note_id,time_stamp:c.time_stamp,oparate_type:1}),b(g.noteSucess,""!=a.note_text),d._fallback(!0)},function(){var e=c.isClient?g.noteSucess:g.noteFail;""!=a.note_text||c.isClient?""!=a.note_text&&b(e,!0):(d.noteDialog.setMsg(g.noteFail),d.noteDialog.open()),d._fallback(c.isClient)})},j.prototype._fallback=function(a){for(var b=this.opts,c=b.data.note_list,d=!1,e=c.length-1;e>=0;e--)if(c[e].isSave===!1){delete c[e].isSave;var f=b.editObj.opts;a?f.thisNoteObj=null:(f.isEditNote?(c[e]=f.thisNoteObj,d=!0):f.thisNoteObj&&f.thisNoteObj.isunderline?c[e].note_text="":c.splice(e,1),this.renderCbnPage(b.data),this.showNote(b.chapter_id,b.chapter_name),d&&(b.noteDetailObj.opts.thisNoteObj.noteid=f.thisNoteObj.note_id,b.noteDetailObj._filterNote(b.chapter_id),b.noteDetailObj.viewNote()));break}},j.prototype._updateSingleNote=function(a){for(var b=this.opts,c=b.data.note_list,d=null,e=0,f=c.length;e<f;e++)if(d=c[e],d.note_id==a.note_id){"3"==a.oparate_type?c.splice(e,1):(d.s_id=a.s_id,d.oparate_type="0"),a.time_stamp&&(b.data.time_stamp=a.time_stamp);break}var g={time_stamp:b.data.time_stamp,note_list:b.data.note_list};b.saveFile(b.filePath,JSON.stringify(g))},j.prototype.batchUpdateNote=function(a,b,c){var d=this.opts;d.api.batchUpdateNote(a,function(a){"function"==typeof b&&b(a)},function(a){"function"==typeof c&&c(a)})},j.prototype.on=function(a,b){var c=this.opts;c.wrapObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},j}(b,a,p,r,c,m,n,f),t=function(a,b,c,d,e,f,g){var h=a._,i=function(a){var b={wrapDomId:"",$readerObj:null,templHtml:"",templHeadHtml:"",templBodyHtml:"",templCatalogHtml:"",templNoteHtml:"",$domObj:null,$headerObj:null,$bodyObj:null,isMobile:!0,useBookmark:!0,useNote:!0,data:null},c=[{text:"目录",name:"catalog",state:"read-active",view:"read-catalog-body",prompt:"无目录"},{text:"笔记",name:"note",state:"",view:"read-note-body",prompt:"阅读时长按文字可添加笔记"},{text:"书签",name:"bookmark",state:"",view:"read-bookmark-body",prompt:"阅读时下拉添加书签"}];this.opts=e.extend(!0,{},b,a),this.opts.useBookmark||c.pop(),this.opts.useNote||c.splice(1,1);for(var d=this.opts.data,g=0,h=d.length;g<h;g++)d[g].view="read-custom-body",d[g].state=d[g].state||"";this.opts.data=c.concat(this.opts.data),this.opts.data.length>5&&(this.opts.data=this.opts.data.slice(0,5)),this.customFunc=[];for(var i=0;i<this.opts.data.length;i++){var j=this.opts.data[i].cbFunc||f.emptyFunc;this.customFunc.push(j)}this._init()};return i.prototype._init=function(){console.log("[panelCbn.js] --> _init! "),this._renderLayout(),this._bindEvent()},i.prototype._renderLayout=function(){var a=this.opts,f=h.template(a.templHtml),g=f();a.$domObj=e(g),a.$readerObj.append(a.$domObj),a.$headerObj=a.$domObj.find(".read-header-nav"),a.$bodyObj=a.$domObj.find(".read-body");var i=h.template(a.templHeadHtml),j=i(a.data);a.$headerObj.append(j);var k=h.template(a.templBodyHtml),l=k(a.data);a.$bodyObj.append(l);var m=a.$bodyObj.find(".read-catalog-body");this.$catalogWrapBody=m,this.catalogObj=new b({wrapObj:m,tmplHtml:a.templCatalogHtml,isMobile:a.isMobile});var n=a.$bodyObj.find(".read-bookmark-body");if(this.$bookmarkWrapBody=n,this.bookmarkObj=null,a.useBookmark){var o=null;o=a.useSettingBookmark?a.$readerObj.find(".read-setting-panel .read-header .read-bookmark"):a.$readerObj.find(".read-panel.read-selector-main .read-view-page .read-bookmark-view"),this.bookmarkObj=new c({wrapObj:n,$readerObj:a.$readerObj,tmplHtml:a.templBookmarkHtml,isMobile:a.isMobile,isClient:a.isClient,markDomObj:o,saveFile:a.saveFile,filePath:a.bookmarkFilePath,useSettingBookmark:a.useSettingBookmark,api:a.api})}var p=a.$bodyObj.find(".read-note-body");this.$noteWrapBody=p,this.noteObj=null,a.useNote&&(this.noteObj=new d({$readerObj:a.$readerObj,wrapObj:p,tmplHtml:a.templNoteHtml,isMobile:a.isMobile,isClient:a.isClient,saveFile:a.saveFile,filePath:a.noteFilePath,editHtml:a.editHtml,detailHtml:a.detailHtml,shareHtml:a.shareHtml,api:a.api,note_share_conf:a.note_share_conf}))},i.prototype._bindEvent=function(){var a=this.opts,b=a.isMobile?"tap":"click",c=this;a.$domObj.find(".read-back-read").on(b,function(){f.hasFunction(c.bookmarkObj,"cancelDel")&&c.bookmarkObj.cancelDel(),c.close()});var d=null;a.$headerObj.on(b,"div",function(){var b=e(this).index();e(this).addClass("read-active").siblings().removeClass("read-active"),f.hasFunction(c.bookmarkObj,"cancelDel")&&c.bookmarkObj.cancelDel(),f.hasFunction(c.noteObj,"cancelDel")&&c.noteObj.cancelDel(),d=a.$bodyObj.children().eq(b),d.show().siblings().hide(),d.hasClass("read-custom-body")&&c.customFunc[b](d)}),this.$catalogWrapBody.on("catalog:click",function(b,c){console.log("[panelCbn.js] 你点击了目录! -> id:"+c.id+", status:"+c.status),a.$domObj.trigger("cbncatalog:click",c)}),this.$bookmarkWrapBody.on("bookmark:click",function(b,c){console.log("[panelCbn.js] 你点击了书签 -! ->"),a.$domObj.trigger("cbnbookmark:click",c)})},i.prototype.getPanelObject=function(){},i.prototype.getCustomNavBody=function(a){console.log("[CbnPanel] --> getCustomNavBody")},i.prototype.renderCatalog=function(a){this.catalogObj.renderLayout(a)},i.prototype.renderBookmark=function(a){this.bookmarkObj.renderLayout(a)},i.prototype.updateBookmarks=function(a){console.log("[panelCbn.js]--> updateBookmarks"),f.hasFunction(this.bookmarkObj,"updateBookmarks")&&this.bookmarkObj.updateBookmarks(a)},i.prototype.getBookmarkData=function(){return console.log("[panelCbn.js]--> getBookmarkData"),this.bookmarkObj.getBookmarks()},i.prototype.showBookmark=function(a){console.log("[panelCbn.js]--> showBookmark"),f.hasFunction(this.bookmarkObj,"isShowBookmark")&&this.bookmarkObj.isShowBookmark(a)},i.prototype.renderNote=function(a){this.noteObj.renderLayout(a)},i.prototype.open=function(){var a=this.opts;a.$domObj.show(),setTimeout(function(){g(a.wrapDomId+" .read-cbn-panel").set("top","0").duration("0.5s").end()},10)},i.prototype.close=function(){var a=this.opts;g(a.wrapDomId+" .read-cbn-panel").set("top","100%").duration("0.5s").end(),setTimeout(function(){a.$domObj.hide()},500)},i.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},i}(b,l,o,s,a,c,f),u=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,complainHtml:"",$domObj:null,isMobile:!0,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[ComplaintPanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.complainHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.isMobile?"tap":"click";b.$domObj.find(".read-header .read-cancel").on(c,function(){var c=b.$domObj.find(".read-body textarea").val();b.$domObj.find(".read-body textarea").blur(),a.cancel(c)}),b.$domObj.find(".read-header .read-send").on(c,function(){var c=b.$domObj.find(".read-body textarea").val();a.sendComplaint(c)})},h.prototype.open=function(){var a=this,b=a.opts;b.$domObj.show(),setTimeout(function(){f(b.$domObj[0]).set("top","0px").duration("0.3s").end()},10)},h.prototype.cancel=function(a){var b=this,e=b.opts;b.cancelDialog=new c({$wrapDomObj:this.opts.$domObj,okBtn:{txt:"继续编辑",cssClass:"",func:function(){e.$domObj.find(".read-body textarea").focus()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close()}}}),a?(b.cancelDialog.setMsg(d.compCancel),b.cancelDialog.open()):b.close()},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-body textarea").val(""),f(b.$domObj[0]).set("top","-101%").duration("0.2s").end(),setTimeout(function(){b.$domObj.hide()},200)},h.prototype.sendComplaint=function(a){var b=this,f=b.opts,g=f.$domObj.find(".read-header .read-send");if(b.sucessDialog=new c({$wrapDomObj:this.opts.$domObj,okBtn:{txt:"确定",cssClass:"",func:function(){b.close()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close()}}}),0!=a.length){var h=e.getTimestamp(),i=g.attr("data-complaint")?h-g.attr("data-complaint"):h;i>20?(f.loading.setMsg(d.dealWith),f.loading.open(),f.api.sendComplaint({complaint_val:a},function(a){f.loading.close(),a.status?(b.sucessDialog.setMsg(d.compSucess),b.sucessDialog.open(),g.attr("data-complaint",e.getTimestamp())):(b.sucessDialog.setMsg(a.error),b.sucessDialog.open())},function(){f.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(b.dialog.setMsg(d.compInterval),b.dialog.open())}else b.dialog.setMsg(d.inputContent),b.dialog.open()},h}(b,a,m,n,c,f),v=function(a,b,c,d,e){var f=a._,g='<div class="read-history-title"><span class="read-icon"></span><span class="read-font">搜索历史</span></div><ul> <% _.each(obj, function(search){  %> <li class="read-cf"><span class="read-lf read-text-over read-search-val"><%= search.keyword %></span><span class="read-rt"><%= search.time %></span></li> <% }); %> </ul><div class="read-history-btn"><a class="read-clear-search read-icon-hv-center"><span class="read-icon"></span>清空搜索历史</a></div>',h='<ul class="read-cf"> <% _.each(obj.search_list, function(search_list){  %><li class="read-cf" data-site="<%= search_list.search_page %>"><div class="read-search-text"><%= search_list.search_text %></div><div class="read-search-page read-rt"><%= (parseFloat(search_list.search_page)*100).toFixed(4) + "%" %></div></li><% }); %> </ul>',i=function(a){var c={$readerObj:null,searchHtml:"",$domObj:null,isMobile:!0,api:null,hisTempl:f.template(g),searchResTempl:f.template(h)};this.opts=b.extend(!0,{},c,a),this._init()};return i.prototype._init=function(){console.log("[SearchPanel] --> _init");var a=this.opts;a.isClient?this.sendSearch=this.sendSearchOffline:this.sendSearch=this.sendSearchOnline,this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},i.prototype._renderLayout=function(){var a=this.opts,c=f.template(a.searchHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},i.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap":"click";c.$domObj.find(".read-header .read-cancel").on(d,function(){c.$domObj.find(".read-header .read-search-ipt-box .read-search-ipt").blur(),a.close()}),c.$domObj.find(".read-header .read-send").on(d,function(){var b=c.$domObj.find(".read-header .read-search-ipt").val();a.sendSearch(b)}),c.$domObj.on(d,".read-search-history li",function(c){console.log("[panelSearch.js] -- > 点击搜索历史"),a.sendSearch(b(this).find(".read-search-val").text())}),c.$domObj.on(d,".read-search-history .read-clear-search",function(b){console.log("[panelSearch.js] -- > 点击清空搜索历史"),c.$domObj.find(".read-search-history").html(""),a.delSearchHis()}),c.$domObj.on(d,".read-search-result li",function(d){console.log("[panelSearch.js] -- > 点击搜索历史"),a.close(),c.$domObj.trigger("search:click",parseFloat(b(this).attr("data-site")))})},i.prototype.open=function(){var a=this,b=a.opts;b.$domObj.show(),setTimeout(function(){e(b.$domObj[0]).set("top","0px").duration("0.3s").end()},10),b.api.getSearchHistory({},function(a){if(0!=a.search_history.length){var c=b.hisTempl(a.search_history);b.$domObj.find(".read-search-history").show().html(c)}},function(){})},i.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-search-result").hide(),b.$domObj.find(".read-search-history").hide(),e(b.$domObj[0]).set("top","-101%").duration("0.2s").end(),setTimeout(function(){b.$domObj.show()},200)},i.prototype.sendSearchOffline=function(a){var b=this,c=b.opts;"function"!=typeof gli_search_offline?b.sendSearchOnline(a):0!=a.length?(c.loading.open(),c.loading.setMsg(d.nowSearch),gli_search_offline({keyword:a},function(a){if(c.loading.close(),0!=a.length){c.$domObj.find(".read-search-history").hide();var b=c.searchResTempl(a);c.$domObj.find(".read-search-result").show().html(b)}},function(){c.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(console.log("%c [panelSearch] sendSearch--> 请输入搜索内容","color:red;"),b.dialog.setMsg(d.inputContent),b.dialog.open())},i.prototype.sendSearchOnline=function(a){var b=this,c=b.opts;0!=a.length?(c.loading.open(),c.loading.setMsg(d.nowSearch),c.api.search({keyword:a},function(e){var f=e.data;if(c.loading.close(),e.status)if(f.search_list.length>0){c.$domObj.find(".read-search-history").hide();var g=c.searchResTempl(f);c.$domObj.find(".read-search-result").show().html(g),c.$readerObj.attr("data-searchKword",a)}else b.dialog.setMsg(d.emptySearch),b.dialog.open();else b.dialog.setMsg(e.msg),b.dialog.open()},function(){c.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(b.dialog.setMsg(d.inputContent),b.dialog.open(),console.log("%c [panelSearch] sendSearch--> 请输入搜索内容","color:red;"))},i.prototype.delSearchHis=function(){var a=this,b=a.opts;b.api.delSearchHis({},function(){console.log("%c [panelSearch] 清除历史搜索成功","background:green;")},function(){})},i}(b,a,m,n,f),w=function(a,b){return{createElementByHtml:function(a){var b=document.createElement("div");return b.innerHTML=a,1==b.children.length?b.children[0]:b.childNodes},cloneElemnt:function(a){return a.nodeValue?document.createTextNode(a.nodeValue):this.createElementByHtml(a.outerHTML)},getElementChild:function(a){for(var c=a.childNodes||[],d=[],e=0;e<c.length;e++)"#text"===c[e].nodeName&&""===b.trim(c[e].nodeValue)||8!=c[e].nodeType&&d.push(c[e]);return d},getElementOutTag:function(a){if(a.nodeValue)return b.trim(a.nodeValue);var c="";if(a.innerHTML.length==a.nodeName.length){var d=a.outerHTML.indexOf(">"),e=a.outerHTML.substring(0,d);c=a.outerHTML.substr(d),c=c.replace(a.innerHTML,""),c=e+c,c=b.trim(c)}else c=b.trim(a.outerHTML.replace(a.innerHTML,""));return c},splitTextNode:function(a,c){if("#text"!=a.nodeName||""===b.trim(a.nodeValue))return!1;var d=b.trim(a.nodeValue);if(d.length<=1)return!1;c=c||d.length,c=2;for(var e=[],f=d.length,g=0;g<c;g++)e.push(d.substr(f/c*g,f/c+c*g));for(var h=document.createDocumentFragment(),g=0;g<e.length;g++){var i=document.createTextNode(e[g]);h.appendChild(i)}return a.parentNode.insertBefore(h,a),a.parentNode.removeChild(a),!0},splitTextTab:function(a){if(""===b.trim(a.nodeValue))return!1;var c=/(([\w_\.%]+)|([^\2]))/gi,d="";d=a.nodeValue.replace(c,function(a){return'<span class="reader-minNode">'+a+"</span>"});var e=document.createElement("span");return a.parentNode.insertBefore(e,a),a.parentNode.removeChild(a),e.outerHTML=d,!0},dealFootnote:function(a){for(var b=a.querySelectorAll("footnote"),c=null,d=null,e=0,f=b.length;e<f;e++)c=b[e].parentNode,d=document.createElement("SPAN"),d.classList.add("read-footnote-mark"),d.setAttribute("data-count",e+1),d.setAttribute("data-all",f),c.appendChild(d)},replaceImgSrc:function(a,b,c,d,e,f){for(var g=d.querySelectorAll("svg"),h=0,i=g.length;h<i;h++)g[h].setAttribute("width",0),g[h].setAttribute("height",0),g[h].removeAttribute("viewBox"),g[h].style.display="block";for(var j=d.querySelectorAll("image"),h=0,i=j.length;h<i;h++){var k=j[h].getAttribute("xlink:href")||"";j[h].src=k,j[h].setAttribute("src",k);var l=j[h].outerHTML.replace(/<image([^<>]*)><\/image>/gi,"<img$1>");$(j[h]).replaceWith($(l))}var m=d.querySelectorAll("img"),n=null,o="",p="",q="",r="",s=[],t=[];b-=5,c=.7*(c-5);for(var u=0,i=m.length;u<i;u++){if(n=m[u],r=n.getAttribute("type")||"",o=n.getAttribute("src")||"",""!=o?(s=o.split("/"),q=s[s.length-1],p=e+q,n.removeAttribute("src")):(q="",p=""),"font"!=r){n.setAttribute("data-src",a?p:o),n.setAttribute("data-old-src",o),n.setAttribute("data-index",u+1);var v=document.createElement("span");v.setAttribute("class","read-not-publish"),v.style.display="none",v.innerHTML="图片",this.insertAfter(v,n),t.push({gli_image_num:u+1,name:q,old_src:o,new_src:p,type:r})}var w=parseInt(n.getAttribute("data-width"))||0,x=parseInt(n.getAttribute("data-height"))||0;n.removeAttribute("width"),n.removeAttribute("height"),"font"==r?(n.setAttribute("data-src",o),n.style.width="",n.style.height="",n.style.maxWidth="",n.style.maxHeight=f+"px",w=w*f/x,x=f,w=w<f?f:w,n.style.width=w+"px",n.style.height=x+"px"):isNaN(w)||0==w?(n.style.width=.3*b+"px",n.style.height=.5*c+"px"):(w>b&&(x=x*b/w,w=b),x>c&&(w=w*c/x,x=c),n.style.width=w+"px",n.style.height=x+"px")}return t},replaceVideoSrc:function(a,b,c){var d=c.querySelectorAll("video"),e=null,f=null,g="",h="",i="",j=[],k=[];a-=5,b-=5;for(var l=0,m=d.length;l<m;l++){e=d[l],f=e.querySelector("source"),g=f.getAttribute("src")||"",i=f.getAttribute("type")||"",""!=g&&(j=g.split("/"),h=e.getAttribute("data-name")||j[j.length-1]),f.removeAttribute("src"),f.setAttribute("data-src",g),f.setAttribute("data-index",l+1),k.push({gli_video_num:l+1,name:h,src:g,type:i});var n=parseInt(e.getAttribute("data-width"))||0,o=parseInt(e.getAttribute("data-height"))||0;if(isNaN(n)||0==n){var p=a>b?b:a;e.setAttribute("width",p+"px"),e.setAttribute("height",.75*p+"px")}else n>a&&(o=o*a/n,n=a),o>b&&(n=n*b/o,o=b),e.setAttribute("width",n+"px"),e.setAttribute("height",o+"px")}return k},loadImgSrc:function(a){for(var b=a.querySelectorAll("img"),c=null,d="",e=0;e<b.length;e++)c=b[e],d=c.getAttribute("data-src"),c.removeAttribute("data-src"),c.setAttribute("src",d)},insertAfter:function(a,b){var c=b.parentNode;c.lastChild==b?c.appendChild(a):c.insertBefore(a,b.nextSibling)},doManuscriptPic:function(a){for(var b=a.getElementsByTagName("img"),c=null,d=0,e=b.length;d<e;d++)c=b[d],"exp"==c.getAttribute("type")&&(c.setAttribute("islast","1"),c.nextElementSibling&&"IMG"==c.nextElementSibling.nodeName&&"exp"==c.nextElementSibling.getAttribute("type")&&c.setAttribute("islast","0"),"#text"==c.nextSibling.nodeName&&0!=c.nextSibling.nodeValue.replace(/(^\s*)|(\s*$)/g,"").length&&c.setAttribute("islast","1"))}}}(b,c),x=function(a,b){var c=function(a){console.log("[ProgressBar] -> 构造函数!");var c={$domObj:null,barWrapColor:"",barColor:"rgba(236, 106, 33, 1)",styleVal:"bottom: 0",height:"2px",value:0};this.opts=b.extend(!0,{},c,a),this._init()};return c.prototype._init=function(){this.opts;return!!this._check()&&void this._setLayout()},c.prototype._check=function(){var a=this.opts,b=!0;return 0===a.$domObj.length&&(console.warn("[ProgressBar]: 请传入合法 dom 选择器!"),b=!1),b},c.prototype._setLayout=function(){var a=this.opts,c=a.value/100||0,d=b('<div class="read-progressbar" style="height: 100%">');this.$BarWrapObj=b('<div class="read-progressbar-wrap" style="width: 100%; position: absolute; '+a.styleVal+'">'),this.$BarWrapObj.css("background-color",a.barWrapColor),this.$BarWrapObj.css("height",a.height),d.css("background-color",a.barColor),d.css("width",c+"%"),this.$BarWrapObj.append(d),a.$domObj.append(this.$BarWrapObj)},c.prototype.setValue=function(a){var b=this.opts;a=a>100?100:a,b.value=a,this.$BarWrapObj.find(".read-progressbar").css("width",a+"%")},c.prototype.open=function(){var a=this.opts;a.value=0,this.$BarWrapObj.show()},c.prototype.close=function(){this.opts;this.$BarWrapObj.hide()},c.prototype.destroy=function(){this.$BarWrapObj.remove()},c}(b,a),y=function(a,b,c,d,e,f,g){var h=function(a){var b={templHtml:"",$domObj:null,$countPageObj:null,$readerObj:null,isMobile:!0,getHtml:"",pageW:0,pageH:0,auto:!1,step:4,state:0,direction:"next",pages:[],allPages:[],useEpubStyle:!1,totalLen:0,chapts:[],chapt_index:0,page_index:0,wordId:0,alreadyState:0,turnMode:0,noCountState:0,isPretreat:0,downloadPath:"",pageColumn:1,useProbation:!1,useManuscriptPic:!1,readerMode:"1"};this.opts=e.extend(!0,{},b,a),this.wordBreakChar="》、'，,；;/.。_>）)？?~！!\"”",this._init()};return h.prototype._init=function(){var a=this.opts;this._setLayout(),a.auto&&this.excutePaging()},h.prototype._setLayout=function(){var a=this.opts,b=_.template(a.templHtml),f=b();a.$countPageObj=e(f),a.$readerObj.append(a.$countPageObj),2==a.pageColumn&&(a.$countPageObj.addClass("read-two-page"),a.$readerObj.find(".read-selector-main").addClass("read-two-page")),a.$domObj=a.$countPageObj.find(".read-countpage"),a.pageW=a.$countPageObj.find(".read-selector-countpage .read-countpage-content").width(),a.pageH=a.$countPageObj.find(".read-selector-countpage .read-countpage-content").height(),this.ProgressBarObj=new c({$domObj:a.$readerObj.find(".read-selector-main .read-footer .read-progressbar")}),this.DialogObj=new d({$wrapDomObj:a.$readerObj,isMobile:a.isMobile,clientType:a.clientType})},h.prototype._check=function(){var a=this.opts,b=!0;return""===a.getHtml&&(console.log("[countPage.js]-->传入分页数据错误！"),b=!1),b},h.prototype.setChapterData=function(a){var b=this.opts;b.getHtml=a.getHtml,b.pages=a.pages,b.chapt_index=a.index,b.wordId=0,b.isPretreat=a.isPretreat||0,b.alreadyState=0,b.noCountState=0,b.pages.length&&(b.noCountState=1)},h.prototype.excutePaging=function(){var a=this,c=a.opts;if(!a._check())return!1;if(c.state)return console.log("[countPage.js] --> excutePaging 正在分页！"),!1;c.pages=[],c.alreadyState=0,console.time("countPage_times"),a.ProgressBarObj.open(),c.$countPageObj.show(),c.$domObj.html(c.getHtml),c.isPretreat||(console.time("pretreat_times"),a._pretreat(c.$domObj[0]),c.getHtml=c.$domObj.html(),console.timeEnd("pretreat_times"));var d=!1,e=/<\/?math>/;if(e.test(c.getHtml)&&"undefined"!=typeof MathJax){var f=b.cloneElemnt(c.$domObj[0]);MathJax.Hub.Config({showProcessingMessages:!1,messageStyle:"none",showMathMenu:!1,
showMathMenuMSIE:!1}),MathJax.Hub.Queue(["Typeset",MathJax.Hub]),d=!0,MathJax.Hub.Queue(function(){if(d){for(var b=c.$domObj[0].querySelectorAll(".MathJax_SVG"),e=f.querySelectorAll("math"),g=0;g<b.length;g++){var h=document.createElement("span");h.style.width=b[g].offsetWidth+"px",h.style.height=b[g].offsetHeight+"px",h.style.display="inline-block",h.setAttribute("class","reader-MathJax reader-minNode"),e[g].parentNode.insertBefore(h,e[g]),h.appendChild(e[g])}c.$domObj.html(f.innerHTML),a._pagingMain(),d=!1}})}else a._pagingMain()},h.prototype._getStyle=function(){var a=this.opts,b=a.$domObj.find("style"),c=b.clone();a.chapts[a.chapt_index].styleObj=c,b.remove(),this._setStyle()},h.prototype._setStyle=function(){var a=this.opts;if(a.useEpubStyle){var b=a.$readerObj.find(".read-style-container");0==b.length&&(b=e("<div class='read-style-container'>")),a.$readerObj.prepend(b.html(a.chapts[a.chapt_index].styleObj))}},h.prototype._pagingMain=function(){var a=this,b=a.opts,c=b.chapts[b.chapt_index];b.state=1;var d=0,e=0,f=!1,g=[],h=8,i=document.createElement("div");if(i.innerHTML=b.$domObj.html(),b.$domObj.html(""),b.$domObj[0].appendChild(i),console.time("getPrepareData_times"),"1"==b.readerMode)for(var j=i.querySelectorAll("img"),k=0,l=j.length;k<l;k++)"exp"==j[k].getAttribute("type")&&(j[k].style.display="none");if("2"==b.readerMode){for(var j=i.querySelectorAll("img"),k=0,l=j.length;k<l;k++)"exp"==j[k].getAttribute("type")&&(j[k].style.display="block",g.push(j[k]));if(0==g.length){var m=document.createElement("div");m.innerText="本章无原稿数据！",g.push(m)}}else g=a._getPrepareData({domObj:i,pageH:b.pageH,rate:h});console.timeEnd("getPrepareData_times"),b.$domObj.html(""),i.innerHTML="",a.LOOP_STATUS=!1,a.LOOP=setInterval(function(){if(a.LOOP_STATUS)return!1;if(g.length>0){i.appendChild(g[0]);try{a.LOOP_STATUS=!0,f=!1,f=a._traverseElem(i,b.$domObj[0]),a.LOOP_STATUS=!1}catch(a){console.error("countPage:"+a)}f&&(a._splitTab(b.$domObj[0]),e=b.$domObj.text().replace(/\s/g,"").length,b.pages.push({html:b.$domObj.html(),txt:b.$domObj.text(),textlen:e}),b.$domObj.html(""),d+=e,a.ProgressBarObj.setValue(Math.floor(100*d/c.textlen))),i.innerHTML&&0!==i.innerHTML.replace(/\s/g,"").length||(i.innerHTML="",g.shift()),("next"===b.direction||b.turnMode)&&f&&b.pages.length>0&&b.pages.length%b.step===0&&a.readyData()}else b.$domObj.text()&&(a._splitTab(b.$domObj[0]),e=b.$domObj.text().replace(/\s/g,"").length,b.pages.push({html:b.$domObj.html(),txt:b.$domObj.text(),textlen:e}),d+=e,a.ProgressBarObj.setValue(Math.floor(100*d/c.textlen))),2==b.pageColumn&&b.pages.length%2==1&&b.pages.push({html:"",txt:"",textlen:0}),a.ProgressBarObj.close(),i.innerHTML="",b.$domObj.html(""),b.$countPageObj.hide(),b.state=0,a.readyData(),a._finishPaging(),console.timeEnd("countPage_times"),clearInterval(a.LOOP)},0)},h.prototype._splitTab=function(a){for(var c=this.opts,d=b.getElementChild(a),e=/(([\w_\.%]+)|([^\2]))/gi,f="",g=0,h=d.length;g<h;g++)if("#text"===d[g].nodeName){f=d[g].nodeValue.replace(e,function(a){return c.wordId+=1,'<span data-id="'+c.wordId+'" class="read-filterSpan">'+a+"</span>"});var i=document.createElement("span");d[g].parentNode.replaceChild(i,d[g]),i.outerHTML=f}else"string"==typeof d[g].className&&d[g].className.indexOf("reader-minNode")!==-1?(c.wordId+=1,d[g].classList.add("read-filterSpan"),d[g].setAttribute("data-id",c.wordId),d[g].classList.remove("reader-minNode")):"svg"!==d[g].nodeName&&"IMG"!==d[g].nodeName&&"VIDEO"!==d[g].nodeName&&"FOOTNOTE"!==d[g].nodeName&&d[g].className.indexOf("read-filterSpan")===-1&&d[g].className.indexOf("read-not-publish")===-1&&"TABLE"!==d[g].nodeName&&this._splitTab(d[g])},h.prototype._pretreat=function(a){var c=this.opts;this._getStyle(),this._setBookGlossary(a);var d=c.chapts[c.chapt_index];d.images=[],d.videos=[],d.manuScripPics=[];for(var f=a.querySelectorAll("p"),g=0,h=f.length;g<h;g++)if(f[g].innerHTML.trim()){var i=document.createElement("span");i.setAttribute("class","read-placeholder read-not-publish"),f[g].insertBefore(i,f[g].firstChild)}b.dealFootnote(a);var j=b.replaceImgSrc(c.isClient,c.pageW,c.pageH,a,c.downloadPath+"images/",c.fontSize),k=b.replaceVideoSrc(c.pageW,c.pageH,a);if(c.useManuscriptPic){b.doManuscriptPic(a);for(var l=[],m=0,n=j.length;m<n;m++)"exp"==j[m].type&&l.push(j[m]);d.manuScripPics=l}if(c.isClient)for(var o=0,p=j.length;o<p;o++)c.$domObj.trigger("countpage:downloadPhoto",j[o]);0==c.chapt_index&&e(a).text().trim().length<3&&e(a).find("img").eq(0).each(function(){e(this).css({position:"absolute",width:"",height:"","max-width":c.pageW+"px","max-height":c.pageH+"px",top:"50%",left:"50%","-webkit-transform":"translateX(-50%) translateY(-50%)",display:"block"}),e(this).attr("data-cover","1")}),d.images=j,d.videos=k,d.textlen+=2*j.length,c.totalLen+=2*j.length,this._packageTab(a),c.isPretreat=1},h.prototype._packageTab=function(a){for(var b=this.opts,c=(b.chapts[b.chapt_index],"sup,sub"),d=a.querySelectorAll(c),e=0,f=d.length;e<f;e++){var g=document.createElement("span");g.setAttribute("class","read-special-tab reader-minNode"),d[e].parentNode.insertBefore(g,d[e]),g.appendChild(d[e])}},h.prototype._traverseElem=function(a,c){for(var d=this,e=d.opts,f=b.getElementChild(a),g=null,h=0,i=0,j=0;j<f.length;j++){try{g=b.cloneElemnt(f[j]),c.appendChild(g)}catch(a){console.log("添加节点-ERROR:"+a)}if("NZZP"==f[j].nodeName)return f[j].parentNode.removeChild(f[j]),f.splice(0,1),!0;if(e.useManuscriptPic&&"IMG"==f[j].nodeName&&"exp"==f[j].getAttribute("type")){if(console.log("%c 原稿图:"+f[j].getAttribute("data-src"),"background:yellow;"),"1"!=e.readerMode){if("2"==e.readerMode)return f[j].parentNode.removeChild(f[j]),f.splice(0,1),!0;if("1"==f[j].getAttribute("islast"))return f[j].parentNode.removeChild(f[j]),f.splice(0,1),!0;continue}g.style.display="none"}if(h=e.$domObj[0].offsetHeight,i=e.$domObj[0].offsetWidth,!(h<=e.pageH&&i<=e.pageW)){if("TABLE"==f[j].nodeName){var k=(f[j],e.pageH),l=k-(h-g.offsetHeight);g.offsetHeight||0;if(l<=.4*k)c.removeChild(g);else{var m=g.parentNode.getAttribute("class")||"";g.parentNode.setAttribute("class",m+" read-tbl-big-data"),g.setAttribute("zoom","1"),g.setAttribute("data-resth",l-20),f[j].parentNode.removeChild(f[j])}return!0}if(g.parentNode.removeChild(g),"#text"===f[j].nodeName){if(b.splitTextTab(f[j])){f=b.getElementChild(a),j--;continue}}else{if("string"==typeof f[j].className&&f[j].className.indexOf("reader-MathJax")!==-1)return!0;if("VIDEO"==f[j].nodeName)return!0}if("reader-minNode"!==f[j].className&&b.getElementChild(f[j]).length>0){var n=b.createElementByHtml(b.getElementOutTag(f[j]));return c.appendChild(n),this._traverseElem(f[j],n)}return"reader-minNode"===g.className&&this.wordBreakChar.indexOf(g.innerText)!==-1&&(f[j].style.width="5px",f[j].style.float="right",c.appendChild(f[j])),!0}f[j].parentNode.removeChild(f[j]),f.splice(0,1),j--}return!1},h.prototype._getPrepareData=function(a){for(var b=[],c=a.domObj,d=a.pageH,e=a.rate,f=a.pageH*e,g=null,h=0,i=c.childNodes,j=null,k=0,l=i.length;k<l;k++)if(g=i[k],h=g.offsetHeight||0,h>f&&"TABLE"!=g.nodeName&&"IMG"!=g.nodeName&&"P"!=g.nodeName){j=this._getPrepareData({domObj:g,pageH:d,rate:e});for(var m=0,n=j.length;m<n;m++)j[m].id=j[m].id+"_"+g.id+"_"+m,b.push(j[m])}else b.push(g);return b},h.prototype.getPagingData=function(){var a=this.opts,b=a.chapts[a.chapt_index].images||[];return{pages:a.pages,images:b,html:a.getHtml,isPretreat:1}},h.prototype.begin=function(a){var b=this.opts;b.totalLen=a.totalLen,b.chapts=a.chapts,b.downloadPath=a.path,b.chapt_index=a.chapt_index,b.turnMode=1;var c=a.progressData.progress;c>0?this.turnPageByPerc(c):(b.page_index=0,this.turnPage("next")),this._turnPageByPerc=this.turnPageByPerc},h.prototype.turnChapter=function(a){var b=this.opts;b.chapt_index>a?b.direction="prev":b.direction="next",b.chapt_index=a,b.page_index=1,b.turnMode=2,this._getContent()},h.prototype.turnPage=function(a){var b=this,c=b.opts;if(c.direction=a||c.direction,"prev"===a?(c.page_index-=2*c.pageColumn-1,c.page_index=c.page_index<0?0:c.page_index):c.page_index+=1,c.pages.length)0===c.page_index||c.page_index>c.pages.length?b._crossChapt():b._showPage();else{for(;!c.chapts[c.chapt_index].chapter_status;)if(c.chapt_index+=1,!c.chapts[c.chapt_index]){c.chapt_index-=1;break}b._getContent()}},h.prototype._crossChapt=function(){var a=this,b=a.opts,c=b.chapts,d=b.chapt_index,e=!0,f="";if(0===b.page_index){for(b.chapt_index-=1;b.chapt_index>=0&&!c[b.chapt_index].chapter_status;)b.chapt_index-=1,e=!1;if(b.chapt_index<0)return b.chapt_index=d,b.page_index=b.pageColumn,f=0==d?g.firstPage:g.testReadOver,a.DialogObj.setMsg(f),a.DialogObj.open(),console.log("[countPage.js] --> 没有数据，已经不能继续向前翻页了"),!1;a._getContent()}else{for(b.chapt_index+=1;b.chapt_index<c.length&&!c[b.chapt_index].chapter_status;)b.chapt_index+=1,e=!1;if(b.chapt_index===c.length)return b.chapt_index=d,b.page_index=b.pages.length,d==c.length-1?(a.DialogObj.setMsg(g.lastPage),a.DialogObj.open()):e||b.$domObj.trigger("countpage:noright"),console.log("[countPage.js] --> _crossChapt, 没有数据，已经不能继续向后翻页了"),!1;b.page_index=1,a._getContent()}},h.prototype.searchChaptIndex=function(a){for(var b=this.opts,c=b.chapts,d=0,e=c.length;d<e&&c[d].chapter_id!=a;d++);return d},h.prototype.getPageIndex=function(a){var b=this.opts,c=b.chapt_index,d=b.page_index,e=0,f=0,g=0,h=0,i=0,j=b.allPages;void 0!=a&&(c=a,d=1),j=b.allPages.length?b.allPages:b.pages,e=j.length;for(var k=0;k<e;k++)f+=j[k].textlen;g=parseInt(e*b.totalLen/f);for(var l=0;l<c;l++)i=b.chapts[l].pages?b.chapts[l].pages.length:Math.ceil(e*b.chapts[l].textlen/f),h+=i;return h+=d,{totalPage:g,currPage:h}},h.prototype.turnPageById=function(a){var b=this.opts,c=0,d=!0,e=null;a=a%2?a+b.pageColumn-1:a;for(var f=0,g=b.chapts.length;f<g;f++){if(e=this.getPageIndex(f),e.currPage+=b.pageColumn-1,e.currPage>=a){c=e.currPage==a?f:f-1,void 0==b.chapts[c].pages&&(d=!1);break}if(void 0==b.chapts[f].pages){d=!1;break}}if(d)b.chapt_index=c,b.pages=b.chapts[c].pages,b.page_index=a-this.getPageIndex(c).currPage,0==b.page_index?b.page_index=1:b.page_index=b.page_index%2?b.page_index:b.page_index+1-b.pageColumn,this._showPage();else if(e=this.getPageIndex(),e.currPage!=a){var h=a/e.totalPage;this.turnPageByPerc(h)}},h.prototype.getHeadPerc=function(a){for(var b=this.opts,c=0,d=0,e=void 0!=a?a:b.page_index,f=0;f<b.chapt_index;f++)c+=b.chapts[f].textlen;for(var g=0;g<e-1;g++)c+=b.pages[g].textlen;return d=(c/b.totalLen).toFixed(4),d>.9995&&(d=1),d},h.prototype.getFootPerc=function(){for(var a=this.opts,b=0,c=0,d=0;d<a.chapt_index;d++)b+=a.chapts[d].textlen;for(var e=0,f=a.page_index;e<f;e++)b+=a.pages[e].textlen;return c=(b/a.totalLen).toFixed(4),c>.9995&&(c=1),c},h.prototype.turnPageByPerc=function(a){var b=this,c=b.opts,d=0;a=a>1?1:a,a=a<0?0:a,c.pages.length&&(d=this.getFootPerc()),d>a?c.direction="prev":c.direction="next";for(var e=0,f=c.totalLen,h=0,i=0,j=c.chapts.length;i<j;i++)if(h+=c.chapts[i].textlen,a<=(h/f).toFixed(4)){if(!c.chapts[i].chapter_status)return this.DialogObj.setMsg(g.testReadOver),this.DialogObj.open(),!1;e=i,h-=c.chapts[i].textlen;break}if(e===c.chapt_index&&c.pages.length>0){for(var k=c.pages,l=0,j=k.length;l<j;l++)if(h+=k[l].textlen,a<=(h/f).toFixed(4)){c.page_index=l+1,2==c.pageColumn&&c.page_index%2==0&&(c.page_index-=1),b._showPage();break}}else c.chapt_index=e,b.currLen=h,b.perc=a,b.fastPagingState=1,b._getContent()},h.prototype._getContent=function(){var a=this.opts;this._setStyle(),a.$domObj.trigger("countpage:getChapterContent",a.chapt_index)},h.prototype.readyData=function(){var a=this.opts,b=this;if(b.fastPagingState){for(var c=b.currLen,d=b.perc,e=0,f=a.pages.length;e<f;e++)if(c+=a.pages[e].textlen,d<=(c/a.totalLen).toFixed(4)){a.page_index=e+1,2==a.pageColumn&&a.page_index%2==0&&(a.page_index-=1),b.fastPagingState=0,a.alreadyState=1;break}}else a.alreadyState+=1,"prev"===a.direction&&(a.turnMode?a.page_index=1:a.page_index=a.pages.length-a.pageColumn+1,a.alreadyState=1);"function"==typeof this.interfaceFun&&1===a.alreadyState&&this.interfaceFun(),1===a.alreadyState&&(a.noCountState||a.$domObj.trigger("countpage:already"),b._showPage())},h.prototype._finishPaging=function(){var a=this.opts;a.allPages=f.pushArray(a.allPages,a.pages),a.$domObj.trigger("countpage:finish",a.chapt_index)},h.prototype._showPage=function(){var a=this.opts,b=a.chapts[a.chapt_index].chapter_name,c=a.chapts[a.chapt_index].chapter_id,d=this.getHeadPerc();if(a.useProbation&&parseFloat(d)>.2)return this.DialogObj.setMsg(g.testReadOver),this.DialogObj.open(),!1;var e=this.getFootPerc(),f=(100*e).toFixed(2),h=a.pages[a.page_index-1].html,i=this.getPageIndex(),j={chapt_index:a.chapt_index,page_index:a.page_index,chapterName:b,chapterId:c,chapterContent:h,pagePerc:f+"%",startPageOffset:d,endPageOffset:e,direction:a.direction,turnMode:a.turnMode,totalPage:i.totalPage,currPage:i.currPage};2==a.pageColumn&&(a.page_index+=1,j.page_index=a.page_index,j.secondPage=a.pages[a.page_index-1].html,e=this.getFootPerc(),j.firstPagePerc=f+"%",f=(100*e).toFixed(2),j.pagePerc=f+"%",j.endPageOffset=e),a.$domObj.trigger("countpage:showPage",j),a.turnMode=0,a.direction="next"},h.prototype.setFontSize=function(a){var b=this.opts,c={oldValue:"",newValue:""};if(c.oldValue="read-size-"+a.oldValue,c.newValue="read-size-"+a.newValue,b.$domObj.parents(".read-content").removeClass(c.oldValue),b.$domObj.parents(".read-content").addClass(c.newValue),b.fontSize=parseInt(b.$domObj.parents(".read-content").css("font-size")),"function"==typeof this._turnPageByPerc){b.turnMode=1;var d=this.getFootPerc();b.pages=[],b.allPages=[],this._turnPageByPerc(d)}},h.prototype.setFontFamily=function(a){var b=this.opts,c={oldValue:"",newValue:""};if(c.oldValue="read-font-family-"+a.oldValue,c.newValue="read-font-family-"+a.newValue,b.$domObj.parents(".read-content").removeClass(c.oldValue),b.$domObj.parents(".read-content").addClass(c.newValue),"function"==typeof this._turnPageByPerc){b.turnMode=1;var d=this.getFootPerc();b.pages=[],b.allPages=[],this._turnPageByPerc(d)}},h.prototype.setReaderMode=function(a){var b=this.opts;b.readerMode=a,b.turnMode=1,b.page_index=1,b.pages=[],b.allPages=[],this.excutePaging()},h.prototype._setBookGlossary=function(a){var b=this.opts;if(b.glossaryData&&b.glossaryData.length>0){for(var c=a.innerHTML,d=b.glossaryData,e=0,f=d.length;e<f;e++){var g=d[e].keyword.trim();if(g){var h=new RegExp(g,"gi");c=c.replace(h,function(a){return'<span data-glossary="'+e+'" class="read-glossary-bg">'+a+"</span>"})}}a.innerHTML=c}},h.prototype.changeColumn=function(){var a=this.opts,b=0;a.turnMode=1,2==a.pageColumn?(b=(parseFloat(this.getHeadPerc())+parseFloat(this.getFootPerc()))/2,a.$countPageObj.addClass("read-two-page"),a.$readerObj.find(".read-selector-main").addClass("read-two-page")):(b=parseFloat(this.getHeadPerc()),a.$countPageObj.removeClass("read-two-page"),a.$readerObj.find(".read-selector-main").removeClass("read-two-page")),a.$countPageObj.show(),a.pageW=a.$countPageObj.find(".read-selector-countpage .read-countpage-content").width(),a.pageH=a.$countPageObj.find(".read-selector-countpage .read-countpage-content").height(),a.$countPageObj.hide(),a.pages=[],a.allPages=[],this.turnPageByPerc(b)},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h}(b,w,x,m,a,c,n),z=function(a,b){var c=function(a){var c={domSelector:"",width:"2.2em",height:"2.2em",fillColor:"#1b88ee",fontColor:"#fff",value:0,useProgress:!1,$domObj:null,$progressObj:null,fontSize:"0.5em",msg:"正在加载...",gifUrl:"",svgUrl:"",svg:"",maskDomStyle:"position: absolute; z-index:9999; background-color: rgba(119, 119, 119, 0.6); width: 100%; height: 100%; top: 0; left: 0; display:none"};this.opts=b.extend(!0,{},c,a),"PC"==this.opts.clientType&&(this.opts.width="80px",this.opts.height="80px",this.opts.fontSize="18px"),this.opts.svg='<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"width="'+this.opts.width+'" height="'+this.opts.height+'" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><path fill="'+this.opts.fillColor+'" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"><animateTransform attributeType="xml"attributeName="transform"type="rotate"from="0 25 25"to="360 25 25"dur="0.6s"repeatCount="indefinite"/></path></svg>',this._init()};return c.prototype._init=function(){var a=this.opts;return a.$domObj=b(a.domSelector),!!this._check()&&void this._setLayout()},c.prototype._check=function(){var a=this.opts;return 0!==a.$domObj.length||(console.warn("[plugLoading]--> _check : 没有传入dom"),!1)},c.prototype._setLayout=function(){var a=this.opts,c=b("<div />");a.$loadingBg=c,a.$domObj.append(c.attr("style",a.maskDomStyle));var d,e=b("<div role='loader-main' style='width:100%; text-align: center; position: absolute; top: 50%; transform: translateY(-50%);-webkit-transform: translateY(-50%);'/>");a.svgUrl?(d=b("<embed type='image/svg+xml' />"),d.attr("src",a.svgUrl).attr("width",a.width+"px").attr("height",a.height+"px")):a.gifUrl?(d=b("<img />"),d.attr("src",a.gifUrl).attr("width",a.width+"px").attr("height",a.height+"px")):(d=b("<div />"),d.attr("width",a.width+"px").attr("height",a.height+"px"),d.append(a.svg));var f=b("<p style='width:100%; text-indent: 0; text-align: center;margin: 0; font-size:"+a.fontSize+";' />");f.css("color",a.fontColor),a.useProgress&&f.html(a.msg+"0%").show(),a.$progressObj=f,e.append(d).append(f),a.$loadingBg.append(e)},c.prototype.close=function(){console.log("[Loader]--> close!");var a=this.opts;a.value=0,a.$loadingBg.hide()},c.prototype.open=function(a){console.log("[Loader]--> open!");var b=this.opts;b.msg=""!=a&&null!=a?a:b.msg,b.$progressObj.html(b.msg),b.$loadingBg.show()},c.prototype.setMsg=function(a){console.log("[Loader]--> setMsg!");var b=this.opts;b.msg=""!=a&&null!=a?a:b.msg,b.$progressObj.html(b.msg)},c.prototype.setValue=function(a){console.log("[Loader]--> setValue!");var b=this.opts;b.useProgress&&b.$progressObj.html(b.msg+a+"%")},c.prototype.destroy=function(){console.log("[Loader]--> destroy!"),this.opts.$loadingBg.remove()},c}(b,a),A=function(a,b){var c=function(a){console.log("[panelPrompt.js] --> 构造函数!");var c={$wrapObj:null,$domObj:null,isMobile:!0,templHtml:"<div class='read-comm-panel read-comm-mask read-sel-prompt-panel' />",contentSet:[],_currentIdx:0,_defaultTxt:"提示面板!"};this.opts=b.extend(!0,{},c,a),this._init()};return c.prototype._init=function(){return this._check()?(this._renderLayout(),void this._bindEvent()):void console.error("[panelPrompt.js] -->请确认传入参数 是否正确! ")},c.prototype._check=function(){var a=this.opts,b=!0;return a.$wrapObj&&0!==a.$wrapObj.length&&0!==a.contentSet.length||(b=!1),b},c.prototype._renderLayout=function(){var a=this.opts;a.$domObj=b(a.templHtml),a.$wrapObj.append(a.$domObj)},c.prototype._bindEvent=function(){var a=this.opts,b=this,c=a.isMobile?"tap":"click";a.$domObj.on(c,function(){b.close()})},c.prototype.open=function(a){var b=this.opts,c=b.contentSet.length||0,d="",e="undefined"==typeof a||0==c||a<0?0:a;d=b.contentSet[e],b.$domObj.html(d),b.$domObj.show()},c.prototype.close=function(){var a=this.opts;a.$domObj.hide(),a.$domObj.html(a._defaultTxt)},c}(b,a),B=function(a,b,c,d,e,f){var g=function(a){var b={$domObj:null,$readerObj:null,isMobile:!0,coprData:null,black_time:3e4,black_timeMax:12e4,black_timeNow:0,api:null};this.opts=e.extend(!0,{},b,a),this._init(),this.copyrightMask=this._setMask};return g.prototype._init=function(){var a=(this.opts,this);this._setLayout(),this.getCoprParam(function(){a.run()},"first")},g.prototype._setLayout=function(){var a=this.opts,b='<div class="read-comm-panel read-copyright-watermark"><div class="read-watermark"></div><div class="read-mask"></div><div class="read-phoneblack"><div class="read-countdown"></div></div></div>';a.$domObj=e(b),a.$readerObj.append(a.$domObj),a.$domObj.find(".read-mask").on("click",function(){e(this).css("display","none")})},g.prototype.getCoprParam=function(a,b){var c=this.opts,d=this,e=b||"nofirst";c.api.get_copyright({img_type:"base64"},function(b){b.watermark.imgUrl="data:image/png;base64,"+b.watermark.imgUrl,c.coprData=b,d._saveCoprParam(),a()},function(b){"first"===e?c.$domObj.trigger("Copyright:getCoprParam"):a()})},g.prototype.setCoprParam=function(a,b){var c=this.opts,d=this,e=c.coprData;return!!e.status&&void c.api.set_copyright({operate_type:a,operate_val:b},function(){console.log("[copyright.js] ->setCoprParam 成功:")},function(c){"copy"===a&&b&&(e.copy_long!==-1&&(e.copy_long-=b),e.copy_times!==-1&&(e.copy_times-=1),d._saveCoprParam()),console.log("[copyright.js] ->setCoprParam 出错:"+c)})},g.prototype.run=function(){var a=this.opts;this._setWatermark(),a.coprData.status&&(this._intercept(),this._interfaceFun())},g.prototype._saveCoprParam=function(){var a=this.opts;a.$domObj.trigger("Copyright:saveCoprParam",a.coprData)},g.prototype._setWatermark=function(){var a=this.opts,b=a.coprData.watermark;if(b.status){var c=a.$domObj.find(".read-watermark");c.css("background-image","url("+b.imgUrl+")"),c.css("opacity",b.opacity/100),c.css("display","block")}},g.prototype._intercept=function(){var b=this.opts,c=this;b.$readerObj[0].oncontextmenu=function(){return c._pressRbutton()},document.onkeydown=function(){return event.ctrlKey&&67==a.event.keyCode?c._pressCtrlC():event.ctrlKey&&80==a.event.keyCode?c._pressCtrlP():event.ctrlKey&&(event.altKey||18==a.event.keyCode)?c._pressCtrlAlt():void 0},b.coprData.print_flg||(a.onblur=function(){c._setMask("worked")}),b.isMobile&&b.$readerObj.css({"-webkit-user-select":"none","-ms-user-select":"none"})},g.prototype._interfaceFun=function(){var a=this.opts.coprData,b=this;if("undefined"!=typeof gli_capture_cc&&"function"==typeof gli_capture_cc){var c=this._pressCtrlC;gli_capture_cc(c)}if("undefined"!=typeof gli_capture_cp&&"function"==typeof gli_capture_cp){var d=this._pressCtrlP;gli_capture_cp(d)}if("undefined"!=typeof gli_capture_ctrl_alt&&"function"==typeof gli_capture_ctrl_alt){var e=this._pressCtrlAlt;gli_capture_ctrl_alt(e)}if("undefined"!=typeof gli_capture_rbutton&&"function"==typeof gli_capture_rbutton){var f=this._pressRbutton;gli_capture_rbutton(f)}if("undefined"!=typeof gli_capture_foreground&&"function"==typeof gli_capture_foreground){var g=this._loseFocus;gli_capture_foreground(g)}"undefined"!=typeof gli_photo_change&&"function"==typeof gli_photo_change&&(a.screenshot_flg||gli_photo_change(function(){b._phoneblack()},!0)),"undefined"!=typeof gli_capture_clipboard_change&&"function"==typeof gli_capture_clipboard_change&&(a.screenshot_flg||gli_capture_clipboard_change(function(a){b._clipboardChange(a)}))},g.prototype._pressCtrlC=function(){return!1},g.prototype._pressCtrlP=function(){var a=this.opts.coprData;return a.print_flg?("undefined"!=typeof gli_web_print&&"function"==typeof gli_web_print&&gli_web_print(),this.setCoprParam("print",1),!0):(this.setCoprParam("print",0),!1)},g.prototype._pressCtrlAlt=function(){var a=this.opts.coprData;return!!a.screenshot_flg||(this._setMask("worked"),!1)},g.prototype._pressRbutton=function(){return!1},g.prototype._loseFocus=function(a){var b=this.opts.coprData;b.print_flg||a||this._setMask("worked")},g.prototype._setMask=function(a){var b=this.opts,c=b.$domObj.find(".read-mask");"worked"===a?c.css("display","block"):c.css("display","none")},g.prototype._phoneblack=function(){var a=this.opts;this.setCoprParam("screenshot",1);var c=b.getTimestamp(!0),d=parseInt(localStorage.getItem("timeRecord"))||c;localStorage.setItem("timeRecord",c),localStorage.setItem("black_timeNow",localStorage.getItem("black_timeNow")||a.black_time),c-d>6e5&&localStorage.setItem("black_timeNow",a.black_time);var e=parseInt(localStorage.getItem("black_timeNow"));if(e>a.black_timeMax)return a.$domObj.trigger("Copyright:exitReaderCb"),!1;var f=a.$domObj.find(".read-phoneblack");a.$domObj.find(".read-countdown");f.css("display","block"),a.black_timeNow=e,localStorage.setItem("black_timeNow",2*parseInt(e)),this._countDown(),setTimeout(function(){f.css("display","none")},e)},g.prototype._countDown=function(){var a=this,c=a.opts,d=localStorage.getItem("timeRecord"),e=(parseInt(d)+c.black_timeNow-b.getTimestamp(!0))/1e3,f=c.$domObj.find(".read-countdown");f.html("您有截屏操作，我们正在对您进行黑屏处理，还有"+e.toFixed(0)+"秒恢复正常！"),e>=0?setTimeout(function(){a._countDown.call(a)},1e3):gli_photo_change(function(){a._phoneblack()},!0)},g.prototype._clipboardChange=function(a){var b=this,c=a;"bitmap"===c&&(b._phoneblack(),"undefined"!=typeof gli_set_clipboard&&"function"==typeof gli_set_clipboard&&(gli_set_clipboard({type:"text",text:""}),b.setCoprParam("screenshot",0)))},g.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},g}(b,c,h,m,a,n),C=function(a,b,c){var d=a._,e='<div class="read-img-list" style="<%=obj.listStyle %>"><% _.each(obj.imgSet, function(item){  %><div class="read-img-item" style="<%=obj.itemStyle %>"><img src="<%= obj.isClient ? item.new_src : item.old_src %>" /></div><% }); %></div>',f=function(a){console.log("[panelViewImg.js] -> 查看图片,  构造函数!!");var c={$wrapObj:null,$domObj:null,isDownloadImg:!0,imgSet:[],currentIdx:0,dataTempl:"",_dataTemplObj:null,_templ:"<div class='read-comm-panel read-comm-mask read-sel-imgview-panel read-hide' />",_wrapW:0,_listTotalW:0,_left:0,dataInfo:null};this.opts=b.extend(!0,{},c,a),this._init()};return f.prototype._init=function(){var a=this.opts;"PC"==a.clientType?(this._renderLayoutPC(),this._bindEventPC()):(this._renderLayout(),this._bindEvent())},f.prototype._renderLayout=function(){var a=this.opts;a.$domObj=b(a._templ);var c=d.template(a.dataTempl),e=c();a.$domObj.html(e),a.$wrapObj.append(a.$domObj),a.$imgSetting=a.$domObj.find(".read-img-setting"),a.$setHeadObj=a.$imgSetting.find(".read-header"),a.$setFootObj=a.$imgSetting.find(".read-footer");var f=a.$setHeadObj.css("top"),g=a.$setFootObj.css("bottom");a.$setHeadObj.attr("data-top",f),a.$setFootObj.attr("data-bottom",g),a.isDownloadImg||a.$imgSetting.find(".read-save-btn").hide(),a._wrapW=a.$wrapObj.width()},f.prototype._renderLayoutPC=function(){var a=this.opts,c=d.template(a.dataTempl),e=c();a.$domObj=b(e),a.$wrapObj.append(a.$domObj),a.isDownloadImg||a.$domObj.find(".read-save-btn").hide(),a._wrapW=a.$wrapObj.width()-200},f.prototype._bindEventPC=function(){var c=this,d=this.opts,e=d._wrapW;d.$domObj.find(".read-body .read-prev").on("click",function(a){c._changeImg(-e)}),d.$domObj.find(".read-body .read-next").on("click",function(a){c._changeImg(e)}),d.$domObj.find(".read-header .read-back-btn").on("click",function(){c.close()}),d.$domObj.find(".read-header .read-rotate-btn").on("click",function(){c._imgRotate90();var a=this;b(a).css("pointer-events","none"),setTimeout(function(){b(a).css("pointer-events","auto")},500)}),d.$domObj.find(".read-header .read-save-btn").on("click",function(){var b=d.$domObj.find(".read-img-list").find("img").eq(d.dataInfo.currentIdx-1);d.isClient||(OpenWindow=a.open(b.attr("src"),"AAA","toolbar=yes, location=no, directories=no, status=1, menubar=0, scrollbars=1,resizable=1, menubar=no, copyhistory=yes, width=400, height=400"))})},f.prototype._bindEvent=function(){var c=this,d=this.opts,e=d._wrapW;d.$domObj.on("swipeLeft",function(){c._changeImg(-e)}),d.$domObj.on("swipeRight",function(){c._changeImg(e)}),d.$domObj.find(".read-viewimg-content").on("tap",function(){c.settingOpen()}),d.$imgSetting.on("tap",".read-body",function(){c.settingClose()}),d.$imgSetting.on("tap",".read-exit-img",function(){c.close()}),d.$imgSetting.on("tap",".read-rotate-btn",function(){c._imgRotate90();var a=this;b(a).css("pointer-events","none"),setTimeout(function(){b(a).css("pointer-events","auto")},500)}),d.$imgSetting.on("tap",".read-save-btn",function(){var b=d.$domObj.find(".read-img-list").find("img").eq(d.dataInfo.currentIdx-1);d.isClient?gli_savepic_album(b.attr("src")):OpenWindow=a.open(b.attr("src"),"AAA","toolbar=yes, location=no, directories=no, status=1, menubar=0, scrollbars=1,resizable=1, menubar=no, copyhistory=yes, width=400, height=400")})},f.prototype._changeImg=function(a){var b=this.opts,d=b._listTotalW,e=b._left,f=b.$domObj.find(".read-img-list")[0],g=parseInt(b.dataInfo.currentIdx),h=e+a;h<=-d||h>0?console.warn("不能执行本次 切换动作!"):(b._left=h,g="PC"==b.clientType?a<0?g-1:g+1:a>0?g-1:g+1,b.dataInfo.currentIdx=g,this._judgePc(g),c(f).set("left",h+"px").duration("0.2s").end())},f.prototype.setOptions=function(a){var b=this.opts,c=a.imgSet,f=c.length,g=f*b._wrapW,h=a.currentIdx;a.isClient=b.isClient,b._listTotalW=g,b._left="PC"==b.clientType?-(f-h)*b._wrapW:-(h-1)*b._wrapW;var i="PC"==b.clientType?"float:right;":"float:left;";"[object Array]"==Object.prototype.toString.call(c)&&f>0&&(a.listStyle="width:"+g+"px;left:"+b._left+"px;",a.itemStyle="width:"+b._wrapW+"px;"+i);var j=d.template(e),k=j(a);b.$domObj.find(".read-viewimg-content").html(k),b.dataInfo=a,this._judgePc(h)},f.prototype._judgePc=function(a){var b=this.opts;if("PC"==b.clientType){var c=b.$domObj.find(".read-body .read-prev"),d=b.$domObj.find(".read-body .read-next");1==a?c.addClass("read-disabled"):Math.abs(a)==b.dataInfo.imgSet.length?d.addClass("read-disabled"):(c.removeClass("read-disabled"),d.removeClass("read-disabled"))}},f.prototype._imgRotate90=function(){var a=this.opts,b=a.$domObj.find(".read-img-list").find("img").eq(a.dataInfo.currentIdx-1),d=b.width(),e=b.height(),f=parseInt(b.attr("data-rotate"))||1;c(b[0]).rotate(90*f).duration("0.5s").end(),f%2==0?b.css("margin",-d/2+"px 0 0 "+-e/2+"px"):b.css("margin",-e/2+"px 0 0 "+-d/2+"px"),b.attr("data-rotate",++f)},f.prototype.settingOpen=function(){var a=this.opts;a.$setHeadObj.attr("data-top"),a.$setFootObj.attr("data-bottom");a.$imgSetting.fadeIn(200),c(a.$setHeadObj[0]).set("top","0").duration("0.3s").end(),c(a.$setFootObj[0]).set("bottom","0").duration("0.3s").end()},f.prototype.settingClose=function(){var a=this.opts,b=a.$setHeadObj.attr("data-top"),d=a.$setFootObj.attr("data-bottom");c(a.$setHeadObj[0]).set("top",b).duration("0.3s").end(),c(a.$setFootObj[0]).set("bottom",d).duration("0.3s").end(),setTimeout(function(){a.$imgSetting.hide()},300)},f.prototype.open=function(){var a=this.opts;a.$domObj.show(400)},f.prototype.close=function(){var a=this.opts;a.$domObj.hide()},f}(b,a,f),D={progressData:{updateTime:"",progress:0},settingData:{readTimes:0,brightness:.15,useSysBrightness:!1,fontSize:{list:[{text:"小",value:"1"},{text:"中",value:"2"},{text:"大",value:"3"},{text:"大大",value:"4"}],value:"2"},pagingType:{list:[{text:"平铺翻页",value:"page_1"},{text:"仿真翻页",value:"page_2"}],value:"page_1"},fontFamily:{list:[{text:"雅黑",value:"1"},{text:"宋体",value:"2"},{text:"黑体",value:"3"}],value:"1"},bgColor:{list:[{text:"",value:"1",bg:"read-bg-white"},{text:"",value:"2",bg:"read-bg-blue"},{text:"",value:"3",bg:"read-bg-pink"},{text:"",value:"4",bg:"read-bg-green"}],value:"2"},isNightMode:!1,screenLongActive:!1},copyright:{status:!0,copy_long:100,copy_times:3,print_flg:!0,download_flg:!0,screenshot_flg:!0,watermark:{status:!1,imgUrl:"http://img58.nipic.com/file/20140911/13713955_102931345000_1.jpg",opacity:20}},license_id:"doc_110220330",server:"server_101010101010"},E=function(a,b,c,d,e,f){var g=function(a){var b={$domObj:null,$readerObj:null,$contentObj:null,$menuWrap:null,isMobile:!0,pageColumn:1,touchState:0,isShowMenu:0,ismove:1,posMenu:"",pos:{startX:0,startY:0,endX:0,endY:0},useNote:!0,useCorrect:!0,menu:{list:[{text:"划线",value:"underline"},{text:"笔记",value:"note"},{text:"复制",value:"copy"},{text:"纠错",value:"correct"}],value:"copy"},coprObj:null};this.opts=e.extend(!0,{},b,a),this._init()};return g.prototype._init=function(){var a=this.opts;this._setLayout(),this._bindEvent(),a.isMobile&&a.$readerObj.css({"-webkit-user-select":"none","-ms-user-select":"none"})},g.prototype._setLayout=function(){var a=this.opts,b='<div class="read-comm-panel read-content-select"><div class="read-radiogroup-menu"></div><div class="read-pos-upper"></div><div class="read-pos-lower"></div></div>';
a.$domObj=e(b),a.$readerObj.append(a.$domObj),a.$contentObj=a.$readerObj.find(".read-selector-main .read-content"),a.$allContentObj=a.$contentObj,a.$menuWrap=a.$domObj.find(".read-radiogroup-menu");for(var f=a.menu.list,g=0,h=f.length;g<h;g++)a.useNote||"underline"!=f[g].value&&"note"!=f[g].value||(f[g].active="false",f[g].bg="read-bg-gray"),a.useCorrect||"correct"==f[g].value&&(f[g].active="false",f[g].bg="read-bg-gray");this.$menuObj=new c({$domObj:a.$menuWrap,data:f,value:a.menu.value,isMobile:a.isMobile}),a.$menuWrap.fadeOut(1),this.DialogObj=new d({$wrapDomObj:a.$readerObj,isMobile:a.isMobile}),this.upperPos=a.$domObj.find(".read-pos-upper"),this.lowerPos=a.$domObj.find(".read-pos-lower"),this.posW=this.upperPos.width(),this.posH=this.upperPos.height(),this.upperPos.fadeOut(10),this.lowerPos.fadeOut(10)},g.prototype._getEvent=function(b){var c=this.opts;return!!b&&(b=c.isMobile?void 0!==b.touches&&"object"==typeof b.touches&&b.touches.length>0?b.touches[0]:void 0!==b.targetTouches.touches&&"object"==typeof b.targetTouches.touches&&b.targetTouches.touches.length>0?b.targetTouches.touches[0]:void 0!==b.changedTouches&&"object"==typeof b.changedTouches&&b.changedTouches.length>0?b.changedTouches[0]:void 0:b||a.event)},g.prototype._bindEvent=function(){var a=this.opts,b=this,c=a.$contentObj;this.upperPos.on("touchstart",function(b){a.$menuWrap.fadeOut(1)}),this.lowerPos.on("touchstart",function(b){a.$menuWrap.fadeOut(1)}),this.upperPos.on("touchmove",function(d){if(!a.ismove)return!1;var e=b._getEvent(d),f=a.pos;a.posMenu="upper";var g=c.css("line-height");g=parseFloat(g.replace("px",""));var h=c.css("font-size");h=parseFloat(h.replace("px",""));var i=e.pageX+b.posW/2,j=e.pageY+b.posH/2;(j>f.endY+(g-h)/2||Math.abs(j-f.endY)<g/2&&i+h/8>f.endX)&&(i=f.endX,j=f.endY),f.startX=i,f.startY=j,b._selectElem(f.startX,f.startY,f.endX,f.endY)}),this.lowerPos.on("touchmove",function(d){if(!a.ismove)return!1;var e=b._getEvent(d),f=a.pos;a.posMenu="lower";var g=c.css("line-height");g=parseFloat(g.replace("px",""));var h=c.css("font-size");h=parseFloat(h.replace("px",""));var i=e.pageX-b.posW/2,j=e.pageY-b.posH/2;(j<f.startY-(g-h)/2||Math.abs(f.startY-j)<g/2&&f.startX-h/8>i)&&(i=f.startX,j=f.startY),f.endX=i,f.endY=j,b._selectElem(f.startX,f.startY,f.endX,f.endY)}),this.upperPos.on("touchend",function(c){2===a.touchState&&b._menuShow(),1===a.touchState&&(a.touchState=0)}),this.lowerPos.on("touchend",function(c){2===a.touchState&&b._menuShow(),1===a.touchState&&(a.touchState=0)}),c.on("touchstart",function(c){var d=b._getEvent(c);a.pos.startX=d.pageX,a.pos.startY=d.pageY,a.pos.endX=d.pageX,a.pos.endY=d.pageY,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10),2===a.touchState?a.touchState=3:a.touchState=1,setTimeout(function(){b._isLongTouch.call(b)},400)}),c.on("touchmove",function(b){return 3!==a.touchState&&void(2!==a.touchState&&(a.touchState=0))}),c.on("touchend",function(c){2===a.touchState&&b._menuShow(),1===a.touchState&&(a.touchState=0)});var d=a.isMobile?"tap":"click",f=d+" swipeDown swipeLeft swipeRight";c.on(f,function(b){return 2!==a.touchState&&(3===a.touchState?(a.touchState=0,!1):void 0)}),this.$menuObj.on("change:click",function(d,f){var g=c.find(".read-font-select").first().attr("data-id"),h=c.find(".read-font-select").last().attr("data-id"),i=b._getPosLen(),j={firstId:parseInt(g),lastId:parseInt(h),original:"",isunderline:!a.ismove,posLen:i.posLen,currPage:i.currPage};if(c.find(".read-font-select").each(function(){e(this).hasClass("reader-MathJax")?j.original+=e(this).find("script").html():e(this).hasClass("read-special-tab")?j.original+=e(this).html():j.original+=e(this).text()}),"copy"===f.newValue&&b._phoneCopy(),"underline"===f.newValue){if("删除"===f.newText){var k=c.find(".read-font-select").attr("data-noteid");a.$domObj.trigger("Select:delUnderline",k)}else a.$domObj.trigger("Select:addUnderline",j);a.touchState=0,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10)}"note"===f.newValue&&(c.find(".read-font-select").attr("data-noteid")&&(j.note_id=c.find(".read-font-select").attr("data-noteid")),a.$domObj.trigger("Select:addNote",j),a.touchState=0,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10)),"correct"===f.newValue&&(a.$domObj.trigger("Select:correct",j),a.touchState=0,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10))})},g.prototype._phoneCopy=function(){var a=this.opts,c="",d=0;a.$contentObj.find(".read-font-select").each(function(){c+=e(this)[0].innerText,""!==b.trim(e(this)[0].innerText)&&(d+=1)}),this._gliCopy(c,d)},g.prototype._gliCopy=function(a,b){var c=this.opts,d=this,e=a||"",f=b;c.coprObj.getCoprParam(function(){var a=c.coprObj.opts.coprData,b=-1,g=-1;a.status&&(b=a.copy_long,g=a.copy_times),b==-1&&g==-1?d._setCopyInfo(e,f):f>0&&f<=b&&g>0?d._setCopyInfo(e,f):(c.coprObj.setCoprParam("copy",0),d._copyDisabled(g,b),e="")})},g.prototype._setCopyInfo=function(a,b){var c=this.opts,d=this,f=a||"",g=b;try{"undefined"!=typeof gli_set_clipboard&&"function"==typeof gli_set_clipboard&&f&&gli_set_clipboard({type:"text",text:f}),c.coprObj.setCoprParam("copy",g),d.DialogObj.setMsg("您复制了"+g+"个字!"),d.DialogObj.opts.okBtn.func=function(a){var b=e('<input id="copyInput"  value="'+f+'" />');document.getElementsByTagName("body")[0].appendChild(b[0]),document.getElementById("copyInput").select(),document.execCommand("copy"),b.remove(),d._menuclose(),d.upperPos.fadeOut(10),d.lowerPos.fadeOut(10)},d.DialogObj.open()}catch(a){console.warn("[copyright.js] -->setCopyInfo 出错.")}},g.prototype._copyDisabled=function(a,b){return 0==a?(this.DialogObj.setMsg(f.copyRunOut),this.DialogObj.opts.okBtn.func=function(){},void this.DialogObj.open()):void(0==b?(this.DialogObj.setMsg(f.copyRunOut),this.DialogObj.opts.okBtn.func=function(){},this.DialogObj.open()):(this.DialogObj.setMsg(f.copyStill+b+"个字!"),this.DialogObj.opts.okBtn.func=function(){},this.DialogObj.open()))},g.prototype._isLongTouch=function(){var a=this,b=a.opts,c=0;if(b.posMenu="",1===b.touchState||3===b.touchState){if(b.touchState=2,2==b.pageColumn){var d=b.$readerObj.find(".read-selector-main .read-content.read-page-2").offset().left;d<b.pos.startX?b.$contentObj=b.$readerObj.find(".read-selector-main .read-content.read-page-2"):b.$contentObj=b.$readerObj.find(".read-selector-main .read-content.read-page-1")}var f=b.$contentObj.find(".read-filterSpan");if(0===f.length)return b.touchState=0,!1;c=a._positionElem(b.pos.startX,b.pos.startY),b.pos.startX=f.eq(c).offset().left+f.eq(c).width()/2,b.pos.startY=f.eq(c).offset().top+f.eq(c).height()/2,b.pos.endX=f.eq(c).offset().left+f.eq(c).width()/2,b.pos.endY=f.eq(c).offset().top+f.eq(c).height()/2;var g=c,h=c;if(f.eq(c).hasClass("read-gli-underline")){b.ismove=0;var i=f.eq(c).attr("data-noteid"),j=b.$allContentObj.find('[data-noteid="'+i+'"]'),g=j.first().attr("data-id"),h=j.last().attr("data-id");j.addClass("read-font-select"),b.posMenu="upper",a._posMenuShow(g),b.posMenu="lower",a._posMenuShow(h),this.$menuObj.setValue("underline","删除")}else b.ismove=1,e(f[c]).addClass("read-font-select"),a._posMenuShow(f.eq(c).attr("data-id"))}},g.prototype._selectElem=function(a,b,c,d){var f=this.opts,g=0,h=0,i=f.$contentObj.find(".read-filterSpan");g=this._positionElem(a,b),h=this._positionElem(c,d),f.$contentObj.find(".read-font-select").each(function(){e(this).removeClass("read-font-select")});for(var j=g;j<=h;j++)i.eq(j).addClass("read-font-select");"upper"===f.posMenu&&this._posMenuShow(i.eq(g).attr("data-id")),"lower"===f.posMenu&&this._posMenuShow(i.eq(h).attr("data-id"))},g.prototype._positionElem=function(a,b){var c=this,d=c.opts,f=d.$contentObj.css("font-size"),g=d.$contentObj.css("line-height"),h=9999,i=0,j=0,k=0;f=parseFloat(f.replace("px","")),g=parseFloat(g.replace("px",""));for(var l=d.$contentObj.find(".read-filterSpan"),m=0,n=l.length;m<n;m++){if(j=e(l[m]).offset().left+e(l[m]).width(),k=e(l[m]).offset().top+e(l[m]).height(),k+(g-f)/2>b){if(j>a){d.isShowMenu=1,i=m;break}if(!(h>Math.abs(j+f/2-a))){d.isShowMenu=1,i=m,m&&e(l[m]).offset().top>e(l[m-1]).offset().top&&(i=m-1);break}h=Math.abs(j+f/2-a)}!i&&m===n-1&&m&&(d.isShowMenu=1,i=m)}return i},g.prototype._posMenuShow=function(a){var b=this.opts,c=b.$allContentObj.find('.read-filterSpan[data-id="'+a+'"]'),d=c.offset().top,e=c.offset().left,f=c.width(),g=c.height(),h=b.$readerObj.offset().top,i=b.$readerObj.offset().left;"lower"!==b.posMenu&&(this.upperPos.css("top",d-this.posH+g-h+"px"),this.upperPos.css("left",e-this.posW/2-i+"px")),"upper"!==b.posMenu&&(this.lowerPos.css("top",d-h+"px"),this.lowerPos.css("left",e-this.posW/2+f-i+"px")),this.upperPos.fadeIn(0),this.lowerPos.fadeIn(0)},g.prototype._menuShow=function(){var a=this,b=a.opts;if(!b.isShowMenu)return!1;var c=b.$readerObj.height(),d=0,e=0,f=b.$contentObj.find(".read-font-select"),g=b.$readerObj.offset().top;if(d=f.eq(0).offset().top-g,e=f.eq(f.length-1).offset().top-g,d>e){var h=d;d=e,e=h}d>80+b.$contentObj.offset().top?b.$menuWrap.css("top",d-80+"px"):e<c-120?b.$menuWrap.css("top",e+80+"px"):b.$menuWrap.css("top","50%");var i=b.$readerObj.offset().left,j=b.$contentObj.offset().left+b.$contentObj.width()/2;b.$menuWrap.css("left",j-i+"px"),b.$menuWrap.fadeIn(400)},g.prototype._menuclose=function(){var a=this.opts;a.$menuWrap.fadeOut(200),this.$menuObj.setValue("underline","划线"),a.isShowMenu=0,a.touchState=0,a.$allContentObj.find(".read-font-select").each(function(){e(this).removeClass("read-font-select")})},g.prototype.close=function(){this.opts;this._menuclose(),this.upperPos.fadeOut(10),this.lowerPos.fadeOut(10)},g.prototype._getPosLen=function(){var a=this.opts,b=0,c=a.$contentObj.find(".read-font-select").first(),d=c.attr("data-id"),f=2;return 2==a.pageColumn&&c.offset().left<a.$allContentObj.eq(1).offset().left&&(f=1),a.$contentObj.find(".read-filterSpan").each(function(){if(b+=e(this)[0].innerText.length,e(this).attr("data-id")===d)return!1}),{posLen:b,currPage:f}},g.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},g}(b,c,h,m,a,n),F=function(a,b){var c=function(a){var c={parentObj:document.getElementsByTagName("body")[0],msg:"消息提示框",time:1800,_htmlWrap:"<div class='read-tip-wrap'></div>",_htmlMsg:"<span class='read-tip-msg'></span>"};this.opts=b.extend(!0,{},c,a),this.tipWrapObj=null,this.tipMsgObj=null,this._init()};return c.prototype._init=function(){var a=this.opts,c=b(a.parentObj);this.tipWrapObj=b(a._htmlWrap),this.tipMsgObj=b(a._htmlMsg),this.tipWrapObj.append(this.tipMsgObj).appendTo(c),this.tipWrapObj.fadeOut(0)},c.prototype.open=function(a,b){var c=this.opts,d=0,e=0;return a=a||c.msg,b=b||c.time,"block"!==this.tipMsgObj.css("display")&&(this.tipWrapObj.fadeIn(0),d=this.tipMsgObj.width(),this.tipMsgObj.html(a),d+=this.tipMsgObj.width(),e=this.tipMsgObj.height(),this.tipMsgObj.css({width:d,height:e,display:"block"}),void this.close(b))},c.prototype.close=function(a){var b=this.opts,c=this,d=a||b.time;setTimeout(function(){c.tipWrapObj.fadeOut(400)},d),setTimeout(function(){c.tipMsgObj.html("").css("display","inline")},d+400)},c}(b,a),G=function(a,b,c,d,e){var f=a._,g=function(a){var c={$readerObj:null,correctHtml:"",$domObj:null,isMobile:!0,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return g.prototype._init=function(){console.log("[CorrectPanel] --> _init"),this._renderLayout(),this._bindEvent()},g.prototype._renderLayout=function(){var a=this.opts,d=f.template(a.correctHtml),e=d();a.$domObj=b(e),a.$readerObj.append(a.$domObj),this.tips=new c({parentObj:a.$readerObj[0]})},g.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.isMobile?"tap":"click";b.$domObj.find(".read-header .read-cancel").on(c,function(){var c=b.$domObj.find(".read-body textarea").val().trim();b.$domObj.find(".read-body textarea").blur(),a.cancel(c)}),b.$domObj.find(".read-header .read-send").on(c,function(){var c=b.$domObj.find(".read-body textarea").val().trim();a.sendCorrect(c)})},g.prototype.open=function(a){var b=this.opts;b.thisNoteObj=a,b.first=!0,b.$domObj.show(),setTimeout(function(){b.$domObj.height();e(b.$domObj[0]).set("top","0px").duration("0.5s").end()},10),b.$domObj.find(".read-body .read-original-text").html(a.original),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])},g.prototype.cancel=function(a){var b=this.opts;a&&b.first?(setTimeout(function(){b.first=!1},1e3),this.tips.open(d.correctCancel,1e3),b.$domObj.find(".read-body textarea").focus()):this.close()},g.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-body textarea").val("");b.$domObj.height();e(b.$domObj[0]).set("top","-101%").duration("0.3s").end(),setTimeout(function(){b.$domObj.hide()},300)},g.prototype.sendCorrect=function(a){var b=this,c=this.opts,e={chapter_id:c.thisNoteObj.chapter_id,chapter_name:c.thisNoteObj.chapter_name,percent:c.thisNoteObj.note_page,original:c.thisNoteObj.original,correctVal:a};a?c.api.sendCorrect(e,function(){b.tips.open(d.correctSucess,1e3),b.close()},function(a){console.warn(a),b.tips.open(d.sendError,1e3)}):this.tips.open(d.correctError,1e3)},g}(b,a,F,n,f),H=function(a){function b(a){c=new d(a)}var c=null;b.prototype.excute=function(a){return c._excute(a)};var d=function(a){var b={wrapDomObj:null,isAssociate:!1,isSplitWord:!1};this.opts=this._extend({},b,a),this._init()};return d.prototype._init=function(){console.log("[typeSetting]-->_init!")},d.prototype._cloneObj=function(a){if("object"!=typeof a)return a;if(null==a)return a;var b=new Object;for(var c in a)b[c]=_cloneObj(a[c]);return b},d.prototype._extend=function(){var a=arguments;if(!(a.length<2)){for(var b=this._cloneObj(a[0]),c=1;c<a.length;c++)for(var d in a[c])b[d]=a[c][d];return b}},d.prototype._splitTag=function(a){var b=this.opts;if(b.isSplitWord)for(var c=a.childNodes||[],d=/(([\w_\.%]+)|([^\2]))/gi,e="",f=0,g=c.length;f<g;f++)if("#text"===c[f].nodeName){e=c[f].nodeValue.replace(d,function(a){return'<span class="read-filterSpan">'+a+"</span>"});var h=document.createElement("span");c[f].parentNode.replaceChild(h,c[f]),h.outerHTML=e}else"svg"!==c[f].nodeName&&"IMG"!==c[f].nodeName&&c[f].className.indexOf("read-filterSpan")===-1&&c[f].className.indexOf("read-not-publish")===-1&&"TABLE"!==c[f].nodeName&&this._splitTag(c[f])},d.prototype._excute=function(a){console.log("[typeSetting]-->_excute!"+a);var b=this.opts,c=this;b.wrapDomObj.innerHTML=a.html,c._splitTag(b.wrapDomObj);var d=/。/,e=/：|“|”|？|-|！|。|，|‘|’|、|（|）|~|,|\.|\?|'|'|"|"|!|；|;|@|#|%/,f=b.wrapDomObj.querySelectorAll("span.read-filterSpan"),g=b.wrapDomObj.getBoundingClientRect().left,h=b.wrapDomObj.offsetWidth,i=f.length-1,j=f[i];if(i>0){for(var k=0;k<f.length&&!j.innerText;k++)i-=k+1,j=f[i];var l=j.offsetWidth,m=j.getBoundingClientRect().left,n=h+g-(m+l);if(n>0&&n<.3*h&&!d.test(j.innerText)){j.setAttribute("data-publish1","publish-span1");for(var o=0;o<i+1&&!(i<=o||f[i-o].offsetTop!=f[i-o-1].offsetTop);o++);for(var p=n/o,q=0;q<o;q++)f[i-q].style.position="relative",f[i-q].style.left=n-p*q+"px"}}for(var r=0;r<f.length;r++)if(void 0===f[r+1]||f[r].offsetTop!=f[r+1].offsetTop){var s=f[r],t=s.offsetWidth,u=s.getBoundingClientRect().left,v=h+g-(u+t);if(e.test(s.innerText)&&v>=0&&v<2){for(var w=0;w<r+1&&!(r<=w||f[r-w].offsetTop!=f[r-w-1].offsetTop);w++);for(var x=t/2,y=x/w,z=0;z<w;z++)f[r-z].style.position="relative",f[r-z].style.left=x-y*z+"px"}}var A=b.wrapDomObj.innerHTML;return b.wrapDomObj.innerHTML="",A},b}(b),I=function(a,b,c){var d=a._,e=function(a){var c={$domObj:null};this.opts=b.extend(!0,{},c,a),this.slideState=0,this.controlsTimer=null,this.showControlsFlag=!0,this.touchPos={posx:"",posy:""},this._init()};return e.prototype._init=function(){var a=this.opts,c=d.template(a.videoTemplHtml),e=c();a.$domObj=b(e),a.$readerObj.append(a.$domObj),a.playVideo=a.$domObj.find(".read-bigSizeVideo"),a.guidePage=a.playVideo.find(".read-guide-page"),a.contorlBar=a.playVideo.find(".read-contorls-container"),a.headContorl=a.playVideo.find(".read-header"),a.pauseMask=a.playVideo.find(".read-pause-mask"),a.progressMask=a.playVideo.find(".read-progress-mask"),a.waitingMask=a.playVideo.find(".read-waiting-mask"),a.volumeBar=a.playVideo.find(".read-volume-bar"),a.loadedVolumeBar=a.volumeBar.find(".read-loadedvolume-bar"),this._bindEvent()},e.prototype._bindEvent=function(){var a=this.opts,d=this;a.guidePage.on("tap",function(){d.setVideoPlayOrPause(),b(this).hide()});var e=a.playVideo.find(".read-current-video"),f=a.playVideo.find(".read-light-bar"),g=f.find(".read-loadedlight-bar"),h=a.contorlBar.find(".read-video-play-btn");e.on("touchstart",function(a){var b=d.getEvent(a),c=b.pageX,e=b.pageY;d.touchPos.posx=c,d.touchPos.posy=e}),e.on("touchmove",function(b){var c,e,h,i,j=d.getEvent(b),k=j.pageX,l=j.pageY,m=a.playVideo.find(".read-current-video").width(),n=(a.playVideo.find(".read-current-video").height(),this.duration);if(2!=d.slideState&&Math.abs(l-d.touchPos.posy)<10&&(k-d.touchPos.posx>10?(d.slideState=1,e=this.currentTime,e<n&&(this.currentTime=(e+.5).toFixed(1)),d.touchPos.posx=k):k-d.touchPos.posx<-10&&(d.slideState=1,e=this.currentTime,e>.5&&(this.currentTime=(e-.5).toFixed(1)),d.touchPos.posx=k)),k<m/2){if(1!=d.slideState)if(l-d.touchPos.posy>5){if(Math.abs(k-d.touchPos.posx)<10){d.slideState=2,d.touchPos.posy=l,f.show();var o=f.find(".read-totallight-bar").height();gli_get_brightness(function(a){a>.1&&(gli_set_brightness(a-.1),g.height(a*o))})}}else if(l-d.touchPos.posy<-5&&Math.abs(k-d.touchPos.posx)<10){d.slideState=2,d.touchPos.posy=l,f.show();var o=f.find(".read-totallight-bar").height();gli_get_brightness(function(a){a<1&&(gli_set_brightness(a+.1),g.height(a*o))})}}else 1!=d.slideState&&(l-d.touchPos.posy>5?Math.abs(k-d.touchPos.posx)<10&&(d.slideState=2,c=this.volume,this.volume>0&&(this.volume=(c-.1).toFixed(1)),d.touchPos.posy=l,a.volumeBar.show(),h=a.volumeBar.find(".read-totalvolume-bar").height(),i=this.volume*h,a.loadedVolumeBar.height(i)):l-d.touchPos.posy<-5&&Math.abs(k-d.touchPos.posx)<10&&(d.slideState=2,c=this.volume,this.volume<1&&(this.volume=(c+.1).toFixed(1)),d.touchPos.posy=l,a.volumeBar.show(),h=a.volumeBar.find(".read-totalvolume-bar").height(),i=this.volume*h,a.loadedVolumeBar.height(i)));return!1}),e.on("touchend",function(){setTimeout(function(){a.volumeBar.hide(),f.hide()},300),1==d.slideState&&a.progressMask.hide(),d.slideState=0}),e.on("tap",function(){return a.contorlBar.toggle(),a.headContorl.toggle(),clearTimeout(d.controlsTimer),d.showControlsFlag=!0,!1}),h.on("touchend",function(){return d.setVideoPlayOrPause(),!1}),e.on("play",function(){console.log("播放视频"),h.addClass("read-pause"),a.progressMask.hide(),a.pauseMask.hide(),0==d.showControlsFlag&&(d.showControlsFlag=!0),event.stopPropagation()}),e.on("pause",function(){console.log("暂停视频"),h.removeClass("read-pause"),a.pauseMask.show()}),a.pauseMask.on("tap",function(){return d.setVideoPlayOrPause(),b(this).hide(),!1}),e.on("waiting",function(){a.progressMask.hide(),a.waitingMask.show()}),e.on("canplay",function(){a.waitingMask.hide(),a.progressMask.hide()}),a.contorlBar.find(".read-full-screen").on("tap",function(){return d.close(),!1}),a.headContorl.find(".read-header-back-icon").on("tap",function(){return d.close(),!1}),e.on("timeupdate",function(){var b=this.currentTime,e=this.duration,f=c.formatTime(b),g=c.formatTime(e),h=a.contorlBar.find(".read-progress-bar").width(),i=b/e*h;a.playVideo.find(".read-loadedprogress-bar").width(i),a.contorlBar.find(".read-video-currenttime").html(f),isNaN(e)||a.contorlBar.find(".read-video-totaltime").html(g),d.showControlsFlag&&(d.controlsTimer=setTimeout(function(){a.contorlBar.hide(),a.headContorl.hide()},1e4),d.showControlsFlag=!1)}),e.on("seeking",function(){var b=this.currentTime,d=this.duration,e=c.formatTime(b),f=c.formatTime(d);a.pauseMask.hide(),a.waitingMask.hide(),a.progressMask.show(),a.progressMask.find(".read-current-time").html(e),a.progressMask.find(".read-total-time").html(f)})},e.prototype.setVideoPlayOrPause=function(){var a=this.opts,b=a.playVideo.find(".read-current-video")[0];b.paused?b.play():b.pause()},e.prototype.open=function(a){var b=this.opts,c=this;b.videoName=a.name,b.videoSrc=a.src,b.$domObj.removeClass("read-hide"),b.playVideo.fadeIn(),b.playVideo.find(".read-current-video").attr("src",b.videoSrc),"false"!=localStorage.getItem("first-open-video")&&b.guidePage.show(),localStorage.setItem("first-open-video","false"),b.contorlBar.find(".read-video-currenttime").html("00:00:00"),b.contorlBar.find(".read-video-totaltime").html("00:00:00"),b.headContorl.find(".read-header-video-title").html(b.videoName),b.contorlBar.show(),b.headContorl.show(),b.pauseMask.show(),clearTimeout(c.controlsTimer)},e.prototype.close=function(){var a=this.opts;a.guidePage.hide(),a.pauseMask.hide(),a.waitingMask.hide(),a.progressMask.hide(),this.setVideoPlayOrPause(),a.playVideo.hide(),a.$domObj.addClass("read-hide")},e.prototype.getEvent=function(a){return!!a&&(a=void 0!==a.touches&&"object"==typeof a.touches&&a.touches.length>0?a.touches[0]:void 0!==a.changedTouches&&"object"==typeof a.changedTouches&&a.changedTouches.length>0?a.changedTouches[0]:void 0)},e}(b,a,c),J=function(a,b,c,d,e){var f=a._,g=function(a){var c={$readerObj:null,knowledgeHtml:"",listHtml:'<div class="read-nav-title read-cf"><span class="read-lf">【<span><%= obj.name %></span>】 知识点</span><span class="read-rt">共<span><%= obj.point_list.length %></span>条知识点</span></div><div class="read-nav-list"><ul><% _.each(obj.point_list, function(list, i){  %><li data-index="<%= i %>"><span class="read-lf"><%= list.txt %></span><span class="read-rt"><%= i + 1 %></span></li><% }); %></ul></div>',$domObj:null,isMobile:!0,totalLen:0,api:null,level:4,baseSize:20,graphId:0,color:["#096984","#1c92f4","#596e8b","#899a7b","#28a9c8","#7ba3a9","#767aae","#5bb2bb","#99cbe8","#becfab"]};this.opts=b.extend(!0,{},c,a),this._init()};return g.prototype._init=function(){console.log("[KnowledgePanel] --> _init"),this._renderLayout(),this._bindEvent(),this._getKnowledge()},g.prototype._getKnowledge=function(){var a=this.opts,b=this;a.graphData=[],a.firstNodes=[],a.api.getKnowledgeTree({},function(c){a.graphData=c.graph,b._initGraph()},function(a){console.warn("[panelKnowledge.js]--获取知识失败!")})},g.prototype._getArrValByKey=function(a,c,d){var e={};if(a instanceof Array&&c&&null!=d)for(var f=0,g=a.length;f<g;f++){var h=a[f][c];if(h instanceof Array){if(h.indexOf(d)!=-1){e=b.extend(!0,{},a[f]),e.new_index=f;break}}else if(h==d){e=b.extend(!0,{},a[f]),e.new_index=f;break}}return e},g.prototype._setSize=function(a){for(var b=a<=20?35:23,c=100;a>20;c-=8)if(a>c){b+=1;break}return b},g.prototype._getRandomColor=function(){var a=this.opts,b=a.color;return b[Math.floor(10*Math.random())]},g.prototype._initGraph=function(){for(var a=this.opts,b=0,c=a.graphData.length;b<c;b++){for(var d=a.graphData[b].nodes,e=a.graphData[b].linkTarget,f=0,g=d.length;f<g;f++){var h=d[f];h.data_id=h.id,h.arr_index=f,h.symbolSize=a.baseSize,h.itemStyle={normal:{color:this._getRandomColor()}},delete h.id}for(var f=0,g=d.length;f<g;f++){for(var h=d[f],i=[],j=0,k=h.link_id.length;j<k;j++){var l=h.link_id[j],m=e[l].target,n=this._getArrValByKey(d,"data_id",m);i.push(n.arr_index)}h.arr_link=i}}this._getFirstNodes()},g.prototype._getFirstNodes=function(a){var c=this.opts,d=a||0;c.kData=c.graphData[d];var e=c.kData.nodes;c.baseSize=this._setSize(e.length);for(var f=0,g=e.length;f<g;f++){var h=e[f];h.symbolSize=c.baseSize;for(var i=0,j=h.arr_link.length;i<j;i++)null==h.arr_link[i]&&console.log("node_error:"+h.name+"("+f+")")}c.firstNodes=b.extend(!0,[],e)},g.prototype._getLinksData=function(a){var b=this.opts,c=a||b.firstNodes,d=[];if(0==c.length)return d;for(var e=0,f=c.length;e<f;e++)for(var g=c[e],h=0,i=g.arr_link.length;h<i;h++){var j=g.arr_link[h],k=this._getArrValByKey(c,"arr_index",j);d.push({source:g.name,target:k.name,value:5})}return d},g.prototype._getChildrenData=function(a){for(var b=this.opts,c=b.kData.nodes,d=[],e=0,f=c.length;e<f;e++)a.children.indexOf(c[e].data_id)!=-1&&d.push(c[e]);return{nodes:d,links:this._getLinksData(d)}},g.prototype._getRelationData=function(a){var b=this.opts,c=(b.kData.nodes,[]);return this._getRelationNode([a],0,c),c[0].symbolSize=60,{nodes:c,links:this._getLinksData(c)}},g.prototype._getRelationNode=function(a,b,c){var d=this.opts,e=d.kData.nodes,f=b,g=c||[],h=[];if(f<d.level){for(var i=0,j=a.length;i<j;i++){var k=e[a[i]];k.symbolSize=52-8*f,g.push(k),h=h.concat(k.arr_link)}for(var l=[],m=0,n=h.length;m<n;m++){var o=this._getArrValByKey(g,"arr_index",h[m]);null==o.new_index&&l.indexOf(h[m])==-1&&l.push(h[m])}f+=1,this._getRelationNode(l,f,g)}},g.prototype._showGraph=function(a){var b=this.opts,c=this._getArrValByKey(b.graphData,"id",a),d=b.$domObj.find('.read-echarts-list [data-id="'+a+'"]');try{b.graphId=a,d.addClass("read-active"),d.siblings().removeClass("read-active"),b.$domObj.find(".read-echarts-title").html("【"+c.name+"图谱】"),this._getFirstNodes(a),this._showEcharts({nodes:b.firstNodes,links:this._getLinksData()})}catch(a){console.warn("panelKnowledgePc.js -->echart错误！"+a)}},g.prototype.kPageFix=function(){for(var a=this.opts,c=a.knowledgeData,d=c.point_list[c.index-1].pid,e=c.point_list[c.index-1].chapter_id,f='span[type="knowledge"][data-pid="'+d+'"]',g=a.pages,h=c.pageCount||0,i=g.length;h<i;h++){if(b(g[h].html).find(f).length){c.pageCount=99999,c.page_index=null==c.page_index?h:c.page_index,2==a.pageColumn?a.page_index=(h+1)%a.pageColumn?h+1:h:a.page_index=h+1,c.page_index==a.page_index&&a.chapts[a.chapt_index].chapter_id==e&&a.$domObj.trigger("countpage:knowledgeAlready"),c.page_index=a.page_index,a.direction=a.kDirection||"next",a.turnMode=0;break}c.pageCount=h}a.state?a.alreadyState=0:a.alreadyState=1},g.prototype._renderLayout=function(){var a=this.opts,c=f.template(a.knowledgeHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj),a.$domObj.show();var e=a.$domObj.find(".read-echarts").height();a.$domObj.hide(),a.$domObj.find(".read-echarts").css("height",e)},g.prototype._bindEvent=function(){function a(){d.$domObj.find(".read-search").removeClass("read-active"),d.$domObj.find(".read-search .read-icon").toggleClass("read-hide"),setTimeout(function(){d.$domObj.find(".read-search input").blur()},400)}var c=this,d=c.opts,e=d.isMobile?"tap":"click";d.$domObj.find(".read-exit").on(e,function(){c.close()}),d.$domObj.find(".read-cover").on(e,function(){c.close()}),d.$domObj.find(".read-back").on(e,function(){d.$domObj.find(".read-knowledge-nav").fadeOut(0),d.$domObj.find(".read-knowledge-echarts").fadeIn()}),d.$domObj.find(".read-knowledge-nav .read-nav").on(e,"li",function(){c.close();var a=parseInt(b(this).attr("data-index"));d.knowledgeList.index=a+1,d.$domObj.trigger("knowledge:click",d.knowledgeList)}),d.$domObj.find(".read-echarts-list").on(e,"li",function(){var a=b(this).attr("data-id");c._showGraph(a)}),d.$domObj.find(".read-search input").focus(function(){d.$domObj.find(".read-search").hasClass("read-active")||(d.$domObj.find(".read-search").addClass("read-active"),d.$domObj.find(".read-search .read-icon").toggleClass("read-hide"))}).keydown(function(b){var e=d.$domObj.find(".read-search input").val().trim();13==b.keyCode&&""!=e&&(c._searchKnowledge(e),a())}),d.$domObj.find(".read-search input").blur(function(){d.$domObj.find(".read-search").hasClass("read-active")&&a()}),d.$domObj.find(".read-search .read-icon").on(e,function(){var a=d.$domObj.find(".read-search input").val().trim();""!=a&&c._searchKnowledge(a)})},g.prototype._searchKnowledge=function(a){function b(a){for(var b=-1,f=0,g=d.graphData.length;f<g;f++)for(var h=d.graphData[f].nodes,i=0,j=h.length;i<j;i++){var k=h[i];if(k.data_id==a){d.graphId=f,b=k.arr_index;break}}if(b==-1)d.dialogObj.setMsg(c.emptySearch),d.dialogObj.open();else{var l=e._getArrValByKey(d.graphData,"id",d.graphId),m=d.$domObj.find('.read-echarts-list [data-id="'+d.graphId+'"]');m.addClass("read-active"),m.siblings().removeClass("read-active"),d.$domObj.find(".read-echarts-title").html("【"+l.name+"图谱】"),e._getFirstNodes(d.graphId);var n=e._getRelationData(b);d.chartObj.clear(),d.chartOption.series[0].force={repulsion:180,gravity:.1,edgeLength:70},d.chartOption.series[0].nodes=n.nodes,d.chartOption.series[0].links=n.links,d.chartObj.setOption(d.chartOption)}}var d=this.opts,e=this;d.api.getSearchKnowledge({key:a},function(a){b(a.node_id)},function(a){d.dialogObj.setMsg(c.emptySearch),d.dialogObj.open()})},g.prototype._showEcharts=function(a){function b(a){var b=a.data;k.series[0].links,k.series[0].nodes;if(null==b.source&&null!=b.arr_index&&b.arr_link.length){var c=e._getRelationData(b.arr_index);j.clear(),k.series[0].force={repulsion:180,gravity:.1,edgeLength:70},k.series[0].nodes=c.nodes,k.series[0].links=c.links,j.setOption(k)}}function c(a){if(null==a.source){d.$domObj.find(".read-knowledge-nav").fadeIn(),d.$domObj.find(".read-knowledge-echarts").fadeOut(0);var b={id:a.data_id,name:a.name,point_list:[]};d.api.getGlossaryList({node_id:a.data_id,node_name:a.name},function(a){b.point_list=a.point_list;var c=f.template(d.listHtml)(b);d.knowledgeList=b,d.$domObj.find(".read-knowledge-nav .read-nav").html(c)},function(a){console.warn("[panelKnowledge.js]--获取知识失败!");var c=f.template(d.listHtml)(b);d.knowledgeList=b,d.$domObj.find(".read-knowledge-nav .read-nav").html(c)})}}var d=this.opts,e=this,g=a.nodes,h=a.links,i=d.$domObj.find(".read-echarts");i.html("");var j=echarts.init(i[0]);d.chartObj=j;var k={series:[{type:"graph",layout:"force",force:{repulsion:4*d.baseSize,gravity:.08,edgeLength:2*d.baseSize},symbolSize:50,name:"名词解释",roam:!0,itemStyle:{emphasis:{color:"red"}},label:{normal:{show:"true",textStyle:{color:"#000000"}}},gravity:1,scaling:1,draggable:!0,linkSymbol:"none",steps:2,nodes:g,links:h}]};d.chartOption=k,j.setOption(k);var l=0;j.on("mousedown",function(a){l+=1,setTimeout(function(){l=0},500)}),j.on("mouseup",function(a){setTimeout(function(){1==l?(b(a),l=0):2==l&&(c(a.data),l=0)},300)})},g.prototype.open=function(){for(var a=this,b=a.opts,c="",d="",f=0,g=b.graphData.length;f<g;f++){var h=b.graphData[f].name,i=b.graphData[f].id;h=h.length>5?h.substring(4)+"…":h,h+="图谱",b.graphId==i?(d=b.graphData[f].name,c+='<li class="read-active" data-id='+i+">"+h+"</li>"):c+="<li data-id="+i+">"+h+"</li>"}c="<ul>"+c+"</ul>",b.$domObj.find(".read-echarts-title").html("【"+d+"图谱】"),b.$domObj.find(".read-echarts-list").html(c),b.$domObj.show(),b.$domObj.find(".read-knowledge-nav").fadeOut(0),b.$domObj.find(".read-knowledge-echarts").fadeIn(0),setTimeout(function(){e(b.$domObj[0]).set("top","0px").duration("0.3s").end()},10);try{this._showEcharts({nodes:b.firstNodes,links:a._getLinksData()})}catch(a){console.warn("panelKnowledgePc.js -->echart错误！"+a)}},g.prototype.backOpen=function(){var a=this,b=a.opts;b.$domObj.show(),b.$domObj.find(".read-knowledge-nav").fadeIn(),b.$domObj.find(".read-knowledge-echarts").fadeOut(0),setTimeout(function(){e(b.$domObj[0]).set("top","0px").duration("0.3s").end()},10)},g.prototype.close=function(){var a=this,b=a.opts;e(b.$domObj[0]).set("top","-101%").duration("0.3s").end(),setTimeout(function(){b.$domObj.hide()},200)},g.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},g}(b,a,n,c,f),K=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=c.LOG,y=function(a){x.log("[reader.js] --> 构造函数! ");var d={domWrapId:"",hostUrl:"",book_id:"",passData:null,user_id:"",downloadPath:"download/books",isEncrypt:!1,isOnlyDownload:!1,isClient:!0,isMobile:!0,isDownloadImg:!0,pagingType:"page_1",isNightMode:!1,useEpubFile:!1,usePublish:!0,useBookmark:!0,useSettingBookmark:!1,useNote:!0,useCorrect:!0,useComplaint:!0,useSearch:!0,useExit:!0,useFonts:!0,useBgColor:!0,useLight:!0,usePageWay:!0,useEpubStyle:!0,useVideo:!0,useProbation:!1,useKEnhanced:!1,useKnowledge:!1,bookOpenTime:"",note_share_conf:{flag:!1},historyData:{page_offset:105},license_id:"doc_110220330",server:"server_101010101010",custom_nav_menus:[],getDataCb:c.emptyFunc,getCatalogCb:c.emptyFunc,probotionCb:null,allChapterFalseCb:null,exitReaderCb:c.emptyFunc,downloadCb:c.emptyFunc,getDisableChaptCb:c.emptyFunc,
_useLayout:!0,$readerWrap:null,$readerObj:null,_minW:300,_minH:500,_downloadState:{state:!0,rate:0},totalLen:0,chapt_index:0,page_index:0,chapts:null};this.opts=b.extend(!0,{},d,a),this.opts.data={catalog:null,readableChapter:null,progressData:null,settingData:null,copyright:null},this.opts.useBookmark||(this.opts.useSettingBookmark=!1),this.LoadingObj=new l({domSelector:this.opts.domWrapId,msg:r.loading}),this.DialogObj=new q({$wrapDomObj:b(this.opts.domWrapId)}),this._init()};return y.prototype._init=function(){var a=this.opts;this._check(),a.bookOpenTime=c.getTimestamp(),this.ApiObj=new d({baseData:{hostUrl:a.hostUrl,book_id:a.book_id,user_id:a.user_id,use_file_url:a.useEpubFile},passData:a.passData}),a.isClient?(this.getCatalog=this._getCatalogOffline,this.getBookmark=this._getBookmarkOffline,this.getNote=this._getNoteOffline,this.getChapterContent=this._getChapterOffline):(this.getCatalog=this._getCatalogOnline,this.getBookmark=this._getBookmarkOnline,this.getNote=this._getNoteOnline,this.getChapterContent=this._getChapterOnline),this._refresh(),this._renderLayout()},y.prototype._check=function(){var a=this.opts;a.$readerWrap=b(a.domWrapId),a.isOnlyDownload||""==a.domWrapId||0==a.length||a.$readerWrap.width()<a._minW||a.$readerWrap.height()<a._minH?a._useLayout=!1:(a._useLayout=!0,a.$readerObj=b("<div class='read-reader-mobile' />"),a.$readerWrap.append(a.$readerObj),this._setFontSize(),this.LoadingObj.open())},y.prototype._refresh=function(){var a=this.opts;a.isEncrypt?(this.saveFile=c._saveFileEncrypt,this.readFile=this._readFileDec):(this.saveFile=c._saveFileCommon,this.readFile=c._readFileCommon),a.isClient||(this.saveFile=c.emptyFunc,""==a.user_id&&(a.useNote=!1,a.useBookmark=!1,a.useSettingBookmark=!1))},y.prototype._readFileDec=function(a,d){var e=this.opts,f={license_id:e.license_id,server:e.server},g={license_id:p.license_id,server:p.server},h=b.extend(!0,{},g,f);c._readFileDecrypt(h,a,d)},y.prototype._renderLayout=function(){var a=this.opts;this.mainpage=null,this.cbnpage=null,this.settingpage=null,this.countPageObj=null,this.complainpage=null,this.searchpage=null,this.promptPage=null,this.viewImgPage=null,this._renderCatalog(),a._useLayout&&(this._renderBookmark(),this._renderNote(),this._renderPromptPage(),this._renderSetting(),this._renderMainpage(),this._renderCopyright(),this._renderComplaint(),this._renderKnowledge(),this._renderCorrect(),this._renderSearch(),this._renderCountpage(),this._renderViewImgPage(),this._renderVideoPage(),this._renderSelect())},y.prototype._renderMainpage=function(){var a=this.opts,b=this,d=e.getTempl("main");this.mainpage=new f({$readerObj:a.$readerObj,templHtml:d,isMobile:a.isMobile,useKEnhanced:a.useKEnhanced,useKnowledge:a.useKnowledge,useSettingBookmark:a.useSettingBookmark}),this.mainpage.on("mainpanel:left",function(){b.prev(),b.selectObj.close()}),this.mainpage.on("mainpanel:middle",function(){b.settingpage.open(),b.selectObj.close()}),this.mainpage.on("mainpanel:right",function(){b.next(),b.selectObj.close()}),this.mainpage.on("knowledge:open",function(){b.knowledgepage.backOpen()}),this.mainpage.on("knowledge:showKMenu",function(a,c){var d=b.countPageObj.searchChaptIndex(c.chapter_id);b.countPageObj.opts.kDirection=c.direction,b.countPageObj.turnChapter(d)}),this.mainpage.on("knowledge:closeKnowledge",function(a,c){b.countPageObj.interfaceFun=null}),this.mainpage.on("mainpanel:showBookmark",function(a,c){b.cbnpage.showBookmark(c)}),this.mainpage.on("mainpanel:img",function(c,d){b.viewImgPage.setOptions({imgSet:a.chapts[a.chapt_index].images,currentIdx:parseInt(d.currentIdx)}),b.viewImgPage.open()}),this.mainpage.on("mainpanel:video",function(c,d){a.useVideo&&b.videoPage.open(d)}),this.mainpage.on("mainpanel:showNote",function(){var d=a.chapts[a.chapt_index].chapter_id,e=a.chapts[a.chapt_index].chapter_name;c.hasFunction(b.cbnpage.noteObj,"showNote")&&b.cbnpage.noteObj.showNote(d,e)}),this.mainpage.on("mainpanel:swipeDown",function(c,d){console.log("[reader.js] --> 下滑添加书签!! ");var e=a.chapts[a.chapt_index],f={bookmarkid:d,pageSite:b.countPageObj.getFootPerc(),text:e.pages[a.page_index-1].txt,chapterId:e.chapter_id,chapterName:e.chapter_name};b.cbnpage.updateBookmarks(f)}),"undefined"!=typeof gli_keydown_event&&"function"==typeof gli_keydown_event&&(gli_keydown_event(1,function(){b.prev()},!0),gli_keydown_event(2,function(){b.next()},!0),gli_keydown_event(0,function(){b.exit()},!0));var g=function(a){a.addEventListener("touchstart",function(){var b=a.scrollTop,c=a.scrollHeight,d=b+a.offsetHeight;0===b?a.scrollTop=1:d===c&&(a.scrollTop=b-1)}),a.addEventListener("touchmove",function(b){a.offsetHeight<a.scrollHeight?b._isScroller=!0:b._isScroller=!1})};g(a.$readerObj.find(".read-selector-main")[0]),document.body.addEventListener("touchmove",function(a){a._isScroller===!1&&a.preventDefault()})},y.prototype._renderCopyright=function(){var a=this.opts,b=this;this.copyrightObj=new n({$readerObj:a.$readerObj,isMobile:a.isMobile,coprData:p.copyright,api:b.ApiObj}),this.copyrightObj.on("Copyright:saveCoprParam",function(a,c){b.opts.data.copyright=c,b._saveCopyright()}),this.copyrightObj.on("Copyright:getCoprParam",function(){b._getCoprDataOffline(function(a){b.opts.data.copyright=a.coprData,b.copyrightObj.opts.copyright=a.coprData,b.copyrightObj.run()},function(){b.copyrightObj.run()})}),this.copyrightObj.on("Copyright:exitReaderCb",function(){b.exit()})},y.prototype._renderSelect=function(){function a(a){var d=b.chapts[b.chapt_index];return a.chapter_id=d.chapter_id,a.chapter_name=d.chapter_name,a.note_page=a.posLen/b.totalLen+parseFloat(c.countPageObj.getHeadPerc()),a.note_page=a.note_page.toFixed(4),delete a.posLen,delete a.currPage,a}var b=this.opts,c=this;this.selectObj=new s({$readerObj:b.$readerObj,isMobile:b.isMobile,coprObj:c.copyrightObj,useNote:b.useNote,useCorrect:b.useCorrect}),this.selectObj.on("Select:addUnderline",function(b,d){var e=a(d);c.cbnpage.noteObj.addUnderline(e)}),this.selectObj.on("Select:delUnderline",function(a,d){c.cbnpage.noteObj.delNote({chapterid:b.chapts[b.chapt_index].chapter_id,noteid:d})}),this.selectObj.on("Select:addNote",function(b,d){var e=a(d);c.cbnpage.noteObj.editNote(e)}),this.selectObj.on("Select:correct",function(b,d){var e=a(d);c.correctpage.open(e)})},y.prototype._renderComplaint=function(){var a=this.opts,b=this,c=e.getTempl("complain");b.complainpage=new i({$readerObj:a.$readerObj,complainHtml:c,isMobile:a.isMobile,api:b.ApiObj,loading:b.LoadingObj})},y.prototype._renderCorrect=function(){var a=this.opts,b=this,c=e.getTempl("correct");b.correctpage=new t({$readerObj:a.$readerObj,correctHtml:c,isMobile:a.isMobile,api:b.ApiObj})},y.prototype._renderSearch=function(){var a=this.opts,b=this,c=e.getTempl("search");b.searchpage=new j({$readerObj:a.$readerObj,searchHtml:c,isMobile:a.isMobile,isClient:a.isClient,api:b.ApiObj,loading:b.LoadingObj}),b.searchpage.opts.$domObj.on("search:click",function(a,c){console.log("[reader.js] -> search:click 触发事件, 点击搜索结果跳转! "),b.countPageObj.turnPageByPerc(c)})},y.prototype._renderKnowledge=function(){var a=this.opts,b=this,c=e.getTempl("knowledge");this.knowledgepage=new w({$readerObj:a.$readerObj,knowledgeHtml:c,isMobile:a.isMobile,api:b.ApiObj,loading:b.LoadingObj,dialogObj:b.DialogObj}),b.knowledgepage.on("knowledge:click",function(a,c){var d=c.point_list[c.index-1].chapter_id,e=b.countPageObj.searchChaptIndex(d);c.pageCount=0,b.mainpage.showKnowledge(c),b.countPageObj.opts.knowledgeData=c,b.countPageObj.interfaceFun=b.knowledgepage.kPageFix,b.countPageObj.turnChapter(e)})},y.prototype._renderCatalog=function(){var a=this.opts,c=this;this.getCatalog(function(d){a.data.catalog=d,x.info("成功读取 目录数据 !","background:yellow;"),a.totalLen=parseInt(d.word_count),a.chapts=b.extend(!0,[],d.chapter);var f=b.extend(!0,[],d);if(a._useLayout){x.info("执行 【渲染布局】!");for(var g=0,i=0,j=f.chapter,k=0,l=j.length;k<l;k++)i+=j[k].textlen,j[k].textlen=i,0==j[k].chapter_status&&g++;g==j.length&&(c.LoadingObj.close(),null!=a.allChapterFalseCb?a.allChapterFalseCb():(c.DialogObj.setMsg(r.noReadContent),c.DialogObj.open())),c._checkPaging();var m=e.getTempl("cbn"),n=e.getTempl("cbnNavMenu"),o=e.getTempl("cbnNavBody"),p=e.getTempl("catalog"),q=e.getTempl("bookmark"),s=e.getTempl("note"),t=e.getTempl("noteEdit"),u=e.getTempl("noteDetail"),v=e.getTempl("noteShare"),w=c._getCachePath({fileName:"bookmark"}),y=c._getCachePath({fileName:"note"});c.cbnpage=new h({wrapDomId:a.domWrapId,$readerObj:a.$readerObj,templHtml:m,templHeadHtml:n,templBodyHtml:o,templCatalogHtml:p,templBookmarkHtml:q,templNoteHtml:s,isMobile:a.isMobile,isClient:a.isClient,saveFile:c.saveFile,bookmarkFilePath:w,noteFilePath:y,data:a.custom_nav_menus,api:c.ApiObj,useBookmark:a.useBookmark,useSettingBookmark:a.useSettingBookmark,useNote:a.useNote,editHtml:t,detailHtml:u,shareHtml:v,note_share_conf:a.note_share_conf}),c.cbnpage.renderCatalog(f),c.cbnpage.on("cbnbookmark:click",function(a,b){c.cbnpage.close(),c.countPageObj.turnPageByPerc(b)}),c.cbnpage.on("cbnnote:click",function(a,b){c.cbnpage.close(),c.countPageObj.turnPageByPerc(b)}),c.cbnpage.on("cbncatalog:click",function(b,d){var e=a.chapt_index,f=c.countPageObj.searchChaptIndex(d.id);return a.chapts[f].chapter_status?(e!==f&&c.countPageObj.turnChapter(f),void c.cbnpage.close()):(console.log("[reader.js] -->章节"+d.id+"无权限！"),a.getDisableChaptCb(),!1)})}},function(){x.info("[reader.js] --> _renderCatalog --> 渲染目录，获取目录信息失败!"),a.isClient?(x.info("[APP阅读] 本地无目录信息, 执行下载 !","background:pink;"),c.download(),c.LoadingObj.setMsg(r.downloadBooks)):(c.LoadingObj.close(),c.DialogObj.setMsg(r.checkNetwork),c.DialogObj.open())})},y.prototype._renderSetting=function(){function a(){}function b(){console.info("%c innerSuccessCb","background:yellow;");var a=e.getTempl("setting"),b=e.getTempl("fontlight"),l=e.getTempl("progress");j.settingpage=new g({wrapDomId:i.domWrapId,$readerObj:i.$readerObj,templHtml:a,fontlightHtml:b,progressHtml:l,isMobile:i.isMobile,progressData:k.progressData.progress,settingData:k.settingData,isNightMode:k.settingData.isNightMode,useComplaint:i.useComplaint,useSearch:i.useSearch,useExit:i.useExit,useFonts:i.useFonts,useBgColor:i.useBgColor,useLight:i.useLight,usePageWay:i.usePageWay,useSettingBookmark:i.useSettingBookmark,useKEnhanced:i.useKEnhanced,useKnowledge:i.useKnowledge}),j.settingpage.on("cbn:click",function(){console.log("[reader.js] -> 触发事件, 打开目录面板! "),j.cbnpage.open()}),j.settingpage.on("bookmark:setting",function(a,b){console.log("[reader.js] -> 设置面板点击书签按钮！ ");var c=i.chapts[i.chapt_index],d={bookmarkid:b,pageSite:j.countPageObj.getFootPerc(),text:c.pages[i.page_index-1].txt,chapterId:c.chapter_id,chapterName:c.chapter_name};j.cbnpage.updateBookmarks(d)}),j.settingpage.on("progress:setVal",function(){console.log("[reader.js] -> 触发事件, 弹出进度条! ");var a=j.countPageObj.getFootPerc()||0;j.settingpage.$progressObj.setValue(a)}),j.settingpage.on("progress:click",function(a,b){console.log("[reader.js] -> 触发事件, 拖动定位! "),j.countPageObj.turnPageByPerc(b)}),j.settingpage.on("progress:prev",function(){var a=i.chapt_index-1;return a<0?(a=0,!1):i.chapts[a].chapter_status?(j.countPageObj.turnChapter(a),void console.log("[reader.js] -> 触发事件, 章节向前翻! ")):(console.log("[reader.js] -->章节:"+i.chapts[a].chapter_name+"无权限！"),i.getDisableChaptCb(),!1)}),j.settingpage.on("progress:next",function(){var a=i.chapt_index+1;return a===i.chapts.length?(a-=1,!1):i.chapts[a].chapter_status?(j.countPageObj.turnChapter(a),void console.log("[reader.js] -> 触发事件, 章节向后翻! ")):(console.log("[reader.js] -->章节:"+i.chapts[a].chapter_name+"无权限！"),i.getDisableChaptCb(),!1)}),j.settingpage.on("font:click",function(){console.log("[reader.js] -> 触发事件, 设置-字体, 亮度 等! ")});var m=k.settingData.fontSize;c({oldValue:m.value,newValue:m.value}),j.settingpage.on("size:click",function(a,b){console.log("[reader.js] -> 字体大小! "),c(b)}),j.settingpage.on("complaint:click",function(){console.log("[reader.js] -> 触发事件, 打开版权投诉面板! "),j.complainpage.open()}),j.settingpage.on("search:click",function(){console.log("[reader.js] -> 触发事件, 打开搜索面板! "),j.searchpage.open()}),j.settingpage.on("knowledge:click",function(){console.log("[reader.js] -> 触发事件, 打开知识型面板! "),j.knowledgepage.open()}),j.settingpage.on("pageway:click",function(a,b){console.log("[reader.js] -> 触发事件, 翻页方式 "+b.newValue),i.pagingType=b.newValue,i.$readerObj.attr("data-pageway",i.pagingType)});var n=k.settingData.fontFamily;d({oldValue:n.value,newValue:n.value}),j.settingpage.on("family:click",function(a,b){x.info("[reader.js] -> 字体类型! "),d(b)});var o=k.settingData.bgColor;f({oldValue:o.value,newValue:o.value}),j.settingpage.on("bgcolor:click",function(a,b){x.info("[reader.js] -> 背景颜色! "),f(b)}),i.isNightMode=k.settingData.isNightMode,h(),j.settingpage.on("night:click",function(a,b){x.info("[reader.js] -> 夜间模式切换! "),i.isNightMode=b,h()}),j.settingpage.on("close:click",function(){console.log("[reader.js] -> 捕获事件, 关闭面板! "),j._saveSettingFile()}),j.settingpage.on("out:click",function(){console.log("[reader.js] -> 捕获事件, 退出阅读器! "),j.exit()})}function c(a){j._deletePages(),j.mainpage.setFontSize(a),j.countPageObj.setFontSize(a)}function d(a){j._deletePages(),j.mainpage.setFontFamily(a),j.countPageObj.setFontFamily(a)}function f(a){j.mainpage.setBgColor(a)}function h(){i.isNightMode?i.$readerObj.addClass("read-night"):i.$readerObj.removeClass("read-night")}console.info("%c _renderSetting","background:yellow;");var i=this.opts,j=this,k=i.data;j._getProgressDataOffline(function(c){j._getProgressDataOnline(function(d){parseInt(d.bookCloseTime)>parseInt(c.progressData.updateTime)?k.progressData={updateTime:d.bookCloseTime,progress:d.progress}:k.progressData=c.progressData,j._getSettingDataOffline(function(a){k.settingData=a.settingData,b()},function(){a()})},function(){k.progressData=c.progressData,j._getSettingDataOffline(function(a){k.settingData=a.settingData,b()},function(){a()})})},function(){a()})},y.prototype._checkPaging=function(){var a=this,b=this.opts;setTimeout(function(){if(null==b.data.progressData)a._checkPaging();else{if(b.isClient){var c=gli_get_cache_path()+a._getCachePath({fileName:""})||"";c=c.substr(0,c.lastIndexOf("."))}else var c="";a.countPageObj.begin({totalLen:b.totalLen,chapts:b.chapts,chapt_index:b.chapt_index,progressData:b.data.progressData,path:c})}},800)},y.prototype._renderCountpage=function(){var a=this,b=this.opts,c=e.getTempl("countpage");this.countPageObj=new k({templHtml:c,$readerObj:b.$readerObj,isMobile:b.isMobile,useEpubStyle:b.useEpubStyle,useProbation:b.useProbation,isClient:b.isClient}),this.delicateObj=new u({wrapDomObj:b.$readerObj.find(".read-delicate")[0]});this.countPageObj.on("countpage:getChapterContent",function(b,c){a._pagingChapter(c)}),this.countPageObj.on("countpage:showPage",function(c,d){b.usePublish&&(d.chapterContent=a.delicateObj.excute({html:d.chapterContent})),a._showPage(d)}),this.countPageObj.on("countpage:finish",function(c,d){var e=b.chapts[d],f=a.countPageObj.getPagingData();e.pages=f.pages,e.images=f.images,e.html=f.html,e.isPretreat=f.isPretreat,b.getDataCb()}),this.countPageObj.on("countpage:already",function(){a.LoadingObj.close(),0===b.data.settingData.readTimes&&(a.promptPage.open(0),b.data.settingData.readTimes++)}),this.countPageObj.on("countpage:knowledgeAlready",function(){a.mainpage.showKnowledge()}),this.countPageObj.on("countpage:downloadPhoto",function(b,c){a._downloadPhoto(c)}),this.countPageObj.on("countpage:noright",function(c,d){null!=b.probotionCb?b.probotionCb():(a.DialogObj.setMsg(r.testReadOver),a.DialogObj.open())})},y.prototype._renderViewImgPage=function(){var a=this.opts;this.viewImgPage=new o({$wrapObj:a.$readerObj,dataTempl:e.getTempl("viewImg"),isClient:a.isClient,isMobile:a.isMobile,clientType:a.clientType,isDownloadImg:a.isDownloadImg})},y.prototype._renderVideoPage=function(){var a=this.opts;a.useVideo&&(this.videoPage=new v({$readerObj:a.$readerObj,videoTemplHtml:e.getTempl("video"),isClient:a.isClient,isMobile:a.isMobile,clientType:a.clientType}))},y.prototype._renderPromptPage=function(){var a=this.opts;this.promptPage=new m({$wrapObj:a.$readerObj,isMobile:a.isMobile,contentSet:[e.getTempl("firstOpen"),"<div class='read-content'> TEST_2 !</div>"]})},y.prototype._setFontSize=function(){var a=this.opts,b=a.$readerWrap.width();b=b>750?750:b,a.$readerWrap.css("font-size",b/7.5+"px")},y.prototype._getCatalogOffline=function(a,b){var d=(this.opts,this._getCachePath({fileName:"catalog"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},y.prototype._getCatalogOnline=function(a,b){this.ApiObj.getBookCatalog({},function(b){a(b)},function(a){b(a)})},y.prototype._getBookmarkOffline=function(a,b){x.log("[reader.js] -> _getBookmarkOffline! ");var d=(this.opts,this._getCachePath({fileName:"bookmark"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},y.prototype._getBookmarkOnline=function(a,b){x.log("[reader.js] -> _getBookmarkOnline! "),this.ApiObj.getBookmark({},function(b){a(b)},function(a){console.warn("[reader.js]--获取书签信息失败!"),b(a)})},y.prototype._renderBookmark=function(){var a=this.opts,b=this;if(a.useBookmark)return b.cbnpage?void this.getBookmark(function(d){function e(){b._getBookmarkOnline(function(a){var c=b._getCachePath({fileName:"bookmark"}),d=JSON.stringify(a);b.saveFile(c,d),b.cbnpage.renderBookmark(a)},function(){b.cbnpage.renderBookmark(d)})}if(x.info("成功读取 书签数据 !","background:yellow;"),a.isClient){var f=c.filterLocalData(d.bookmark_list);0==f.length?e():b.ApiObj.batchUpdateBookmark({time_stamp:d.time_stamp,bookmark_list:f},function(a){e()},function(a){b.cbnpage.renderBookmark(d)})}else b.cbnpage.renderBookmark(d)},function(){x.warn("[reader.js] --> _renderBookmark --> 渲染书签，获取书签信息失败!"),a.isClient?(x.info("[APP阅读] 本地无书签信息, 执行下载 !","background:pink;"),b.downloadBookmark()):b.cbnpage.renderBookmark()}):void setTimeout(function(){b._renderBookmark()},1e3)},y.prototype.downloadBookmark=function(){var a=this,b=this.opts;x.log("[Mobile.js] -> downloadBookmark "+b.book_id);var c=a._getCachePath({fileName:"bookmark"});this._getBookmarkOnline(function(b){x.log("成功下載 书签 并 保存!");var d=JSON.stringify(b);a.saveFile(c,d),setTimeout(function(){a.cbnpage.renderBookmark(b)},300)},function(b){x.warn("[Mobile.js] -> downloadBookmark "+b),a.cbnpage.renderBookmark()})},y.prototype._getNoteOffline=function(a,b){x.log("[reader.js] -> _getNoteOffline! ");var d=(this.opts,this._getCachePath({fileName:"note"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},y.prototype._getNoteOnline=function(a,b){x.log("[reader.js] -> _getNoteOnline! "),this.ApiObj.getBookNote({},function(b){a(b)},function(a){x.warn("[reader.js]--获取笔记信息失败!"),b(a)})},y.prototype._getSettingDataOffline=function(a,b){var d=this,e=d.opts,f={};if(!e.isClient)return f.settingData=p.settingData,void a(f);var g=this._getCachePath({fileName:"settingPanel",bid:"b_all",uid:"u_all"});this.readFile(g,function(b){null==b?(f.settingData=p.settingData,d.saveFile(g,JSON.stringify(f)),a(f)):(b=c.doDecodeData(b),a(JSON.parse(b)))})},y.prototype._getProgressDataOffline=function(a,b){var d=this,e=d.opts,f={};if(!e.isClient)return f.progressData=p.progressData,f.progressData.updateTime="0",void a(f);var g=this._getCachePath({fileName:"progress"});this.readFile(g,function(b){null==b?(f.progressData=p.progressData,f.progressData.updateTime="0",d.saveFile(g,JSON.stringify(f)),a(f)):(b=c.doDecodeData(b),a(JSON.parse(b)))})},y.prototype._getProgressDataOnline=function(a,b){x.log("[readerMobile.js] -> _getProgressDataOnline! "),this.ApiObj.getProgressData({},function(b){a(b)},function(a){x.warn("[reader.js]--在线获取 阅读进度 失败!"),b(a)})},y.prototype._renderNote=function(){var a=this.opts,b=this;if(a.useNote)return b.cbnpage?void this.getNote(function(d){function e(){b._getNoteOnline(function(a){var c=b._getCachePath({fileName:"note"}),d=JSON.stringify(a);b.saveFile(c,d),b.cbnpage.renderNote(a)},function(){b.cbnpage.renderNote(d)})}if(x.info("成功读取 笔记数据 !","background:yellow;"),a.isClient){var f=c.filterLocalData(d.note_list);0==f.length?e():b.cbnpage.noteObj.batchUpdateNote({time_stamp:d.time_stamp,note_list:f},function(a){e()},function(a){b.cbnpage.renderNote(d)})}else b.cbnpage.renderNote(d)},function(){x.warn("[reader.js] --> _renderNote --> 渲染笔记，获取笔记信息失败!"),a.isClient?(x.info("[APP阅读] 本地无笔记信息, 执行下载 !","background:pink;"),b.downloadNote()):b.cbnpage.renderNote()}):void setTimeout(function(){b._renderNote()},100)},y.prototype.downloadNote=function(){var a=this,b=this.opts;x.log("[Mobile.js] -> download "+b.book_id);var c=this._getCachePath({fileName:"note"});this._getNoteOnline(function(b){x.log("成功下載 笔记 并 保存!");var d=JSON.stringify(b);a.saveFile(c,d),setTimeout(function(){a.cbnpage.renderNote(b)},300)},function(b){x.warn("[Mobile.js] -> downloadNote "+b),a.cbnpage.renderNote()})},y.prototype._getChapterOffline=function(a,b,d){x.log("[reader.js] -> _getChapterOffline! ");var e=this._getCachePath({fileName:a.chapter_name});this.readFile(e,function(a){null==a?d():(a=c.doDecodeData(a),b(a))})},y.prototype._getChapterOnline=function(a,b,c){var d=this.opts;d.useKnowledge&&(a.type="knowledge"),this.ApiObj.getChapter(a,function(a){b(a)},function(a){c(a)})},y.prototype._updateDownloadState=function(a){for(var b=this.opts,c=b.data.catalog?b.data.catalog.chapter:[],d=0,e=c.length;d<e;d++)if(c[d].chapter_id==a.chapter_id){c[d].isDownload=a.isDownload;break}},y.prototype._saveCatalog=function(){var a=this.opts,b=this._getCachePath({fileName:"catalog"}),c=JSON.stringify(a.data.catalog);this.saveFile(b,c)},y.prototype._saveChapter=function(a,b){var c=this.opts,d=this._getCachePath({fileName:a});if(c.isOnlyDownload){var e=d.substr(0,d.lastIndexOf("/")+1);this._batchdownloadPhoto(e,b)}this.saveFile(d,b)},y.prototype._saveSettingFile=function(a){var b=(this.opts,this._getCachePath({fileName:"settingPanel",bid:"b_all",uid:"u_all"}));if(this.settingpage){var c=this.settingpage.getSettingData();a&&(c.readTimes=parseInt(c.readTimes)+1),this.saveFile(b,JSON.stringify({settingData:c}))}},y.prototype._saveProgressFile=function(){var a=this.opts,b=a.data.progressData,d=this._getCachePath({fileName:"progress"});b.updateTime=c.getTimestamp(),b.progress=this.countPageObj.getFootPerc(),this.saveFile(d,JSON.stringify({progressData:b}))},y.prototype._saveBookState=function(){var a=this.opts,b=this,d=a.chapts[a.chapt_index].chapter_id,e=[],f=this._getCachePath({fileName:"bookState"});this.readFile(f,function(g){null!=g&&(g=c.doDecodeData(g),g=JSON.parse(g),e=g),e.push({bookOpenTime:a.bookOpenTime,bookCloseTime:c.getTimestamp(),progress:b.countPageObj.getFootPerc(),chapter_id:d}),b.ApiObj.setBookState({bookStateData:e},function(){b.saveFile(f,JSON.stringify([]))},function(){b.saveFile(f,JSON.stringify(e))})})},y.prototype._getCoprDataOffline=function(a,b){var d=this,e=this.opts,f=this._getCachePath({fileName:"copyright"});return e.isClient?void this.readFile(f,function(e){if(null==e){var g={};g.coprData=p.copyright,d.opts.data.copyright=p.copyright,d.saveFile(f,JSON.stringify(g)),b()}else e=c.doDecodeData(e),a(JSON.parse(e))}):(e.data.copyright=p.copyright,b(),!1)},y.prototype._saveCopyright=function(){var a=this.opts,b=this._getCachePath({fileName:"copyright"}),c=JSON.stringify({coprData:a.data.copyright});this.saveFile(b,c)},y.prototype._downloadSingleChapter=function(a,b,c){var d=this,e=d.opts;a&&a.chapter_status&&this._getChapterOnline({chapter_id:a.chapter_id},function(c){x.info("[reader.js] -> 下载单个章节:"+a.chapter_name),a.isDownload=!0,d._saveChapter(a.chapter_name,c),d._updateDownloadState(a),d._saveCatalog(),b(),e.downloadCb()},function(a){x.warn("[reader.js] -> 获取单个 [章节内容] 失败!"+a),c()})},y.prototype._downloadChapter=function(){for(var a=this.opts,b=a.data.readableChapter||[],d=-1,e=this,f=0,g=b.length;f<g;f++)if(!b[f].isDownload){d=f;break}-1!==d&&e._downloadSingleChapter(b[d],function(f){a.isOnlyDownload&&e._downloadChapter(),30==a._downloadState.rate&&e._renderCatalog(),a._downloadState={state:!0,rate:c.getProgressRate(b.length,d+1,30)}},function(b){a._downloadState.rate<=30&&(console.error("[reader.js] --> _downloadChapter; 只有目录下载成功， 无章节内容."),e.LoadingObj.close(),e.DialogObj.setMsg(r.chapterFalse),e.DialogObj.open())})},y.prototype.download=function(){var a=this.opts,b=this;x.info("[reader.js] --> download!  userId:"+a.user_id+" , book_id:"+a.book_id),this._getCatalogOnline(function(c){a.data.catalog=c;var d=c.chapter,e=[];a._downloadState.rate=30;for(var f=0,g=d.length;f<g;f++)if(d[f].isDownload=!1,d[f].chapter_status){var h={};h.chapter_id=d[f].chapter_id,h.chapter_name=d[f].chapter_name,h.isDownload=d[f].isDownload,h.chapter_status=d[f].chapter_status,e.push(h)}return 0==e.length?(b.LoadingObj.close(),void(null!=a.allChapterFalseCb?a.allChapterFalseCb():(b.DialogObj.setMsg(r.noReadContent),b.DialogObj.open()))):(a.data.readableChapter=e,a.getCatalogCb(),void(a.useEpubFile||(b._saveCatalog(),b._downloadChapter())))},function(a){x.warn("[reader.js] -> download "+a),b.LoadingObj.close(),b.DialogObj.setMsg(r.checkNetwork),b.DialogObj.open()})},y.prototype.getDownloadInfo=function(){var a=this.opts,b=a._downloadState;return b},y.prototype.getCatalogInfo=function(){var a=this.opts,b=a.data.catalog||[];return b},y.prototype.getPagesAll=function(){var a=this.opts,b=a.chapts||[];return b},y.prototype._downloadPhoto=function(a){var b=(this.opts,a.new_src.replace(gli_get_cache_path(),""));c._downloadImageFile(a.old_src,b)},y.prototype._batchdownloadPhoto=function(a,c){var d=gli_get_cache_path()+a+"images/",e=this;b(c).find("img").each(function(){var a=b(this).attr("src"),c=a.substring(a.lastIndexOf("/")+1,a.length),f=d+c;e._downloadPhoto({old_src:a,new_src:f})})},y.prototype._pagingChapter=function(a){var b=this,d=b.opts,e=d.chapts[a];return e.chapter_status?void(d.chapts[a].pages&&d.chapts[a].pages.length?(b.countPageObj.setChapterData({index:a,getHtml:d.chapts[a].html,pages:d.chapts[a].pages,isPretreat:d.chapts[a].isPretreat}),b.countPageObj.readyData()):(b.LoadingObj.setMsg(r.loading),b.LoadingObj.open(),d.chapts[a].isPretreat?(b.countPageObj.setChapterData({index:a,getHtml:d.chapts[a].html,pages:[],isPretreat:d.chapts[a].isPretreat}),b.countPageObj.excutePaging()):b.getChapterContent({chapter_id:e.chapter_id,chapter_name:e.chapter_name},function(c){d.chapts[a].html=c,b.countPageObj.setChapterData({index:a,getHtml:c,pages:[],isPretreat:d.chapts[a].isPretreat}),b.countPageObj.excutePaging()},function(f){x.warn("[reader.js]--> pagingChapter:"+f),b._downloadSingleChapter(e,function(){for(var e=0,f=d.chapts,g=0;g<f.length;g++)f[g].chapter_status&&e++;b._pagingChapter(a),d._downloadState={state:!0,rate:c.getProgressRate(e,a+1,d._downloadState.rate)}},function(){b.LoadingObj.close(),b.DialogObj.setMsg(r.chapterFalse),b.DialogObj.open(),b.countPageObj.opts.chapt_index=d.chapt_index,b.countPageObj.opts.page_index=d.page_index})}))):(console.log("[reader.js] --> 该章节您没有权限！"),null!=d.probotionCb&&d.probotionCb(),!1)},y.prototype._deletePages=function(){var a=this.opts,b=a.chapts;if(!b)return!1;for(var c=0,d=b.length;c<d;c++)b[c].pages&&(b[c].pages=[])},y.prototype.next=function(){this.countPageObj.turnPage("next")},y.prototype.prev=function(){this.countPageObj.turnPage("prev")},y.prototype._showPage=function(a){x.info("[reader.js]--> showPage");var b=this.opts;if(!a.turnMode&&b.chapt_index===a.chapt_index&&b.page_index===a.page_index)return this.mainpage.highLight(),!1;b.chapt_index=a.chapt_index,b.page_index=a.page_index,a.currPage=a.pagePerc,this.mainpage.showPagedata(a,b.pagingType);var c=b.chapts[b.chapt_index].chapter_name,d=b.chapts.length,e=this.countPageObj.getFootPerc();this.settingpage.setProgressVal({name:c,currIndex:b.chapt_index+1,total:d,val:e,turnMode:a.turnMode})},y.prototype._getCachePath=function(a){var b=this.opts,d=b.downloadPath,e=a.bid||b.book_id,f=a.uid||b.user_id,g=a.fileName||"",h=c.createBookPath(f,e,g,d);return h},y.prototype.delLocalData=function(){var a=this,b=a.opts;"function"==typeof gli_file_unlink&&gli_file_unlink(b.downloadPath)},y.prototype._unbindAppEvents=function(){"undefined"!=typeof gli_keydown_event&&"function"==typeof gli_keydown_event&&(gli_keydown_event(0,function(){},!1),gli_keydown_event(1,function(){},!1),gli_keydown_event(2,function(){},!1)),"undefined"!=typeof gli_photo_change&&"function"==typeof gli_photo_change&&gli_photo_change(function(){},!1)},y.prototype.getLocalBooksId=function(a){var b=this,c=b.opts,d=c.downloadPath+"/"+c.user_id;"function"==typeof gli_file_getfolder&&"function"==typeof a?gli_file_getfolder(d,function(b){var c=[];b&&b.length>0&&(c=b.split(";")),a(c)}):console.warn("%c gli_file_getfolder 方法不存在","background:yellow;")},y.prototype.exit=function(a){var b=this.opts;try{this._saveProgressFile(),this._saveSettingFile(!0),this._saveBookState(),this._unbindAppEvents()}catch(a){console.error("[readerMObile.js] --> exit"+a)}b.exitReaderCb()},y.prototype.open=function(a){console.info("[readerMobile.js] --> open!")},y}(b,a,c,d,e,g,k,t,u,v,y,z,A,B,C,D,m,n,E,G,H,I,J),L=function(a,b){var c=(a._,{countpage:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-countpage-panel%20read-selector-countpage%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-control-wh%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-page-1%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-countpage-content%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-countpage%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-page-2%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),main:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-main-panel%20read-selector-main%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-control-wh%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-page-1%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-page-2%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-delicate-container%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-delicate%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progressbar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-big-enhanced%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-enhanced-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E5%A2%9E%E5%BC%BA%E8%AF%8D%E6%9D%A1%E9%87%8A%E4%B9%89%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-back%22%3E%E8%BF%94%E5%9B%9E%E6%AD%A3%E6%96%87%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-enhanced-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%3E%3C/h1%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-enhanced-content%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),
setting:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-setting-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-exit-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E9%80%80%E5%87%BA%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%20read-cf%22%3E%3Cspan%3E%3C/span%3E%3C/a%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-kEnhanced-btn%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search-ipt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type=%22text%22%20placeholder=%22%E8%AF%B7%E8%BE%93%E5%85%A5%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%22%20/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-left%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-cbn-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-complaint-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-knowledge-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-right%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%E7%89%88%E5%BC%8F%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-font-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-hvtype-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-pictxt-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-epub-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-pdf-btn%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%3C/a%3E%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-control-wh%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-light-box%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E4%BA%AE%E5%BA%A6%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%20read-light-drag%22%3E%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-box%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E5%BF%AB%E9%80%9F%E8%B7%B3%E8%BD%AC%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%20read-progress-drag%22%3E%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),fontType:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-fonttype-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-f-size%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class=%22read-font-title%22%3E%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F%3C/h2%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%22%20data-class=%221%22%3EA%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-active%22%20data-class=%222%22%3EA%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%22%20data-class=%223%22%3EA%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%22%20data-class=%224%22%3EA%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-f-family%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class=%22read-font-title%22%3E%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE%3C/h2%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-cf%20read-active%22%20data-class=%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-family-name%22%3E%E9%9B%85%E9%BB%91(%E9%BB%98%E8%AE%A4)%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-check%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-has-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-not-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-a-btn%22%3E%E4%B8%8B%E8%BD%BD%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-cf%22%20data-class=%222%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-family-name%22%3E%E9%BB%91%E4%BD%93%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-check%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-has-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-not-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-a-btn%22%3E%E4%B8%8B%E8%BD%BD%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-cf%22%20data-class=%223%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-family-name%22%3E%E5%AE%8B%E4%BD%93%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-check%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-has-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-not-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-a-btn%22%3E%E4%B8%8B%E8%BD%BD%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%88%86%E5%89%B2%E7%BA%BF%20%E6%9B%B4%E5%A4%9A--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-more-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-more-font-btn%20read-disabled%22%3E%3Cspan%3E%E6%9B%B4%E5%A4%9A%3C/span%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),manuscriptPic:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-pictxt-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-f-family%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class=%22read-font-title%22%3E%E9%80%89%E6%8B%A9%E9%98%85%E8%AF%BB%E6%A8%A1%E5%BC%8F%3C/h2%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-cf%20read-active%22%20data-model=%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-family-name%22%3E%E6%AD%A3%E5%B8%B8%E6%A8%A1%E5%BC%8F(%E9%BB%98%E8%AE%A4)%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-check%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-has-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-cf%22%20data-model=%222%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-family-name%22%3E%E5%8F%AA%E6%98%BE%E7%A4%BA%E5%8E%9F%E7%A8%BF%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-check%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-has-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22read-cf%22%20data-model=%223%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-family-name%22%3E%E5%9B%BE%E6%96%87%E5%AF%B9%E7%85%A7%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-check%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-has-font%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),complain:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-complaint-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%3E%E7%89%88%E6%9D%83%E6%8A%95%E8%AF%89%3C/h1%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-edit%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20placeholder=%22%E4%BF%9D%E6%8A%A4%E7%89%88%E6%9D%83%EF%BC%8C%E5%85%B1%E5%BB%BA%E7%99%BE%E5%AE%B6%E4%BA%89%E9%B8%A3%E7%9A%84%E5%8E%9F%E5%88%9B%E5%A4%A7%20%E7%8E%AF%E5%A2%83%EF%BC%8C%E6%84%9F%E8%B0%A2%E6%9C%89%E6%82%A8%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btn-div%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-send%22%3E%E5%8F%91%E9%80%81%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-cancel%22%3E%E5%8F%96%E6%B6%88%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),search:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-search-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%3C/ul%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),correct:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-correct-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%3E%E7%BA%A0%E9%94%99%E6%96%87%E5%AD%97%3C/h1%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%E8%89%B2%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-edit%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20placeholder=%22%E5%B8%AE%E5%8A%A9%E6%88%91%E4%BB%AC%E7%BA%A0%E6%AD%A3%E9%94%99%E8%AF%AF%EF%BC%8C%E8%AE%A9%E6%88%91%E4%BB%AC%E6%9B%B4%E5%A5%BD%E7%9A%84%20%E4%B8%BA%E5%A4%A7%E5%AE%B6%E6%9C%8D%E5%8A%A1%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btn-div%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-send%22%3E%E5%8F%91%E9%80%81%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-cancel%22%3E%E5%8F%96%E6%B6%88%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),cbn:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-cbn-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cbn-box%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),cbnNavMenu:decodeURI("%0A%20%20%20%20%3C%25%20_.each(obj,%20function(%20menu%20)%7B%20%20%20%25%3E%0A%20%20%20%20%3Cdiv%20class=%22read-custom-%3C%25=%20obj.length%20%25%3E%20%3C%25=%20menu.state%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%20data-view=%22%3C%25=%20menu.view%20%25%3E%22%3E%3C%25=%20menu.text%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C%25%20%20%20%7D);%20%20%25%3E%0A"),cbnNavBody:decodeURI("%0A%20%20%20%20%3C%25%20_.each(obj,%20function(%20menu%20)%7B%20%20%20%25%3E%0A%20%20%20%20%3Cdiv%20class=%22%3C%25=%20menu.view%20%25%3E%20%3C%25%20if(menu.state%20!=%20'read-active')%7B%20%25%3E%20read-hide%20%20%3C%25%20%7D%20%25%3E%20%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-no-%3C%25=%20menu.name%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-h-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-h-center%22%3E%3C%25=%20menu.prompt%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C%25%20%20%20%7D);%20%20%25%3E%0A"),catalog:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-has-catalog%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-book-info%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%20class=%22read-text-over%22%3E%3C%25=%20obj.name%20%25%3E%3C/h1%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch2%20class=%22read-text-over%22%3E%3C%25=%20obj.subtitle%20%25%3E%3C/h2%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-catalog-author%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-lf%20read-text-over%22%3E%3C%25=%20obj.author%20%25%3E%3C/span%3E%3Cspan%20class=%22%22%3E%E8%91%97%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-lf%20read-text-over%22%3E%3C%25=%20obj.translator%20%25%3E%3C/span%3E%3Cspan%20class=%22%22%3E%E8%AF%91%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-catalog-visitors%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%3Cspan%3E%3C%25=%20obj.read_num%20%25%3E%20%E9%98%85%E8%AF%BB%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%3Cspan%3E%3C%25=%20obj.word_count%20%25%3E%20%E5%AD%97%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-list%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22%3C%25%20if%20(!chapt.chapter_status)%20%7B%20%25%3Eread-no-data%3C%25%20%7D%20%25%3E%22%20data-status=%22%3C%25=%20chapt.chapter_status%20%25%3E%22%20data-id=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-chapter-name%22%3E%3C%25=%20chapt.chapter_name%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-chapter-seat%22%3E%3C%25=%20(parseInt(chapt.textlen)/parseInt(obj.word_count)%20*%20100).toFixed(2)%20%25%3E%25%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),note:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-has-note%22%3E%0A%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter_list,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%3C%25%20if(!_.isEmpty(chapt.note_list))%7B%20%25%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-one-chapter-notes%22%20data-chapterid=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-chapter%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.chapter_name%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-chapter-count%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.note_count%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(chapt.note_list,%20function(note)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note%22%20data-noteid=%22%3C%25=%20note.note_id%20%25%3E%22%20data-percent=%22%3C%25=%20note.note_page%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-left%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20note.original%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20note.note_text%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-note-time%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-note-or-underline%20read-note-%3C%25=%20!note.note_text%20?%200%20:%201%20%25%3E%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=(parseFloat(note.note_page)*100).toFixed(2)+%20%22%25%22%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-time%22%3E%3C%25=%20obj.nowDate%20==%20note.note_time.substr(0,%2010)%20?%20note.note_time.substring(11)%20:%20note.note_time.substr(0,%2010)%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D;%20%25%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20class=%22read-no-note%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF%E6%8C%89%E6%96%87%E5%AD%97%E5%8F%AF%E6%B7%BB%E5%8A%A0%E7%AC%94%E8%AE%B0%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),bookmark:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-has-bookmark%20%22%3E%0A%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter_list,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-one-chapter-bookmarks%22%20data-chapterid=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%20data-chaptername=%22%3C%25=%20chapt.chapter_name%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-chapter%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.chapter_name%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-chapter-count%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.count%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(chapt.bookmark_list,%20function(bookmark)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark%22%20data-page=%22%3C%25=%20bookmark.bookmark_page%20%25%3E%22%20data-bookmarkid=%22%3C%25=%20bookmark.bookmark_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-left%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20bookmark.bookmark_text%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-bookmark-time%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-bookmark-percent%22%3E%3C%25=%20(parseFloat(bookmark.bookmark_page)*100).toFixed(2)%20%25%3E%25%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-time%22%3E%3C%25=%20bookmark.bookmark_time%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-bookmark-del%22%3E%3Ca%20href=%22javascript:void(0)%22%20class=%22read-tv-a%20read-cf%22%3E%3Cspan%3E%3C/span%3E%3C/a%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20class=%22read-no-bookmark%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-h-center%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-h-center%22%3E%E9%98%85%E8%AF%BB%E6%97%B6%E7%82%B9%E5%87%BB%E5%B7%A6%E4%B8%8A%E8%A7%92%E7%9A%84%E4%B9%A6%E7%AD%BE%E5%8D%B3%E5%8F%AF%E6%B7%BB%E5%8A%A0%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),viewImg:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-bigimg-panel%20read-hide%22%20id=%22picture_panel%22%3E%0A%20%20%20%20%20%20%20%20%3Cheader%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-back-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E%E8%BF%94%E5%9B%9E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-h-center%22%3E%E6%9F%A5%E7%9C%8B%E5%9B%BE%E7%89%87%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20class=%22read-a-btn%20read-rotate-btn%22%3E%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20class=%22read-rt%20read-a-btn%20read-save-btn%22%3E%E4%BF%9D%E5%AD%98%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/header%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%20id=%22big_img_view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-viewimg-content%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-prev%22%3E%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-next%22%3E%3C/a%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),
knowledge:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-knowledge-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-knowledge-echarts%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btns%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-exit%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%E9%80%80%E5%87%BA%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type=%22text%22%20placeholder=%22%E8%AF%B7%E8%BE%93%E5%85%A5%E6%82%A8%E6%83%B3%E6%90%9C%E7%B4%A2%E7%9A%84%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E5%85%B3%E9%94%AE%E5%AD%97%22%20/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-echarts-title%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-echarts%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-echarts-list%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-knowledge-nav%20read-cf%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btns%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-exit%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%E9%80%80%E5%87%BA%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-back%22%3E%E8%BF%94%E5%9B%9E%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-nav%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteEdit:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-edit-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%3E%E7%BC%96%E8%BE%91%E7%AC%94%E8%AE%B0%3C/h1%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%E8%89%B2%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-edit%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20placeholder=%22%E8%BD%BB%E6%9D%BE%E8%AE%B0%E5%BD%95%E4%BD%A0%E7%9A%84%E6%89%80%E6%83%B3%E3%80%81%E6%89%80%E6%84%9F%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btn-div%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-send%22%3E%E4%BF%9D%E5%AD%98%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-cancel%22%3E%E5%8F%96%E6%B6%88%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteDetail:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-detail-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ch1%3E%E7%AC%94%E8%AE%B0%E8%AF%A6%E6%83%85%3C/h1%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%EF%BC%8C%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-text%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btn-div%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-delete-btn%22%3E%E5%88%A0%E9%99%A4%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-edit-btn%22%3E%E7%BC%96%E8%BE%91%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-turn-note%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-lf%20read-prev%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%E4%B8%8A%E4%B8%80%E9%A1%B5%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-page%20read-hv-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-current%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E/%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-total%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-rt%20read-next%22%3E%E4%B8%8B%E4%B8%80%E9%A1%B5%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteShare:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-share%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-title%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-hv-center%22%3E%E5%88%86%E4%BA%AB%E5%88%B0%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cul%20class=%22read-cf%20read-sel-share%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(obj,%20function(item)%7B%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22%3C%25if(!item.flag)%7B%20%25%3E%20read-close%20%3C%25%20%7D%20%25%3E%22%20data-type=%22%3C%25=item.type%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%20%3C%25=item.icon_css%20%25%3E%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%20read-text-over%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=item.txt%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%3C/div%3E%0A"),video:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-bigsize-video-wrap%22%20style=%22display:%20none;%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-container%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-back%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-back-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-back-des%22%3E%E8%BF%94%E5%9B%9E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cp%20class=%22read-video-title%22%3E%E8%82%96%E7%94%B3%E5%85%8B%E7%9A%84%E6%95%91%E8%B5%8E%3C/p%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-container%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cvideo%20class=%22read-bigsize-video%22%3E%E6%82%A8%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E6%94%AF%E6%8C%81%20video%20%E6%A0%87%E7%AD%BE%E3%80%82%3C/video%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-controls-container%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-controls%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-play-btn%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-currenttime%22%3E00:00%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedprogress-bar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-totaltime%22%3E00:00%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-volume-icon%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-volume-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedvolume-bar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedvolume-point%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-addvolume-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-full-screen%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pause-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-play-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-waiting-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-play-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A")});return output={getTempl:function(a){return c[a]}}}(b,a),M=function(a,b,c,d){var e=a._,f=function(a){var c={$readerObj:null,templHtml:"",$domObj:null,data:{chapterName:"",chapterContent:"",pagePerc:""},isMobile:!1,swipe:"X",basePoint:{X:0,Y:0},width:0,height:0,pageColumn:1};this.opts=b.extend(!0,{},c,a),this.opts.$mainCont=null,this._init()};return f.prototype._init=function(){console.log("[panelMain] --> _init"),this._renderLayout(),this._bindEvent()},f.prototype._renderLayout=function(){var a=this.opts,c=a.$readerObj.offset();a.basePoint.X=c.left,a.basePoint.Y=c.top;var d=e.template(a.templHtml),f=d(a.data);if(a.$readerObj.append(f),a.$domObj=a.$readerObj.find(".read-selector-main"),a.$mainCont=a.$domObj.find(".read-chapter-content"),a.$chapter=a.$mainCont.find(".read-chapter-name"),a.$content=a.$mainCont.find(".read-page-1"),a.$content2=a.$mainCont.find(".read-page-2"),a.width=c.width,a.height=c.height,a.useKEnhanced){var g='<div class="read-glossary-panel"><div class="read-glossary-cover"></div><div class="read-glossary-main read-glossary-f"><div class="read-glossary-content"></div><div class="read-glossary-icon"></div></div></div>';a.$glossaryObj=b(g),a.$domObj.append(a.$glossaryObj)}if(a.useKnowledge){var h='<div class="read-kMenu-panel"><div class="read-kMenu-cover"></div><div class="read-knowledge-menu"><div class="read-ledge read-ledge-back"></div><div class="read-ledge read-ledge-exit"></div><div class="read-ledge read-ledge-prev"></div><div class="read-ledge read-ledge-next"></div><div class="read-ledge-count"></div></div>';a.$kMenuObj=b(h),a.$domObj.append(a.$kMenuObj)}},f.prototype._bindEvent=function(){var a=this.opts,d=a.basePoint,e=a.width,f=(a.height,this),g=a.isMobile?"tap":"click";a.$domObj.on(g,function(g){var h=g.target;if("IMG"==h.nodeName&&h.getAttribute("data-index")&&1!=h.getAttribute("data-cover"))return c.LOG.info("[panelMain.js]-> 点击了图片!"),c.LOG.info("data-index:"+h.getAttribute("data-index")),void a.$domObj.trigger("mainpanel:img",{currentIdx:h.getAttribute("data-index")});if("VIDEO"==h.nodeName){c.LOG.info("[panelMainPad.js]-> 点击了视频!");var i=h.getAttribute("src")||h.querySelector("source").getAttribute("src"),j=h.getAttribute("data-name")||i.split("/").pop();return void a.$domObj.trigger("mainpanel:video",{src:i,name:j})}if(b(h).hasClass("read-footnote-mark"))return void f._showFootnote(b(h));if(!b(h).parents().hasClass("read-knowledge-menu")&&!b(h).hasClass("read-knowledge-menu")){if(a.useKEnhanced){if(b(h).parents().hasClass("read-Knowledge-enhanced"))return void f._showGlossary(b(h).parents(".read-Knowledge-enhanced"));if(b(h).hasClass("read-glossary-cover"))return void a.$glossaryObj.fadeOut(10);if(b(h).parents().hasClass("read-glossary-main"))return;if(b(h).parents().hasClass("read-big-enhanced")||b(h).hasClass("read-big-enhanced"))return}if(a.useKnowledge){if(b(h).hasClass("read-kMenu-cover"))return void f._closeKnowledge();if(b(h).parents().hasClass("read-kMenu-panel"))return}h.setAttribute("data-event","0"),console.log("MainPanel -> x: "+g.clientX+" , y:"+g.clientY+", type:"+g.type);var k=a.$readerObj.find(".read-page-1").hasClass("vertical-rl"),l=g.clientX-d.X,m=(g.clientY-d.Y,Math.floor(l/e*100));70<m&&m<=100?k?a.$domObj.trigger("mainpanel:left"):a.$domObj.trigger("mainpanel:right"):30<m&&m<=70?a.$domObj.trigger("mainpanel:middle"):0<m&&m<=30?k?a.$domObj.trigger("mainpanel:right"):a.$domObj.trigger("mainpanel:left"):console.warn("[panelMain] -> eventPos:"+m)}}),a.$domObj.on("dblclick",".read-glossary-main",function(b){console.log("[panelMainPc]--> 打开增强释义面板");var c=a.$domObj.find(".read-big-enhanced");c.fadeIn(),c.find(".read-enhanced-body h1").text(a.glossaryDetail.name),c.find(".read-enhanced-body .read-enhanced-content").html(a.glossaryDetail.content)}),a.$domObj.on("click",".read-big-enhanced .read-back",function(b){console.log("[panelMainPc]--> 打开增强释义面板"),a.$domObj.find(".read-big-enhanced").fadeOut()}),a.$domObj.on("click",".read-ledge-back",function(b){console.log("[panelMainPc]--> 点击知识型菜单回到知识列表按钮"),a.$domObj.trigger("knowledge:open")}),a.$domObj.on("click",".read-ledge-exit",function(a){console.log("[panelMainPc]--> 退出知识型阅读模式"),f._closeKnowledge()}),a.$domObj.on("click",".read-ledge-prev",function(b){console.log("[panelMainPc]--> 本知识点的上一个锚点位置");var c=a.knowledgeData,d=c.index-1;if(d>0){c.index=d,c.pageCount=0;var e=c.point_list[d-1].chapter_id;a.$domObj.trigger("knowledge:showKMenu",e)}b.stopPropagation()}),a.$domObj.on("click",".read-ledge-next",function(b){console.log("[panelMainPc]--> 本知识点的下一个锚点位置");var c=a.knowledgeData,d=c.index+1,e=c.point_list.length;if(d<e+1){c.index=d,c.pageCount=0;var f=c.point_list[d-1].chapter_id;a.$domObj.trigger("knowledge:showKMenu",f)}b.stopPropagation()}),a.useTV&&b(".read-main-panel").attr("tabindex",0).css("outline","none").focus().on("keydown",function(c){13===c.keyCode?(a.$domObj.trigger("mainpanel:middle"),b(this).blur()):37===c.keyCode?a.$domObj.trigger("mainpanel:left"):39===c.keyCode&&a.$domObj.trigger("mainpanel:right")})},f.prototype._showFootnote=function(a){var d=this.opts,e=d.$readerObj,f="";f="["+a.attr("data-count")+"]",f+=c.trim(a.parent().find("footnote").text()),c.LOG.info("[readerPc.js] --> setFootNote:"+f);var g="<div class='read-footnote-mask'><div class='read-footnote-exitdiv'><div class='read-footnote-exit'></div></div><div class='read-footnote-div'><p class='read-footnote-txt'>"+f+"</p></div></div>",h=b(g);e.append(h);var i=e.height(),j=e.width(),k=.4*i>500?500:i/3,l=.4*j<500?j-20:j/3;h.find(".read-footnote-exitdiv").css({width:l+"px",left:(j-l)/2+"px",top:(i-k)/2-10+"px"}),h.find(".read-footnote-div").css({width:l+"px",height:k+"px",left:(j-l)/2+"px",top:(i-k+20)/2+"px","font-size":"0.3em"}),h.on("click",function(a){var b=a.target.className;"read-footnote-mask"!=b&&"read-footnote-exit"!=b||h.remove()})},f.prototype._showGlossary=function(a){var c=this.opts,d=c.$glossaryObj.find(".read-glossary-main"),e=c.$glossaryObj.find(".read-glossary-content"),f=c.$glossaryObj.find(".read-glossary-icon"),g=a.attr("term"),h=g.indexOf("base64:")!=-1?b.base64.atob(g.slice(7,-1)):g;c.glossaryDetail={name:a.text(),content:h};var i=b("<div>");i.html(h),e.html(""),e.append(i);var j=a.children().length,k=a.children().eq(parseInt(j/2)),l=k.offset().top,m=k.offset().left+k.width()/2,n=0,o=0,p=c.$domObj.find(".read-control-wh"),q=p.offset().top,r=p.offset().left;d.css("width",c.$content.width()/2),c.$glossaryObj.fadeIn(0);var s=e.height()+f.height();d.height(s),l-q<p.height()/3?(o=l+k.height(),d.removeClass("read-glossary-f").addClass("read-glossary-h")):(o=l-s,d.removeClass("read-glossary-h").addClass("read-glossary-f"));var t=r+p.width()-m,u=m-r,v=d.width()/2;n=t<v?t+m-2*v:u<v?r:m-v;var w=m-n-f.width()/2;f.css("left",w),d.css({left:n,top:o})},f.prototype.showPagedata=function(a,b){var c=this,d=c.opts;d.data=a,c.noAnimate()},f.prototype.noAnimate=function(){var a=this,b=a.opts;b.data.direction;b.$domObj.trigger("mainpanel:showBookmark",b.data),b.$chapter.html(b.data.chapterName),b.$content.html(b.data.chapterContent),b.$content2.html(b.data.secondPage),this._setPageShow()},f.prototype._setPageShow=function(){var a=this.opts;"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),this._setImgSrc(),this._setVideoSrc(),this._setTableStyle(),this._bindTableEvent(),this.highLight(),a.useKEnhanced&&(a.$readerObj.find(".read-kEnhanced-btn").hasClass("read-active")||a.$mainCont.find("span[type='term']").addClass("read-Knowledge-enhanced")),a.useKnowledge&&this.showKnowledge(),a.$domObj.trigger("mainpanel:showNote")},f.prototype.showKnowledge=function(a){var b=this.opts;if(null!=a)b.knowledgeData=a;else{var c=b.knowledgeData;if(c){b.$mainCont.find(".read-knowledge-bg").removeClass("read-knowledge-bg");var d=c.point_list[c.index-1].pid,e='span[type="knowledge"][data-pid="'+d+'"]',f=b.$mainCont.find(e),g=!0;if(0==f.length)return void b.$kMenuObj.fadeOut(10);f.length>1&&(f=f.eq(1),g=!1),b.$kMenuObj.fadeIn(10);var h=c.index+"/"+c.point_list.length;b.$kMenuObj.find(".read-ledge-count").text(h);var i=b.$kMenuObj.find(".read-knowledge-menu"),j=f.offset().top-i.height(),k=i.width();f.addClass("read-knowledge-bg");for(var l=parseInt(f.attr("data-len")),m=parseInt(f.find(".read-filterSpan").attr("data-id")),n=1;n<l;n++)m+=1,b.$mainCont.find('span[data-id="'+m+'"]').addClass("read-knowledge-bg");k=b.$content.find(e).length&&g?b.$content.offset().left+b.$content.width()/2-k/2:b.$content2.offset().left+b.$content2.width()/2-k/2,i.css({top:j,left:k})}}},f.prototype._closeKnowledge=function(){var a=this.opts;a.knowledgeData=null,a.$kMenuObj.fadeOut(10),a.$mainCont.find(".read-knowledge-bg").removeClass("read-knowledge-bg"),a.$domObj.trigger("knowledge:closeKnowledge")},f.prototype.highLight=function(){var a=this.opts,c=a.$readerObj.attr("data-searchKword");if(c){var d=/(([\w_\.%]+)|([^\2]))/gi,e=[];c.replace(d,function(a){e.push(a)});for(var f=b("span[data-id]"),g="",h=0;h<f.length;h++)if(g="",b(f[h]).text()==e[0]){for(var i=0;i<e.length;i++)g+=b(f[h+i]).text();if(g.indexOf(c)!=-1)for(var j=0;j<i;j++)b(f[h+j]).addClass("read-highlight"),console.log("高亮显示搜索结果！")}a.$readerObj.attr("data-searchKword","")}},f.prototype._setImgSrc=function(){var a=this.opts;a.$mainCont.find("img[data-src]").each(function(){var a=b(this).attr("data-src");b(this).attr("src",a),b(this).removeAttr("data-src")}),a.$mainCont.find("img[data-old-src]").on("error",function(){var a=b(this).attr("data-old-src");b(this).attr("src",a),b(this).removeAttr("data-old-src")})},f.prototype._setVideoSrc=function(){var a=this.opts;a.$mainCont.find("source[data-src]").each(function(){var a=b(this).attr("data-src");b(this).attr("src",a),b(this).removeAttr("data-src")})},f.prototype._setTableStyle=function(){var a=this.opts,c=a.$mainCont.width(),d=0;a.$mainCont.find("table").each(function(){return"1"==b(this).attr("zoom")||void(b(this).width()>c&&(d=b(this).parent().height(),b(this).parent().addClass("read-tbl-big-data"),d=2*d-b(this).parent().height(),b(this).attr("zoom","1"),b(this).attr("data-resth",d)))}),a.$mainCont.find('table[zoom="1"]').each(function(){var a=b(this).attr("data-resth"),c=b('<div class="read-tbl-wrap" style="height: '+a+'px">');b(this).parent().append(c);var d=b('<div class="read-open-pop">');b(this).parent().append(d),c.append(b(this))})},f.prototype._bindTableEvent=function(){var a=this,c=this.opts,d=c.basePoint,e=c.width,f=c.$mainCont.find('table[zoom="1"]'),g=c.isMobile?"tap":"click";f.on(g,function(c){var f=c.clientX-d.X,g=Math.floor(f/e*100);if(30<g&&g<=70){var h=b(this).clone(!0);a._expandTable(h),c.stopPropagation()}})},f.prototype._expandTable=function(a){var c=this.opts,d=c.isMobile?"tap":"click",e=b('<div class="read-comm-panel read-comm-table">'),f=b('<div class="read-comm-tbl-wrap">'),g=b('<div class="read-close-btn">');e.append(g),e.append(f),f.append(a),c.$readerObj.append(e),e.on(d+" swipeDown",function(a){return!1}),g.on(d,function(a){e.remove(),a.stopPropagation()})},f.prototype.setFontSize=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-size-"+a.oldValue,c.newValue="read-size-"+a.newValue,b.$domObj.find(".read-content").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-delicate-container").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-animate-content").removeClass(c.oldValue).addClass(c.newValue)},f.prototype.setFontFamily=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-font-family-"+a.oldValue,c.newValue="read-font-family-"+a.newValue,b.$domObj.find(".read-content").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-delicate-container").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-animate-content").removeClass(c.oldValue).addClass(c.newValue)},f.prototype.open=function(){console.log("[panelMain] --> open");var a=this.opts;a.$domObj.fadeIn(300)},f.prototype.close=function(){var a=this.opts;a.$domObj.fadeOut(100)},f.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},f}(b,a,c,f),N=function(a,b,c,d,e,f,g){var h=a._,i=function(a){var b={wrapDomId:"",$readerObj:null,templHtml:"",fontlightHtml:"",progressHtml:"",$domObj:null,$headerObj:null,$footerObj:null,$bodyObj:null,$fontlight:null,$progress:null,isMobile:!1,isNightMode:null,settingData:null,progressData:null,settingPage:2,brightness:1};this.opts=e.extend(!0,{},b,a),this._init()};return i.prototype._init=function(){console.log("[SettingPanel] --> _init"),this._renderLayout(),this._bindEvent()},i.prototype._renderLayout=function(){var a=this.opts,b=h.template(a.templHtml),c=b();a.$domObj=e(c),a.$readerObj.append(a.$domObj),a.$headerObj=a.$domObj.find(".read-header"),a.$footerObj=a.$domObj.find(".read-footer"),a.$leftObj=a.$domObj.find(".read-left"),a.$rightObj=a.$domObj.find(".read-right"),a.bookmarkDom=a.$headerObj.find(".read-bookmark-btn"),this._renderDrag(),this._setDisplay()},i.prototype._renderDrag=function(){var a=this.opts,b=a.$footerObj.find(".read-progress-drag");this.$progressObj=new d({domSelector:b,value:a.progressData||0,isMobile:a.isMobile,clientType:a.clientType,useTV:a.useTV});var c=a.$footerObj.find(".read-light-drag");this.$lightbarObj=new d({domSelector:c,value:a.brightness||1,isMobile:a.isMobile,clientType:a.clientType,useTV:a.useTV})},i.prototype._setDisplay=function(){var a=this.opts;a.useBookmark||a.$headerObj.find(".read-bookmark-btn").hide(),a.useKEnhanced||a.$headerObj.find(".read-kEnhanced-btn").hide(),a.useKnowledge||a.$leftObj.find(".read-knowledge-btn").hide(),a.useComplaint||a.$leftObj.find(".read-complaint-btn").hide(),a.useSearch||a.$headerObj.find(".read-search-ipt").hide(),a.useExit||a.$headerObj.find(".read-exit-btn").hide(),a.useFonts||a.$rightObj.find(".read-font-btn").hide(),a.useVerticalType||a.$rightObj.find(".read-hvtype-btn").hide(),a.useManuscriptPic||a.$rightObj.find(".read-pictxt-btn").hide(),a.useExportEpub||a.$rightObj.find(".read-epub-btn").hide(),a.useExportPdf||a.$rightObj.find(".read-pdf-btn").hide()},i.prototype._bindEvent=function(){var a=this.opts,b=this,c=a.isMobile?"tap":"click";a.$domObj.find(".read-body").on(c,function(){b.close()}),a.$headerObj.find(".read-exit-btn").on(c,function(){a.$domObj.trigger("out:click")}),a.$headerObj.find(".read-bookmark-btn").on(c,function(){a.$domObj.trigger("bookmark:click",a.bookmarkDom)}),a.$headerObj.find(".read-kEnhanced-btn").on(c,function(){e(this).toggleClass("read-active"),a.$readerObj.find(".read-main-panel span[type='term']").toggleClass("read-Knowledge-enhanced")}),a.$leftObj.find(".read-knowledge-btn").on(c,function(){b.close(),a.$domObj.trigger("knowledge:click")}),a.$leftObj.find(".read-cbn-btn").on(c,function(){a.$domObj.trigger("cbn:click")}),a.$leftObj.find(".read-complaint-btn").on(c,function(){a.$domObj.trigger("complaint:click")}),a.$headerObj.find(".read-search-ipt .read-icon").on(c,function(){d()}),a.$headerObj.find(".read-search-ipt input").on("keypress",function(a){13===a.keyCode&&d()}),a.$rightObj.find(".read-font-btn").on(c,function(){a.$domObj.trigger("fontType:click")}),a.$rightObj.find(".read-hvtype-btn").on(c,function(){e(this).toggleClass("read-active"),a.$domObj.trigger("hvtype:click")}),a.$rightObj.find(".read-pictxt-btn").on(c,function(){a.$domObj.trigger("manuscriptPic:click")}),this.$progressObj.on("dragEnd",function(b,c){a.$domObj.trigger("progress:click",c)}),this.$lightbarObj.on("dragMove",function(b,c){console.info("[panelSetting.js] -> dragMove:"+c),a.brightness=parseFloat(c);var d=30+70*parseFloat(c)+"%";a.$readerObj.css("filter","brightness("+d+")")}),this.$lightbarObj.on("dragEnd",function(b,c){console.info("[panelSetting.js] -> dragEnd:"+c),a.brightness=parseFloat(c);var d=30+70*parseFloat(c)+"%";a.$readerObj.css("filter","brightness("+d+")")});var d=function(){var b=a.$headerObj.find(".read-search-ipt input").val();b?a.$domObj.trigger("showSearch:click",b):(a.commonDialog.setMsg(g.inputContent),a.commonDialog.open())};a.useTV&&e("body").on("keydown",function(a){var c=e("a:focus").hasClass("read-light-drag"),d=e("a:focus").hasClass("read-progress-drag"),f=parseFloat(b.$lightbarObj.getValue()),g=parseFloat(b.$progressObj.getValue());37===a.keyCode?c?(f>=.01&&b.$lightbarObj.setValue(f-.01),a.preventDefault()):d&&(g>=.01&&b.$progressObj.setValue(g-.01),a.preventDefault()):39===a.keyCode&&(c?(f<=.99&&b.$lightbarObj.setValue(f+.01),a.preventDefault()):d&&(g<=.99&&b.$progressObj.setValue(g+.01),a.preventDefault()))})},i.prototype.setProgressVal=function(a){var b=this.opts;b.progressData=a.val},i.prototype.setColor=function(a){this.$lightbarObj.setColor(a)},i.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},i.prototype.open=function(){console.log("[SettingPanel] --> open");var a=this.opts;a.$domObj.fadeIn(10),f(a.$headerObj[0]).set("top","0").duration("0.5s").end(),f(a.$footerObj[0]).set("bottom","0").duration("0.5s").end(),f(a.$leftObj[0]).set("left","12px").duration("0.5s").end(),f(a.$rightObj[0]).set("right","0").duration("0.5s").end(),a.$footerObj.find(".read-set-btn").children().each(function(){e(this).removeClass("read-active")}),this.$lightbarObj.reSize(),this.$progressObj.reSize(),this.$lightbarObj.setValue(a.brightness),this.$progressObj.setValue(a.progressData)},i.prototype.close=function(){var a=this.opts;f(a.$headerObj[0]).set("top","-100%").duration("0.5s").end(),f(a.$footerObj[0]).set("bottom","-100%").duration("0.5s").end(),f(a.$leftObj[0]).set("left","-100%").duration("0.5s").end(),f(a.$rightObj[0]).set("right","-100%").duration("0.5s").end(),setTimeout(function(){a.$domObj.fadeOut(10)},300),a.$domObj.trigger("close:click"),a.$readerObj.find(".read-main-panel").focus()},i.prototype._setScreenBrightness=function(a){var b=.3,c=.7,d=b+a*c;d=parseFloat(d.toFixed(2)),"function"==typeof gli_set_brightness&&gli_set_brightness(d)},i.prototype._useSysBrightness=function(){var a=this;"function"==typeof gli_get_brightness&&gli_get_brightness(function(b){a._setScreenBrightness(b)})},i}(b,h,i,j,a,f,n),O=function(a,b,c,d,e,f){var g=a._,h=function(a){console.log("[Bookmark] -> 构造函数!");var c={wrapObj:null,tmplHtml:"",isMobile:!0,data:null,markDomObj:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){var a=this.opts;a.templObj=g.template(a.tmplHtml),this._bindEvent(),this.dialog=new d({$wrapDomObj:a.$readerObj,isMobile:a.isMobile,okBtn:{txt:"确定",cssClass:"",func:function(){}},cancelBtn:{txt:"离开",cssClass:"",func:function(){}}})},h.prototype._bindEvent=function(){var a=this,c=this.opts,d=c.isMobile?"tap swipeLeft swipeRight":"click swipeLeft swipeRight";c.wrapObj.on(d,".read-bookmark-del",function(d){console.log("[bookmark.js]书签点击了删除"+d.type),c.wrapObj.trigger("bookmark:delclick");var e=b(this).parents(".read-one-chapter-bookmarks").attr("data-chapterid"),f=b(this).parents(".read-bookmark").attr("data-bookmarkid"),g={chapterId:e,bookmarkid:f};a.delBookmark(g)}),c.wrapObj.on(d,".read-original-text",function(a){var d=parseFloat(b(this).parents(".read-bookmark").attr("data-page"));c.wrapObj.trigger("bookmark:click",d)})},h.prototype.renderLayout=function(a){var b=this.opts,d=c.convertData(a.bookmark_list,"bookmark_list"),e={chapter_list:d,bookmark_list:a.bookmark_list};if(b.data=e,d.length>0){var f=b.templObj(e);b.wrapObj.html(f)}else b.wrapObj.find(".read-has-bookmark").html("").hide(),b.wrapObj.find(".read-no-bookmark").fadeIn()},h.prototype.addBookmark=function(a){function d(){g.data.bookmark_list.push(h);var a={time_stamp:g.data.time_stamp,bookmark_list:g.data.bookmark_list};g.saveFile(g.filePath,JSON.stringify(a)),f.renderLayout(g.data)}var f=this,g=this.opts;console.log("[Bookmark] -> addBookmark!");var h={bookmark_id:c.getRandomKey(),bookmark_text:a.text.slice(0,30),bookmark_time:c.getNowFormatDate(),bookmark_page:a.pageSite,chapter_name:a.chapterName,chapter_id:a.chapterId,oparate_type:"1",s_id:""};g.markDomObj.attr({"data-bookmarkid":h.bookmark_id,"data-chapterid":a.chapterId}).addClass("read-active");var i=b.extend(!0,{},h);g.api.setBookmark(i,function(a){console.log("[Bookmark.prototype.addBookmark] --> 增加书签-成功!"+a),d();var b={oparate_type:"1",s_id:a.s_id,bookmark_id:a.bookmark_id,time_stamp:a.time_stamp};f._updLocalData(b)},function(a){g.isClient?d():(f.dialog.setMsg(e.bookMarkFail),f.dialog.open(),g.markDomObj.removeClass("read-active"))})},h.prototype.delBookmark=function(a){var b=this,c=this.opts;console.log("[Bookmark] -> delBookmark!"),g.isEmpty(a)&&(a={bookmarkid:c.markDomObj.attr("data-bookmarkid"),chapterId:c.markDomObj.attr("data-chapterid")});for(var d=a.bookmarkid,f=c.data.bookmark_list,h=null,i=0,j=f.length;i<j;i++)if(h=f[i],h.bookmark_id==a.bookmarkid){h.oparate_type="3";
break}var k={time_stamp:c.data.time_stamp,bookmark_list:c.data.bookmark_list};c.saveFile(c.filePath,JSON.stringify(k)),c.markDomObj.attr("data-bookmarkid")==d&&c.markDomObj.removeClass("read-active"),b.renderLayout(c.data),h.s_id&&c.api.delBookmark({bookmark_id:d},function(a){var c={oparate_type:"3",s_id:a.s_id,bookmark_id:a.bookmark_id,time_stamp:a.time_stamp};b._updLocalData(c)},function(a){c.isClient||(b.dialog.setMsg(e.bookMarkDelFail),b.dialog.open(),h.oparate_type="0",c.markDomObj.attr("data-bookmarkid")==d&&c.markDomObj.addClass("read-active"),b.renderLayout(c.data))})},h.prototype.updateBookmarks=function(a){var c=this,d=this.opts;console.log("[Bookmark] -> updateBookmarks!"),d.markDomObj=b(a.bookmarkDom),d.markDomObj.hasClass("read-active")?c.delBookmark():c.addBookmark(a)},h.prototype.getBookmarks=function(){console.log("[Bookmark] -> getBookmarks! ");var a=this.opts;return a.data},h.prototype.isShowBookmark=function(a){console.log("[Bookmark] -> isShowBookmark!");var b=this,c=b.opts,d=[],e=!0;g.isEmpty(c.data)||(d=c.data.chapter_list);for(var f=0;f<d.length;f++){var h=d[f];if(a.chapterId==h.chapter_id){for(var i=0;i<h.bookmark_list.length;i++){var j=h.bookmark_list[i],k=j.bookmark_page;if(k<=a.endPageOffset&&k>a.startPageOffset){e=!1,b._showMarkIcon(j.bookmark_id,"open");break}}break}}e&&b._showMarkIcon("","close")},h.prototype._showMarkIcon=function(a,b){var c=this.opts;0==c.markDomObj.length&&(c.markDomObj=c.wrapObj.parents(".read-reader-pad").find(".read-setting-panel").find(".read-header .read-bookmark-btn")),"open"==b?c.markDomObj.attr("data-bookmarkid",a).addClass("read-active"):c.markDomObj.attr("data-bookmarkid","").removeClass("read-active")},h.prototype.getMarkDom=function(){return this.opts.markDomObj},h.prototype._updLocalData=function(a){for(var b=this.opts,c=b.data.bookmark_list,d=null,e=0,f=c.length;e<f;e++)if(d=c[e],d.bookmark_id==a.bookmark_id){"1"==a.oparate_type?(d.s_id=a.s_id,d.oparate_type="0"):"3"==a.oparate_type&&c.splice(e,1),b.data.time_stamp=a.time_stamp;break}var g={time_stamp:b.data.time_stamp,bookmark_list:b.data.bookmark_list};b.saveFile(b.filePath,JSON.stringify(g))},h}(b,a,c,m,n,f),P=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,editHtml:"",$domObj:null,isMobile:!1,noteData:null,sigleNote:null,api:null};this.opts=b.extend(!1,{},c,a),this._init()};return h.prototype._init=function(){console.log("[editPanel] --> _init"),this._renderLayout(),this._bindEvent()},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.editHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-content textarea"),d=b.isMobile?"tap":"click";b.$domObj.find(".read-send").on(d,function(){var d=c.val().trim();c.blur(),a._sendNote(b.thisNoteObj,d)}),b.$domObj.find(".read-cancel").on(d,function(){var c=b.$domObj.find(".read-edit textarea").val().trim();b.$domObj.find(".read-edit textarea").blur(),a.cancel(c)}),b.$domObj.find(".read-cover").on(d,function(){a.close()})},h.prototype.open=function(a){var b=this,c=b.opts;c.thisNoteObj=a,c.$domObj.fadeIn(),setTimeout(function(){f(c.$domObj.find(".read-content")[0]).set("left","0").duration("0.5s").end()},10),c.$domObj.find(".read-content .read-original-text").html(a.original),a.note_text?(c.isEditNote=!0,c.$domObj.find(".read-content textarea").val(a.note_text)):c.isEditNote=!1,a.isunderline&&g.each(c.noteData.note_list,function(b){if(b.note_id==a.note_id)return c.thisNoteObj.s_id=b.s_id,!1})},h.prototype.cancel=function(a){var b=this,e=b.opts;if(a){var f=new c({$wrapDomObj:e.$domObj,isMobile:e.isMobile,okBtn:{txt:"继续编辑",cssClass:"",func:function(){e.$domObj.find(".read-content textarea").focus(),f.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close(),f.destroy()}}});f.setMsg(d.noteCancel),f.open()}else b.close()},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-content textarea").val(""),f(b.$domObj.find(".read-content")[0]).set("left","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200)},h.prototype._sendNote=function(a,b){var f=this,g=f.opts;if(b){f.sucessDialog=new c({$wrapDomObj:g.$domObj,isMobile:g.isMobile,okBtn:{txt:"确定",cssClass:"",func:function(){f.close(),f.sucessDialog.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){f.close(),f.sucessDialog.destroy()}}});var h={chapter_id:a.chapter_id,chapter_name:a.chapter_name,firstId:a.firstId,lastId:a.lastId,note_id:a.note_id,note_page:a.note_page,note_text:b,note_time:e.getNowFormatDate(),original:a.original,s_id:a.s_id,oparate_type:"",isSave:!1};if(g.isEditNote||a.isunderline){h.oparate_type=2;for(var i=g.noteData.note_list,j=0,k=i.length;j<k;j++)if(i[j].note_id==h.note_id){i[j]=h;break}}else h.s_id="",h.note_id=e.getRandomKey(),h.oparate_type=1,g.noteData.note_list.push(h);g.$domObj.trigger("addnote:click",{noteData:g.noteData,sigleNote:h,flag:g.isEditNote})}else{var l=new c({$wrapDomObj:g.$domObj,isMobile:g.isMobile,okBtn:{txt:"确定",cssClass:"",func:function(){l.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){f.close(),l.destroy()}}});l.setMsg(d.inputContent),l.open()}},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h}(b,a,m,n,c,f),Q=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,detailHtml:"",$domObj:null,isMobile:!1,noteData:null,thisNoteObj:null,thisNoteList:[],api:null,shareObj:null};this.opts=b.extend(!1,{},c,a),this._noteShareActiveItems={wx:null,wx_moments:null,sina_weibo:null,qq:null,qq_zone:null},this._init()};return h.prototype._init=function(){console.log("[detailPanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.detailHtml),d=this._getShareItemsInfo(),e=c({shareNotes:d});a.$domObj=b(e),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap swipeRight":"click";if(c.$domObj.find(".read-cover").on(d,function(b){a.close()}),c.$domObj.find(".read-footer .read-delete-btn").on(d,function(b){a.deleteNote()}),c.$domObj.find(".read-footer .read-edit-btn").on(d,function(b){a.editNote(),a.close()}),c.$domObj.find(".read-footer .read-prev").on(d,function(b){a._prev()}),c.$domObj.find(".read-footer .read-next").on(d,function(b){a._next()}),c.note_share_conf.flag){for(var e=c.note_share_conf.share_items,f=0,g=e.length;f<g;f++)e[f].flag&&(a._noteShareActiveItems[e[f].type]=e[f].share_cb);c.$domObj.find(".read-reader-share").on(d,"li",function(){var c=a._getCurrentNotInfo(),d=b(this).attr("data-type");"function"==typeof a._noteShareActiveItems[d]?a._noteShareActiveItems[d](c):console.error("PC分享笔记:"+b(this).find(".read-text-over").html()+",未注册回调函数!")})}else c.$domObj.find(".read-footer .read-title").hide()},h.prototype.open=function(a,b){var c=this,d=c.opts;d.thisNoteObj={noteid:a,chapterid:b},d.$domObj.fadeIn(),setTimeout(function(){f(d.$domObj.find(".read-content")[0]).set("left","0").duration("0.5s").end()},10),this._filterNote(b),this.viewNote()},h.prototype.close=function(){var a=this,b=a.opts;f(b.$domObj.find(".read-content")[0]).set("left","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200)},h.prototype.viewNote=function(){var a=this,b=a.opts,c=b.thisNoteObj;return c.noteid===-1?(b.$domObj.find(".read-original-text").html(""),b.$domObj.find(".read-view .read-note-text").html("当前章节没笔记啦！"),b.$domObj.find(".read-footer .read-page .read-current").html(0),b.$domObj.find(".read-footer .read-page .read-total").html(0),b.$domObj.find(".read-footer").css("pointer-events","none"),!1):(b.$domObj.find(".read-body .read-btns").css("pointer-events",""),b.$domObj.find(".read-footer").css("pointer-events",""),g.each(b.thisNoteList,function(a,d){if(a.note_id==c.noteid)return b.thisNoteData=a,b.$domObj.find(".read-content h1").html(a.chapter_name),b.$domObj.find(".read-original-text").html(a.original),b.$domObj.find(".read-view .read-note-text").html(a.note_text),b.$domObj.find(".read-footer .read-page .read-current").html(d+1),b.$domObj.find(".read-footer .read-page .read-total").html(b.thisNoteList.length),b.thisNoteIndex=d,!1}),void("undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])))},h.prototype.reshowNote=function(){var a=this.opts;this._filterNote(a.thisNoteObj.chapterid);var b=a.thisNoteIndex;b>0?b-=1:b=b<a.thisNoteList.length?b:-1,a.thisNoteObj.noteid=b>-1?a.thisNoteList[b].note_id:-1,this.viewNote()},h.prototype._filterNote=function(a){var b=this.opts,c=[];b.thisNoteList=[];for(var d=0,e=b.noteData.chapter_list.length;d<e;d++)if(b.noteData.chapter_list[d].chapter_id==a){c=b.noteData.chapter_list[d].note_list;break}for(var f=0,g=c.length;f<g;f++)c[f].note_text&&"3"!=c[f].oparate_type&&b.thisNoteList.push(c[f])},h.prototype._prev=function(){var a=this,b=a.opts,c=b.thisNoteIndex;return b.thisNoteIndex=b.thisNoteIndex>0?b.thisNoteIndex-1:0,b.thisNoteObj.noteid=b.thisNoteList[b.thisNoteIndex].note_id,c!=b.thisNoteIndex&&void this.viewNote()},h.prototype._next=function(){var a=this,b=a.opts,c=b.thisNoteIndex,d=b.thisNoteList.length-1;return b.thisNoteIndex=b.thisNoteIndex<d?b.thisNoteIndex+1:d,b.thisNoteObj.noteid=b.thisNoteList[b.thisNoteIndex].note_id,c!=b.thisNoteIndex&&void this.viewNote()},h.prototype.editNote=function(){var a=this,b=a.opts;b.$domObj.trigger("detailDel:edit",b.thisNoteData)},h.prototype.deleteNote=function(){var a=this,b=a.opts;b.$domObj.trigger("detailDel:delete",b.thisNoteObj)},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h.prototype._getShareItemsInfo=function(){var a=this.opts,c={flag:!1,share_items:[{type:"wx",flag:!1,share_cb:null},{type:"wx_moments",flag:!1,share_cb:null},{type:"sina_weibo",flag:!1,share_cb:null},{type:"qq",flag:!1,share_cb:null},{type:"qq_zone",flag:!1,share_cb:null}]},d={wx:{txt:"微信好友",icon_css:"read-icon-wx"},wx_moments:{txt:"微信朋友圈",icon_css:"read-icon-wx-pyq"},sina_weibo:{txt:"新浪微博",icon_css:"read-icon-wb"},qq:{txt:"qq好友",icon_css:"read-icon-qq"},qq_zone:{txt:"qq空间",icon_css:"read-icon-qzone"}},e=b.extend(!0,{},c,a.note_share_conf),f=[];if(e.flag)for(var g=e.share_items,h={},i="",j=0,k=g.length;j<k;j++)g[j].flag&&(i=g[j].type,h={flag:!0,icon_css:d[i].icon_css,txt:d[i].txt,type:i},f.push(h));return f},h.prototype._getCurrentNotInfo=function(){var a=this,b=a.opts,c={book_id:"",chapter_id:"",note_txt:""};try{c.book_id=b.api.opts.baseData.book_id||"",c.chapter_id=b.thisNoteObj.chapterid,c.note_txt=b.thisNoteData.original}catch(a){console.error("[panelDetail.js]"+a)}return c},h}(b,a,m,n,c,f),R=function(a,b,c,d,e,f,g,h){var i=a._,j=function(a){var c={wrapObj:null,$readerObj:null,$contentObj:null,tmplHtml:"",isMobile:!1,data:null,chapter_id:"",editHtml:"",detailHtml:"",shareHtml:""};this.opts=b.extend(!0,{},c,a),this._init()};return j.prototype._init=function(){var a=this.opts;a.templObj=i.template(a.tmplHtml),a.$contentObj=a.$readerObj.find(".read-selector-main .read-content"),this.noteDialog=new f({$wrapDomObj:this.opts.$readerObj,isMobile:a.isMobile,okBtn:{txt:"确定",cssClass:"",func:function(){}},cancelBtn:{txt:"离开",cssClass:"",func:function(){}}})},j.prototype._bindEvent=function(){var a=this.opts,c=this,d=a.isMobile?"tap":"click";a.wrapObj.on(d,".read-note-time .read-icon",function(a){var d=b(this).parents(".read-one-chapter-notes"),e={chapterid:d.attr("data-chapterid"),noteid:b(this).parents(".read-note").attr("data-noteid")};c.delNote(e),a.stopPropagation()}),a.wrapObj.on(d,".read-original-text",function(c){var d=b(this).parents(".read-note").attr("data-percent");a.wrapObj.trigger("cbnnote:click",parseFloat(d)),c.stopPropagation()}),a.editObj.on("addnote:click",function(b,d){a.data=d.noteData,c.renderCbnPage(a.data),c.showNote(a.chapter_id,a.chapter_name),d.flag&&a.noteDetailObj.reshowNote(),d.sigleNote&&c._sendNote(d.sigleNote)}),a.noteDetailObj.on("detailDel:delete",function(a,b){c.delNote(b)}),a.noteDetailObj.on("detailDel:edit",function(b,d){d.chapter_id=a.chapter_id,c.editNote(d)})},j.prototype.renderLayout=function(a){var b=this.opts;b.data=a||{time_stamp:"0",note_list:[]},this.renderCbnPage(b.data),b.editObj=new c({$readerObj:b.$readerObj,editHtml:b.editHtml,isMobile:b.isMobile,api:b.api,saveFile:b.saveFile,filePath:b.filePath,noteData:b.data}),b.noteDetailObj=new d({$readerObj:b.$readerObj,detailHtml:b.detailHtml,shareHtml:b.shareHtml,isMobile:b.isMobile,api:b.api,saveFile:b.saveFile,filePath:b.filePath,noteData:b.data,note_share_conf:b.note_share_conf}),this._bindEvent()},j.prototype.renderCbnPage=function(a){var b=this.opts,c=!1,d=e.convertData(a.note_list,"note_list");a.chapter_list=d;var f={chapter_list:d,nowDate:""};if(f.chapter_list.length>0){for(var g=0,h=f.chapter_list.length;g<h;g++)if(f.chapter_list[g].note_count){c=!0;break}var i=e.getNowFormatDate();f.nowDate=i.substr(0,10);var j=b.templObj(f);b.wrapObj.html(j),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}c||(b.wrapObj.find(".read-has-note").html("").hide(),b.wrapObj.find(".read-no-note").fadeIn())},j.prototype.cancelDel=function(){for(var a=this,c=a.opts,d=c.wrapObj.find(".read-has-note .read-note"),e=0;e<d.length;e++)if("true"==b(d[e]).attr("data-hasDel")){var f=b(d[e]).find(".read-note-del"),g=f.width();h(f[0]).translate(g,0).duration("0.2s").end(),b(d[e]).attr("data-hasDel","false")}},j.prototype.delNote=function(a){for(var b=this,c=this.opts,d=a.noteid,e=c.data.note_list,f="",h=null,i=0,j=e.length;i<j;i++)if(h=e[i],h.note_id==d){""==h.s_id?e.splice(i,1):(h.oparate_type="3",f=h.s_id);break}var k={time_stamp:c.data.time_stamp,note_list:c.data.note_list};c.saveFile(c.filePath,JSON.stringify(k)),b.renderCbnPage(c.data),c.noteDetailObj.opts.thisNoteObj&&c.noteDetailObj.reshowNote(),this.showNote(c.chapter_id,c.chapter_name),""!=f&&c.api.delNote({note_id:d},function(a){b._updateSingleNote({s_id:"",note_id:a.note_id,time_stamp:a.time_stamp,oparate_type:3})},function(){c.isClient||(b.noteDialog.setMsg(g.noteDelFail),b.noteDialog.open(),h.oparate_type="0",b.renderCbnPage(c.data),c.noteDetailObj.opts.thisNoteObj&&(c.noteDetailObj._filterNote(c.chapter_id),c.noteDetailObj.opts.thisNoteObj.noteid=d,c.noteDetailObj.viewNote()),b.showNote(c.chapter_id,c.chapter_name))})},j.prototype.showNote=function(a,c){var d=this.opts,e=d.isMobile?"tap":"click";d.chapter_id=a,d.chapter_name=c;var f=[];d.$contentObj.find(".read-gli-note").removeClass("read-gli-note"),d.$contentObj.find(".read-gli-underline").removeClass("read-gli-underline"),d.$contentObj.find(".read-note-icon").remove();for(var g=d.data?d.data.chapter_list:[],h=0,i=g.length;h<i;h++)if(g[h].chapter_id==a){f=g[h].note_list.concat();break}var j=d.$contentObj.find("span[data-id]").first().attr("data-id"),k=d.$contentObj.find("span[data-id]").last().attr("data-id");j=parseInt(j),k=parseInt(k);var l=0,m=0,n=0,o="",p="",q=d.$contentObj.css("font-size");q=parseFloat(q.replace("px",""));for(d.$readerObj.offset().top,d.$readerObj.offset().left;f.length;)if(l=parseInt(f[0].firstId),m=parseInt(f[0].lastId),n=m,o=f[0].note_id,p=f[0].note_text,l=l>j?l:j,m=m<k?m:k,l>m)f.splice(0,1);else{if(""===p)for(var r=l;r<=m;r++)d.$contentObj.find('span[data-id="'+r+'"]').attr("data-noteid",o),d.$contentObj.find('span[data-id="'+r+'"]').hasClass("read-gli-note")||d.$contentObj.find('span[data-id="'+r+'"]').addClass("read-gli-underline");else{for(var r=l;r<=m;r++)d.$contentObj.find('span[data-id="'+r+'"]').attr("data-noteid",o).addClass("read-gli-note");if(m===n){var s=b('<div class="read-note-icon">'),t=d.$contentObj.find('span[data-id="'+m+'"]'),u=t.offset().top,v=t.offset().left,w=t.width();u=u<q?q:u,s.css({top:u-q+"px",left:v+w+"px"}).attr("data-noteid",o).attr("data-chapterid",a).on(e,function(a){d.noteDetailObj.open(b(this).data("noteid"),d.chapter_id),a.stopPropagation()}),d.$contentObj.eq(0).append(s)}}f.splice(0,1)}},j.prototype.addUnderline=function(a){var b=this.opts;if(b.$contentObj.find(".read-font-select").hasClass("read-gli-underline")||b.$contentObj.find(".read-font-select").hasClass("read-gli-note"))this.noteDialog.setMsg(g.noteError),this.noteDialog.open();else{b.$contentObj.find(".read-font-select").addClass("read-gli-underline");var c=b.data.note_list,d={chapter_id:b.chapter_id,chapter_name:b.chapter_name,s_id:"",note_id:e.getRandomKey(),original:a.original,note_text:"",note_time:e.getNowFormatDate(),firstId:a.firstId,lastId:a.lastId,note_page:a.note_page,oparate_type:"1",isSave:!1};b.$contentObj.find(".read-font-select").attr("data-noteid",d.note_id),c.push(d),this.renderCbnPage(b.data),this._sendNote(d)}},j.prototype.editNote=function(a){var b=this.opts;return a.isunderline||!b.$contentObj.find(".read-font-select").hasClass("read-gli-underline")&&!b.$contentObj.find(".read-font-select").hasClass("read-gli-note")?void b.editObj.open(a):(this.noteDialog.setMsg(g.noteError),this.noteDialog.open(),!1)},j.prototype._sendNote=function(a){function b(a,b){b&&(c.editObj.sucessDialog.setMsg(a),c.editObj.sucessDialog.open())}var c=this.opts,d=this,e={time_stamp:c.data.time_stamp,note_list:c.data.note_list};c.saveFile(c.filePath,JSON.stringify(e)),c.api.sendNote(a,function(c){console.info("[panelNotePc.js --> _sendNote] -- success!"),d._updateSingleNote({s_id:c.s_id,note_id:c.note_id,time_stamp:c.time_stamp,oparate_type:1}),b(g.noteSucess,""!=a.note_text),d._fallback(!0)},function(){var e=c.isClient?g.noteSucess:g.noteFail;""!=a.note_text||c.isClient?""!=a.note_text&&b(e,!0):(d.noteDialog.setMsg(g.noteFail),d.noteDialog.open()),d._fallback(c.isClient)})},j.prototype._fallback=function(a){for(var b=this.opts,c=b.data.note_list,d=!1,e=c.length-1;e>=0;e--)if(c[e].isSave===!1){delete c[e].isSave;var f=b.editObj.opts;a?f.thisNoteObj=null:(f.isEditNote?(c[e]=f.thisNoteObj,d=!0):f.thisNoteObj&&f.thisNoteObj.isunderline?c[e].note_text="":c.splice(e,1),this.renderCbnPage(b.data),this.showNote(b.chapter_id,b.chapter_name),d&&(b.noteDetailObj.opts.thisNoteObj.noteid=f.thisNoteObj.note_id,b.noteDetailObj._filterNote(b.chapter_id),b.noteDetailObj.viewNote()));break}},j.prototype._updateSingleNote=function(a){for(var b=this.opts,c=b.data.note_list,d=null,e=0,f=c.length;e<f;e++)if(d=c[e],d.note_id==a.note_id){"3"==a.oparate_type?c.splice(e,1):(d.s_id=a.s_id,d.oparate_type="0"),a.time_stamp&&(b.data.time_stamp=a.time_stamp);break}var g={time_stamp:b.data.time_stamp,note_list:b.data.note_list};b.saveFile(b.filePath,JSON.stringify(g))},j.prototype.batchUpdateNote=function(a,b,c){var d=this.opts;d.api.batchUpdateNote(a,function(a){"function"==typeof b&&b(a)},function(a){"function"==typeof c&&c(a)})},j.prototype.on=function(a,b){var c=this.opts;c.wrapObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},j}(b,a,P,Q,c,m,n,f),S=function(a,b,c,d,e,f,g){var h=a._,i=function(a){var b={wrapDomId:"",$readerObj:null,templHtml:"",templHeadHtml:"",templBodyHtml:"",templCatalogHtml:"",templNoteHtml:"",$domObj:null,$headerObj:null,$bodyObj:null,isMobile:!1,useBookmark:!0,useNote:!0,data:null},c=[{text:"目录",name:"catalog",state:"read-active",view:"read-catalog-body",prompt:"无目录"},{text:"笔记",name:"note",state:"",view:"read-note-body",prompt:"阅读时长按文字可添加笔记"},{text:"书签",name:"bookmark",state:"",view:"read-bookmark-body",prompt:"阅读时下拉添加书签"}];this.opts=e.extend(!0,{},b,a),this.opts.useBookmark||c.pop(),this.opts.useNote||c.splice(1,1);for(var d=this.opts.data,g=0,h=d.length;g<h;g++)d[g].view="read-custom-body",d[g].state=d[g].state||"";this.opts.data=c.concat(this.opts.data),this.opts.data.length>5&&(this.opts.data=this.opts.data.slice(0,5)),this.customFunc=[];for(var i=0;i<this.opts.data.length;i++){var j=this.opts.data[i].cbFunc||f.emptyFunc;this.customFunc.push(j)}this._init()};return i.prototype._init=function(){console.log("[panelCbn.js] --> _init! "),this._renderLayout(),this._bindEvent()},i.prototype._renderLayout=function(){var a=this.opts,f=h.template(a.templHtml),g=f();a.$domObj=e(g),a.$readerObj.append(a.$domObj),a.$headerObj=a.$domObj.find(".read-header"),a.$bodyObj=a.$domObj.find(".read-body");var i=h.template(a.templHeadHtml),j=i(a.data);a.$headerObj.append(j);var k=h.template(a.templBodyHtml),l=k(a.data);a.$bodyObj.append(l);var m=a.$bodyObj.find(".read-catalog-body");this.$catalogWrapBody=m,this.catalogObj=new b({wrapObj:m,tmplHtml:a.templCatalogHtml,isMobile:a.isMobile});var n=a.$bodyObj.find(".read-bookmark-body");this.$bookmarkWrapBody=n,this.bookmarkObj=null;var o=a.$readerObj.find(".read-setting-panel .read-header .read-bookmark-btn");a.useBookmark&&(this.bookmarkObj=new c({wrapObj:n,$readerObj:a.$readerObj,tmplHtml:a.templBookmarkHtml,isMobile:a.isMobile,isClient:a.isClient,markDomObj:o,saveFile:a.saveFile,filePath:a.bookmarkFilePath,api:a.api}));var p=a.$bodyObj.find(".read-note-body");this.$noteWrapBody=p,this.noteObj=null,a.useNote&&(this.noteObj=new d({$readerObj:a.$readerObj,wrapObj:p,tmplHtml:a.templNoteHtml,isMobile:a.isMobile,isClient:a.isClient,saveFile:a.saveFile,filePath:a.noteFilePath,editHtml:a.editHtml,detailHtml:a.detailHtml,shareHtml:a.shareHtml,api:a.api,note_share_conf:a.note_share_conf}))},i.prototype._bindEvent=function(){var a=this.opts,b=a.isMobile?"tap":"click",c=this;a.$domObj.find(".read-cover").on(b,function(){c.close()});var d=null;a.$headerObj.on(b,"div",function(){var b=e(this).index();e(this).addClass("read-active").siblings().removeClass("read-active"),d=a.$bodyObj.children().eq(b),d.removeClass("read-hide").siblings().addClass("read-hide"),d.hasClass("read-custom-body")&&c.customFunc[b](d)}),this.$catalogWrapBody.on("catalog:click",function(b,c){console.log("[panelCbn.js] 你点击了目录! -> id:"+c.id+", status:"+c.status),a.$domObj.trigger("cbncatalog:click",c)}),this.$bookmarkWrapBody.on("bookmark:click",function(b,c){console.log("[panelCbn.js] 你点击了书签 -! ->"),a.$domObj.trigger("cbnbookmark:click",c)}),a.useTV&&e("body").on("keydown",function(b){var c=e("a:focus").parents(".read-catalog-body").length,d=e("a:focus").find("span[data-view='read-catalog-body']").length,f=e("a:focus").find("span[data-view='read-bookmark-body']").length,g=e("a:focus").parents(".read-bookmark").index(),h=e("a:focus").parents(".read-one-chapter-bookmarks").index(),i=e("a:focus").parents(".read-one-chapter-bookmarks").find(".read-bookmark").length,j=e("a:focus").parents(".read-bookmark-body").find(".read-one-chapter-bookmarks").length;if(37===b.keyCode)(d>0||c>0||j>0)&&b.preventDefault();else if(39===b.keyCode)(f>0||c>0||j>0)&&b.preventDefault();else if(38===b.keyCode)(d>0||f>0)&&b.preventDefault(),c>0&&0==e("a:focus").parents("li").index()&&(a.$domObj.find(".read-header").find(".read-tv-a").eq(0).focus(),b.preventDefault()),e("a:focus").parents(".read-original-text").length>0&&0==g&&0==h&&(a.$domObj.find(".read-header").find(".read-tv-a").eq(1).focus(),b.preventDefault());else if(40===b.keyCode){d>0&&e("a:focus").parent().hasClass("read-active")&&(a.$domObj.find(".read-catalog-body").find(".read-tv-a").eq(0).focus(),b.preventDefault()),f>0&&e("a:focus").parent().hasClass("read-active")&&(a.$domObj.find(".read-bookmark-body").find(".read-tv-a").eq(0).focus(),b.preventDefault()),e("a:focus").parents(".read-bookmark-del").length>0&&g==i-1&&h==j-1&&b.preventDefault();var k=e("a:focus").parents("li").index()==e("a:focus").parents("ul").find("li").length-1;c>0&&k&&b.preventDefault()}})},i.prototype.getPanelObject=function(){},i.prototype.getCustomNavBody=function(a){console.log("[CbnPanel] --> getCustomNavBody")},i.prototype.renderCatalog=function(a){this.catalogObj.renderLayout(a)},i.prototype.renderBookmark=function(a){this.bookmarkObj.renderLayout(a)},i.prototype.updateBookmarks=function(a){console.log("[panelCbn.js]--> updateBookmarks"),f.hasFunction(this.bookmarkObj,"updateBookmarks")&&this.bookmarkObj.updateBookmarks(a)},i.prototype.getBookmarkData=function(){return console.log("[panelCbn.js]--> getBookmarkData"),this.bookmarkObj.getBookmarks()},i.prototype.showBookmark=function(a){console.log("[panelCbn.js]--> showBookmark"),f.hasFunction(this.bookmarkObj,"isShowBookmark")&&this.bookmarkObj.isShowBookmark(a)},i.prototype.renderNote=function(a){this.noteObj.renderLayout(a)},i.prototype.open=function(){var a=this.opts;a.$domObj.fadeIn(),setTimeout(function(){g(a.$domObj.find(".read-cbn-box")[0]).set("left","0").duration("0.5s").end()},10),a.useTV&&setTimeout(function(){a.$headerObj.find(".read-tv-a").eq(0).focus()},300)},i.prototype.close=function(){var a=this.opts;g(a.$domObj.find(".read-cbn-box")[0]).set("left","-100%").duration("0.5s").end(),setTimeout(function(){a.$domObj.fadeOut()},200)},i.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},i}(b,l,O,R,a,c,f),T=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,complainHtml:"",$domObj:null,isMobile:!1,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[ComplaintPanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj,isMobile:this.opts.isMobile})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.complainHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.isMobile?"tap":"click";b.$domObj.find(".read-cancel").on(c,function(){var c=b.$domObj.find(".read-edit textarea").val();a.cancel(c)}),b.$domObj.find(".read-cover").on(c,function(){a.close()}),b.$domObj.find(".read-edit .read-send").on(c,function(){var c=b.$domObj.find(".read-edit textarea").val();a.sendComplaint(c)})},h.prototype.open=function(){var a=this,b=a.opts;b.$domObj.fadeIn(),setTimeout(function(){f(b.$domObj.find(".read-content")[0]).set("left","0").duration("0.5s").end()},10)},h.prototype.cancel=function(a){var b=this,e=b.opts;b.cancelDialog=new c({$wrapDomObj:this.opts.$domObj,isMobile:this.opts.isMobile,okBtn:{txt:"继续编辑",cssClass:"",func:function(){e.$domObj.find(".read-edit textarea").focus()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close()}}}),a?(b.cancelDialog.setMsg(d.compCancel),b.cancelDialog.open()):b.close()},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-edit textarea").val(""),f(b.$domObj.find(".read-content")[0]).set("left","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200)},h.prototype.sendComplaint=function(a){var b=this,f=b.opts,g=f.$domObj.find(".read-edit .read-send");if(b.sucessDialog=new c({$wrapDomObj:this.opts.$domObj,isMobile:this.opts.isMobile,okBtn:{txt:"确定",cssClass:"",func:function(){b.close()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close()}}}),0!=a.length){var h=e.getTimestamp(),i=g.attr("data-complaint")?h-g.attr("data-complaint"):h;i>20?(f.loading.setMsg(d.dealWith),f.loading.open(),f.api.sendComplaint({complaint_val:a},function(a){f.loading.close(),a.status?(b.sucessDialog.setMsg(d.compSucess),b.sucessDialog.open(),g.attr("data-complaint",e.getTimestamp())):(b.sucessDialog.setMsg(a.error),b.sucessDialog.open())},function(){f.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(b.dialog.setMsg(d.compInterval),b.dialog.open())}else b.dialog.setMsg(d.inputContent),b.dialog.open()},h}(b,a,m,n,c,f),U=function(a,b,c,d,e){var f=a._,g='<% _.each(obj.search_list, function(search_list){  %><li class="read-cf read-one-result" data-site="<%= search_list.search_page %>"><div class="read-title"><%= search_list.chapter_name %></div><div class="read-search-font"><%= search_list.search_text %></div><div class="read-rt read-search-seat"><%= (parseFloat(search_list.search_page)*100).toFixed(4) + "%" %></div></li><% }); %>',h=function(a){var c={$readerObj:null,searchHtml:"",$domObj:null,isMobile:!1,api:null,searchResTempl:f.template(g)};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[SearchPanel] --> _init");this.opts;this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$readerObj,isMobile:this.opts.isMobile})},h.prototype._renderLayout=function(){var a=this.opts,c=f.template(a.searchHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap":"click";c.$domObj.find(".read-cover").on(d,function(){a.close()}),c.$domObj.on(d,".read-one-result",function(d){console.log("[panelSearch.js] -- > 点击搜索历史"),a.close(),c.$domObj.trigger("search:click",parseFloat(b(this).attr("data-site")))})},h.prototype.sendSearch=function(a){var b=this,c=b.opts;c.isClient?this.sendSearchOffline(a):this.sendSearchOnline(a)},h.prototype.open=function(){var a=this,b=a.opts;b.$domObj.fadeIn(),setTimeout(function(){e(b.$domObj.find(".read-content")[0]).set("right","0").duration("0.5s").end()},10)},h.prototype.close=function(){var a=this,b=a.opts;e(b.$domObj.find(".read-content")[0]).set("right","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200),b.$readerObj.find(".read-setting-panel .read-header .read-search-ipt input").val("")},h.prototype.sendSearchOffline=function(a){var b=this,c=b.opts;"function"!=typeof gli_search_offline?b.sendSearchOnline(a):0!=a.length?(c.loading.open(),c.loading.setMsg(d.nowSearch),gli_search_offline({keyword:a},function(a){if(c.loading.close(),0!=a.length){c.$domObj.find(".read-search-history").hide();var b=c.searchResTempl(a);c.$domObj.find(".read-search-result").show().html(b)}},function(){c.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(console.log("%c [panelSearch] sendSearch--> 请输入搜索内容","color:red;"),b.dialog.setMsg(d.inputContent),b.dialog.open())},h.prototype.sendSearchOnline=function(a){var b=this,c=b.opts;0!=a.length?(c.loading.open(),c.loading.setMsg(d.nowSearch),c.api.search({keyword:a},function(a){var e=a.data;if(c.loading.close(),a.status)if(e.search_list.length>0){var f=c.searchResTempl(e);c.$domObj.find(".read-content ul").html(f),b.open()}else b.dialog.setMsg(d.emptySearch),b.dialog.open();else b.dialog.setMsg(a.msg),b.dialog.open()},function(){c.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(b.dialog.setMsg(d.inputContent),b.dialog.open(),console.log("%c [panelSearch] sendSearch--> 请输入搜索内容","color:red;"))},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h}(b,a,m,n,f),V=function(a,b,c,d,e,f){var g=function(a){var b={$domObj:null,$readerObj:null,$contentObj:null,$menuWrap:null,isMobile:!1,pageColumn:1,touchState:0,isShowMenu:0,ismove:1,posMenu:"",pos:{startX:0,startY:0,endX:0,endY:0},useNote:!0,useCorrect:!0,isVerticalMode:!1,menu:{list:[{text:"划线",value:"underline"},{text:"笔记",value:"note"},{text:"复制",value:"copy"},{text:"纠错",value:"correct"}],value:"copy"},coprObj:null};this.opts=e.extend(!0,{},b,a),this._init()};return g.prototype._init=function(){var a=this.opts;this._setLayout(),this._bindEvent(),a.$readerObj.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})},g.prototype._setLayout=function(){var a=this.opts,b='<div class="read-content-select"><div class="read-radiogroup-menu"></div><div class="read-pc-pos-upper"></div><div class="read-pc-pos-lower"></div>';a.$domObj=e(b),a.$readerObj.append(a.$domObj),a.$contentObj=a.$readerObj.find(".read-selector-main .read-content"),a.$allContentObj=a.$contentObj,a.$menuWrap=a.$domObj.find(".read-radiogroup-menu");for(var f=a.menu.list,g=0,h=f.length;g<h;g++)a.useNote||"underline"!=f[g].value&&"note"!=f[g].value||(f[g].active="false",f[g].bg="read-bg-gray"),a.useCorrect||"correct"==f[g].value&&(f[g].active="false",f[g].bg="read-bg-gray");this.$menuObj=new c({$domObj:a.$menuWrap,data:f,value:a.menu.value,isMobile:a.isMobile}),a.$menuWrap.fadeOut(0),a.$menuWrap.find("li").removeClass("read-item").addClass("read-pc-item"),this.DialogObj=new d({$wrapDomObj:a.$readerObj,isMobile:a.isMobile,clientType:a.clientType}),this.upperPos=a.$domObj.find(".read-pc-pos-upper"),this.lowerPos=a.$domObj.find(".read-pc-pos-lower"),
this.posW=this.upperPos.width(),this.posH=this.upperPos.height(),this.upperPos.fadeOut(0),this.lowerPos.fadeOut(0)},g.prototype._getEvent=function(b){var c=this.opts;return!!b&&(b=c.isMobile?void 0!==b.touches&&"object"==typeof b.touches&&b.touches.length>0?b.touches[0]:void 0!==b.targetTouches.touches&&"object"==typeof b.targetTouches.touches&&b.targetTouches.touches.length>0?b.targetTouches.touches[0]:void 0!==b.changedTouches&&"object"==typeof b.changedTouches&&b.changedTouches.length>0?b.changedTouches[0]:void 0:b||a.event)},g.prototype._bindEvent=function(){var a=this.opts,b=this,c=a.$readerObj.find(".read-selector-main .read-chapter-content");this.upperPos.on("mousedown",function(b){a.$menuWrap.fadeOut(1),a.posMenu="upper"}),this.lowerPos.on("mousedown",function(b){a.$menuWrap.fadeOut(1),a.posMenu="lower"}),this.upperPos.on("mousemove",function(a){}),this.lowerPos.on("mousemove",function(a){}),this.upperPos.on("mouseup",function(c){a.posMenu="",2===a.touchState&&b._menuShow(),1===a.touchState&&(a.touchState=0)}),this.lowerPos.on("mouseup",function(c){a.posMenu="",2===a.touchState&&b._menuShow(),1===a.touchState&&(a.touchState=0)}),c.on("mousedown",function(c){var d=b._getEvent(c);a.pos.startX=d.pageX,a.pos.startY=d.pageY,a.pos.endX=d.pageX,a.pos.endY=d.pageY,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10),2===a.touchState?a.touchState=3:a.touchState=1,setTimeout(function(){b._isLongTouch.call(b)},400)}),a.$readerObj.find(".read-selector-main").on("mousemove",function(c){function d(a){var c=h.pageX+a*b.posW/2,d=h.pageY+a*b.posH/2;1==a?((d>f.endY+(i-g)/2||Math.abs(d-f.endY)<i/2&&c+g/8>f.endX)&&(c=f.endX,d=f.endY),f.startX=c,f.startY=d):((d<f.startY-(i-g)/2||Math.abs(f.startY-d)<i/2&&f.startX-g/8>c)&&(c=f.startX,d=f.startY),f.endX=c,f.endY=d)}function e(a){var c=h.pageX-a*b.posW/2,d=h.pageY+a*b.posH/2;1==a?((c<f.endX-g/2||Math.abs(c-f.endX)<i-g/2&&d>f.endY)&&(c=f.endX,d=f.endY),f.startX=c,f.startY=d):((c>f.startX||Math.abs(c-f.startX)<i-g/2&&d<f.startY)&&(c=f.startX,d=f.startY),f.endX=c,f.endY=d)}var f=a.pos,g=a.$contentObj.css("font-size");g=parseFloat(g);var h=b._getEvent(c);if(2===a.touchState){if(!a.ismove)return!1;var i=a.$contentObj.css("line-height");i=parseFloat(i),"upper"===a.posMenu&&(a.isVerticalMode?e(1):d(1)),"lower"===a.posMenu&&(a.isVerticalMode?e(-1):d(-1)),b._selectElem(f.startX,f.startY,f.endX,f.endY)}return 3!==a.touchState&&void(1===a.touchState&&(Math.abs(h.pageX-f.endX)>g||Math.abs(h.pageY-f.endY)>g)&&(a.touchState=0))}),a.$readerObj.find(".read-selector-main").on("mouseup",function(c){a.posMenu="",2===a.touchState&&b._menuShow(),1===a.touchState&&(a.touchState=0)});var d=a.isMobile?"tap":"click",f=d+" swipeDown swipeLeft swipeRight";c.on(f,function(b){return 2!==a.touchState&&(3===a.touchState?(a.touchState=0,!1):void 0)}),this.$menuObj.on("change:click",function(d,f){var g=c.find(".read-font-select").first().attr("data-id"),h=c.find(".read-font-select").last().attr("data-id"),i=b._getPosLen(),j={firstId:parseInt(g),lastId:parseInt(h),original:"",isunderline:!a.ismove,posLen:i.posLen,currPage:i.currPage};if(c.find(".read-font-select").each(function(){e(this).hasClass("reader-MathJax")?j.original+=e(this).find("script").html():e(this).hasClass("read-special-tab")?j.original+=e(this).html():j.original+=e(this).text()}),"copy"===f.newValue&&b._phoneCopy(),"underline"===f.newValue){if("删除"===f.newText){var k=c.find(".read-font-select").attr("data-noteid");a.$domObj.trigger("Select:delUnderline",k)}else a.$domObj.trigger("Select:addUnderline",j);a.touchState=0,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10)}"note"===f.newValue&&(c.find(".read-font-select").attr("data-noteid")&&(j.note_id=c.find(".read-font-select").attr("data-noteid")),a.$domObj.trigger("Select:addNote",j),a.touchState=0,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10)),"correct"===f.newValue&&(a.$domObj.trigger("Select:correct",j),a.touchState=0,b._menuclose(),b.upperPos.fadeOut(10),b.lowerPos.fadeOut(10))}),a.$readerObj.on("mousedown",function(d){var e=b._getEvent(d),f=c.offset(),g=a.$readerObj.find(".read-selector-main .read-body .read-prev-paging").width();(e.pageX<f.left+g||e.pageX>f.left+f.width-g||e.pageY<f.top||e.pageY>f.top+f.height)&&b.close()})},g.prototype._phoneCopy=function(){var a=this.opts,c="",d=0;a.$contentObj.find(".read-font-select").each(function(){c+=e(this)[0].innerText,""!==b.trim(e(this)[0].innerText)&&(d+=1)}),this._gliCopy(c,d)},g.prototype._gliCopy=function(a,b){var c=this.opts,d=this,e=a||"",f=b;c.coprObj.getCoprParam(function(){var a=c.coprObj.opts.coprData,b=-1,g=-1;a.status&&(b=a.copy_long,g=a.copy_times),b==-1&&g==-1?d._setCopyInfo(e,f):f>0&&f<=b&&g>0?d._setCopyInfo(e,f):(c.coprObj.setCoprParam("copy",0),d._copyDisabled(g,b),e="")})},g.prototype._setCopyInfo=function(a,b){var c=this.opts,d=this,f=a||"",g=b;try{"undefined"!=typeof gli_set_clipboard&&"function"==typeof gli_set_clipboard&&f&&gli_set_clipboard({type:"text",text:f}),c.coprObj.setCoprParam("copy",g),d.DialogObj.setMsg("您复制了"+g+"个字!"),d.DialogObj.opts.okBtn.func=function(a){var b=e('<input id="copyInput"  value="'+f+'" />');document.getElementsByTagName("body")[0].appendChild(b[0]),document.getElementById("copyInput").select(),document.execCommand("copy"),b.remove(),d._menuclose(),d.upperPos.fadeOut(10),d.lowerPos.fadeOut(10)},d.DialogObj.open()}catch(a){console.warn("[copyright.js] -->setCopyInfo 出错.")}},g.prototype._copyDisabled=function(a,b){return 0==a?(this.DialogObj.setMsg(f.copyRunOut),this.DialogObj.opts.okBtn.func=function(){},void this.DialogObj.open()):void(0==b?(this.DialogObj.setMsg(f.copyRunOut),this.DialogObj.opts.okBtn.func=function(){},this.DialogObj.open()):(this.DialogObj.setMsg(f.copyStill+b+"个字!"),this.DialogObj.opts.okBtn.func=function(){},this.DialogObj.open()))},g.prototype._isLongTouch=function(){var a=this,b=a.opts,c=0;if(b.posMenu="",1===b.touchState||3===b.touchState){if(b.touchState=2,2==b.pageColumn)if(b.isVerticalMode){var d=b.$readerObj.find(".read-selector-main .read-content.read-page-1").offset().left;d<b.pos.startX?b.$contentObj=b.$readerObj.find(".read-selector-main .read-content.read-page-1"):b.$contentObj=b.$readerObj.find(".read-selector-main .read-content.read-page-2")}else{var d=b.$readerObj.find(".read-selector-main .read-content.read-page-2").offset().left;d<b.pos.startX?b.$contentObj=b.$readerObj.find(".read-selector-main .read-content.read-page-2"):b.$contentObj=b.$readerObj.find(".read-selector-main .read-content.read-page-1")}var f=b.$contentObj.find(".read-filterSpan");if(0===f.length)return b.touchState=0,!1;c=a._positionElem(b.pos.startX,b.pos.startY),b.pos.startX=f.eq(c).offset().left+f.eq(c).width()/2,b.pos.startY=f.eq(c).offset().top+f.eq(c).height()/2,b.pos.endX=f.eq(c).offset().left+f.eq(c).width()/2,b.pos.endY=f.eq(c).offset().top+f.eq(c).height()/2;var g=c,h=c;if(f.eq(c).hasClass("read-gli-underline")){b.ismove=0;var i=f.eq(c).attr("data-noteid"),j=b.$allContentObj.find('[data-noteid="'+i+'"]'),g=j.first().attr("data-id"),h=j.last().attr("data-id");j.addClass("read-font-select"),b.posMenu="upper",a._posMenuShow(g),b.posMenu="lower",a._posMenuShow(h),this.$menuObj.setValue("underline","删除")}else b.ismove=1,e(f[c]).addClass("read-font-select"),a._posMenuShow(f.eq(c).attr("data-id"))}},g.prototype._selectElem=function(a,b,c,d){var f=this.opts,g=0,h=0,i=f.$contentObj.find(".read-filterSpan");g=this._positionElem(a,b),h=this._positionElem(c,d),f.$contentObj.find(".read-font-select").each(function(){e(this).removeClass("read-font-select")});for(var j=g;j<=h;j++)i.eq(j).addClass("read-font-select");"upper"===f.posMenu&&this._posMenuShow(i.eq(g).attr("data-id")),"lower"===f.posMenu&&this._posMenuShow(i.eq(h).attr("data-id"))},g.prototype._positionElem=function(a,b){var c=this,d=c.opts,f=d.$contentObj.css("font-size"),g=d.$contentObj.css("line-height"),h=9999,i=0,j=0,k=0;f=parseFloat(f.replace("px","")),g=parseFloat(g.replace("px",""));for(var l=d.$contentObj.find(".read-filterSpan"),m=0,n=l.length;m<n;m++){if(d.isVerticalMode){if(j=e(l[m]).offset().left-e(l[m]).width(),k=e(l[m]).offset().top+e(l[m]).height(),j+(g-f)/2<a){if(k>b){d.isShowMenu=1,i=m;break}if(!(h>Math.abs(k+f/2-b))){d.isShowMenu=1,i=m,m&&e(l[m]).offset().left<e(l[m-1]).offset().left&&(i=m-1);break}h=Math.abs(k+f/2-b)}}else if(j=e(l[m]).offset().left+e(l[m]).width(),k=e(l[m]).offset().top+e(l[m]).height(),k+(g-f)/2>b){if(j>a){d.isShowMenu=1,i=m;break}if(!(h>Math.abs(j+f/2-a))){d.isShowMenu=1,i=m,m&&e(l[m]).offset().top>e(l[m-1]).offset().top&&(i=m-1);break}h=Math.abs(j+f/2-a)}!i&&m===n-1&&m&&(d.isShowMenu=1,i=m)}return i},g.prototype._posMenuShow=function(a){var b=this.opts,c=b.$allContentObj.find('.read-filterSpan[data-id="'+a+'"]'),d=c.offset().top,e=c.offset().left,f=c.width(),g=c.height(),h=b.$readerObj.offset().top,i=b.$readerObj.offset().left;b.isVerticalMode?("lower"!==b.posMenu&&(this.upperPos.css("top",d-this.posH+g-h+"px"),this.upperPos.css("left",e-this.posW/2-i+f+"px")),"upper"!==b.posMenu&&(this.lowerPos.css("top",d-h+"px"),this.lowerPos.css("left",e-this.posW/2-i+"px"))):("lower"!==b.posMenu&&(this.upperPos.css("top",d-this.posH+g-h+"px"),this.upperPos.css("left",e-this.posW/2-i+"px")),"upper"!==b.posMenu&&(this.lowerPos.css("top",d-h+"px"),this.lowerPos.css("left",e-this.posW/2+f-i+"px"))),this.upperPos.fadeIn(0),this.lowerPos.fadeIn(0)},g.prototype._menuShow=function(){var a=this,b=a.opts;if(!b.isShowMenu)return!1;var c=b.$readerObj.height(),d=0,e=0,f=b.$contentObj.find(".read-font-select"),g=b.$readerObj.offset().top;if(d=f.eq(0).offset().top-g,e=f.eq(f.length-1).offset().top-g,d>e){var h=d;d=e,e=h}d>80+b.$contentObj.offset().top?b.$menuWrap.css("top",d-80+"px"):e<c-120?b.$menuWrap.css("top",e+80+"px"):b.$menuWrap.css("top","50%");var i=b.$readerObj.offset().left,j=b.$contentObj.offset().left+b.$contentObj.width()/2;b.$menuWrap.css("left",j-i+"px"),b.$menuWrap.fadeIn(400)},g.prototype._menuclose=function(){var a=this.opts;a.$menuWrap.fadeOut(200),this.$menuObj.setValue("underline","划线"),a.isShowMenu=0,a.touchState=0,a.$allContentObj.find(".read-font-select").each(function(){e(this).removeClass("read-font-select")})},g.prototype.close=function(){this.opts;this._menuclose(),this.upperPos.fadeOut(10),this.lowerPos.fadeOut(10)},g.prototype._getPosLen=function(){var a=this.opts,b=0,c=a.$contentObj.find(".read-font-select").first(),d=c.attr("data-id"),f=2;return 2==a.pageColumn&&c.offset().left<a.$allContentObj.eq(1).offset().left&&(f=1),a.$contentObj.find(".read-filterSpan").each(function(){if(b+=e(this)[0].innerText.length,e(this).attr("data-id")===d)return!1}),{posLen:b,currPage:f}},g.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},g}(b,c,h,m,a,n),W=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,correctHtml:"",$domObj:null,isMobile:!1,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[CorrectPanel] --> _init"),this._renderLayout(),this._bindEvent()},h.prototype._renderLayout=function(){var a=this.opts,d=g.template(a.correctHtml),e=d();a.$domObj=b(e),a.$readerObj.append(a.$domObj),this.tips=new c({parentObj:a.$readerObj[0]})},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.isMobile?"tap":"click";b.$domObj.find(".read-cover").on(c,function(b){a.close()}),b.$domObj.find(".read-cancel").on(c,function(){var c=b.$domObj.find(".read-content textarea").val().trim();b.$domObj.find(".read-content textarea").blur(),a.cancel(c)}),b.$domObj.find(".read-send").on(c,function(){var c=b.$domObj.find(".read-content textarea").val().trim();a.sendCorrect(c)})},h.prototype.open=function(a){var b=this.opts;b.thisNoteObj=a,b.first=!0,b.$domObj.fadeIn(),setTimeout(function(){f(b.$domObj.find(".read-content")[0]).set("left","0").duration("0.5s").end()},10),b.$domObj.find(".read-content .read-original-text").html(a.original),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])},h.prototype.cancel=function(a){var b=this.opts;a&&b.first?(setTimeout(function(){b.first=!1},1e3),this.tips.open(d.correctCancel,1e3),b.$domObj.find(".read-content textarea").focus()):this.close()},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-content textarea").val(""),f(b.$domObj.find(".read-content")[0]).set("left","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200)},h.prototype.sendCorrect=function(a){var b=this,c=this.opts,e={chapter_id:c.thisNoteObj.chapter_id,chapter_name:c.thisNoteObj.chapter_name,percent:c.thisNoteObj.note_page,original:c.thisNoteObj.original,correctVal:a};a?c.api.sendCorrect(e,function(){b.tips.open(d.correctSucess,1e3),b.close()},function(a){console.warn(a),b.tips.open(d.sendError,1e3)}):this.tips.open(d.correctError,1e3)},h}(b,a,F,n,m,f),X=function(a,b,c){var d=a._,e=function(a){var c={$domObj:null};this.opts=b.extend(!0,{},c,a),this._init()};return e.prototype._init=function(){var a=this.opts,c=d.template(a.videoTemplHtml);a.$domObj=b(c()),a.$readerObj.append(a.$domObj),this.bigSizeVideoWrap=a.$domObj,this.waitingMask=this.bigSizeVideoWrap.find(".read-waiting-mask"),this.pauseMask=this.bigSizeVideoWrap.find(".read-pause-mask"),this.bigsizeVideo=this.bigSizeVideoWrap.find(".read-bigsize-video"),this.videoPlayIcon=this.bigSizeVideoWrap.find(".read-video-play-btn"),this.volumeBar=this.bigSizeVideoWrap.find(".read-volume-bar"),this.volumePoint=this.volumeBar.find(".read-loadedvolume-point"),this.loadedVolumeBar=this.volumeBar.find(".read-loadedvolume-bar"),this.progressBar=this.bigSizeVideoWrap.find(".read-progress-bar"),this.loadedProgressBar=this.progressBar.find(".read-loadedprogress-bar"),this.headControl=this.bigSizeVideoWrap.find(".read-header-bar"),this.footControl=this.bigSizeVideoWrap.find(".read-video-controls-container"),this.mousePos={posY:""},this._bindEvent()},e.prototype._bindEvent=function(){var d=this.opts,e=this,f=this.bigSizeVideoWrap.find(".read-back");f.on("click",function(){e.close()}),this.videoPlayIcon.on("click",function(){return e._setVideoPlayOrPause(),!1}),this.bigsizeVideo.on("click",function(){return e._setVideoPlayOrPause(),!1}),this.bigsizeVideo.on("play",function(){console.log("播放视频"),e.videoPlayIcon.addClass("read-pause"),e.pauseMask.hide()}),this.bigsizeVideo.on("pause",function(){console.log("暂停视频"),e.videoPlayIcon.removeClass("read-pause"),e.pauseMask.show()}),this.pauseMask.on("click",function(){return e._setVideoPlayOrPause(),b(this).hide(),!1}),this.bigsizeVideo.on("waiting",function(){e.waitingMask.show()}),this.bigsizeVideo.on("canplay",function(){e.waitingMask.hide()}),this.progressBar.on("click",function(a){var c=a.offsetX,d=b(this).width(),f=(c/d).toFixed(2),g=b(this).parent().parent().prev()[0],h=g.duration;g.currentTime=f*h,g.play(),e.loadedProgressBar.width(c)}),this.bigsizeVideo.on("timeupdate",function(){var a=this.currentTime,b=this.duration,d=c.formatTime(a),f=c.formatTime(b),g=e.progressBar.width(),h=a/b*g;e.loadedProgressBar.width(h),e.bigSizeVideoWrap.find(".read-video-currenttime").html(d),isNaN(b)||e.bigSizeVideoWrap.find(".read-video-totaltime").html(f)}),this.bigSizeVideoWrap.find(".read-volume-icon").on("click",function(){return e.volumeBar.toggle(),e._setVolumeBarH(),e._clearSelect(),!1}),this.volumeBar.on("click",function(a){var c=b(this).height(),d=a.offsetY,f=d/c,g=f.toFixed(1),h=1;e.bigsizeVideo[0].volume=1-g*h,e.loadedVolumeBar.height(d),e.volumePoint.css("bottom",c-d-8),a.stopPropagation()}),this.volumeBar.find(".read-addvolume-icon").on("click",function(){var a=e.bigsizeVideo[0].volume;1-a>.1&&(e.bigsizeVideo[0].volume=a+.1);var b=e.volumeBar.height();return a=e.bigsizeVideo[0].volume,1-a<.1&&(a=1),e.loadedVolumeBar.height(b-a*b),e.volumePoint.css("bottom",a*b),e._clearSelect(),!1}),this.volumePoint.on("mousedown",function(c){var d=c||a.event;e.mousePos.posY=d.clientY;var f=this.offsetTop,g=e.volumeBar.height(),h=b(this).width();return e.bigSizeVideoWrap.on("mousemove",function(b){var c=(b||a.event).clientY,d=g-(c-e.mousePos.posY+f+h);d<0?d=-h/2:d>g&&(d=g),e.volumePoint.css("bottom",d),e.loadedVolumeBar.height(g-d);var i=(d/g).toFixed(1),j=1;e.bigsizeVideo[0].volume=i*j,e._clearSelect()}),e.bigSizeVideoWrap.on("mouseup",function(){e.bigSizeVideoWrap.off("mousemove"),e.bigSizeVideoWrap.off("mouseup")}),!1}),this.volumePoint.on("click",function(){return!1}),e.headControl.on("mouseover",function(a){"none"==e.headControl.find(".read-container").css("display")&&e._setControlBar("show"),clearTimeout(d.timer)}),e.headControl.on("mouseleave",function(a){e._setControlBar("hide")}),e.footControl.on("mouseover",function(a){"none"==e.footControl.find(".read-video-controls").css("display")&&e._setControlBar("show"),clearTimeout(d.timer)}),e.footControl.on("mouseleave",function(a){e._setControlBar("hide")}),e.footControl.find(".read-full-screen").on("click",function(){b(this).hasClass("read-exit-full-screen")?(b(this).removeClass("read-exit-full-screen"),e._exitFullScreen()):(b(this).addClass("read-exit-full-screen"),e._fullScreen())}),document.addEventListener("fullscreenchange",function(){document.fullscreen||e.footControl.find(".read-full-screen").removeClass("read-exit-full-screen")},!1),document.addEventListener("mozfullscreenchange",function(){document.mozFullScreen||e.footControl.find(".read-full-screen").removeClass("read-exit-full-screen")},!1),document.addEventListener("webkitfullscreenchange",function(){document.webkitIsFullScreen||e.footControl.find(".read-full-screen").removeClass("read-exit-full-screen")},!1),document.addEventListener("msfullscreenchange",function(){document.msFullscreenElement||e.footControl.find(".read-full-screen").removeClass("read-exit-full-screen")},!1)},e.prototype._setControlBar=function(a){var b=this,c=this.opts;"show"==a?(b.headControl.find(".read-container").fadeIn(),b.footControl.find(".read-video-controls").fadeIn()):c.timer=setTimeout(function(){b.headControl.find(".read-container").fadeOut(),b.footControl.find(".read-video-controls").fadeOut()},3e3)},e.prototype._setVolumeBarH=function(){var a=this.bigsizeVideo[0].volume,b=1,c=((1-a)/b).toFixed(1),d=this.volumeBar.height(),e=c*d;this.loadedVolumeBar.height(e),this.volumePoint.css("bottom",a/b*d)},e.prototype._setVideoPlayOrPause=function(){var a=this.bigsizeVideo[0];a.paused?a.play():a.pause()},e.prototype._clearSelect=function(){a.getSelection?a.getSelection().removeAllRanges():document.selection.empty()},e.prototype._fullScreen=function(){var a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():elem.msRequestFullscreen&&elem.msRequestFullscreen()},e.prototype._exitFullScreen=function(){document.documentElement;document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},e.prototype.open=function(a){var c=this.opts,d=this;c.videoName=a.name,c.videoSrc=a.src,d.bigsizeVideo[0].src=c.videoSrc,d.bigSizeVideoWrap.find(".read-video-currenttime").html("00:00:00"),d.bigSizeVideoWrap.find(".read-video-totaltime").html("00:00:00"),d.bigSizeVideoWrap.find(".read-video-title").html(c.videoName),d.pauseMask.show(),c.$domObj.fadeIn(),d._setControlBar("hide"),b("body").on("keypress",function(a){32===a.keyCode&&(console.log("你按下了空格！！"),d._setVideoPlayOrPause())})},e.prototype.close=function(){var a=this.opts;b("body").off("keypress"),this.videoPlayIcon.removeClass("read-pause"),a.$domObj.fadeOut()},e}(b,a,c),Y=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,$domObj:null,isMobile:!1,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[FontTypePanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.fontTypeHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap":"click";c.$domObj.find(".read-cover").on(d,function(){a.close()}),c.$domObj.on(d,".read-a-btn",function(){b(this).addClass("read-active").siblings().removeClass("read-active");var a=b(this).attr("data-class");c.$domObj.trigger("fontSize:click",a)}),c.$domObj.on(d,".read-f-family li",function(){b(this).addClass("read-active").siblings().removeClass("read-active");var a=b(this).attr("data-class");c.$domObj.trigger("fontFamily:click",a)}),c.useTV&&b("body").on("keydown",function(a){var c=b("a:focus").parents(".read-f-size").length,d=b("a:focus").index(),e=b("a:focus").parent().find(".read-a-btn").length,f=b("a:focus").parents(".read-f-family").length,g=b("a:focus").parents("li").index(),h=b("a:focus").parents(".read-f-family").find("li").length;37===a.keyCode?(c>0&&0==d||f>0)&&a.preventDefault():39===a.keyCode?(c>0&&d==e-1||f>0)&&a.preventDefault():38===a.keyCode?c>0&&a.preventDefault():40===a.keyCode&&f>0&&g==h-1&&a.preventDefault()})},h.prototype.open=function(){var a=this,b=a.opts;b.$domObj.fadeIn(),setTimeout(function(){f(b.$domObj.find(".read-content")[0]).set("right","0").duration("0.5s").end()},10),b.useTV&&setTimeout(function(){b.$domObj.find(".read-f-size .read-a-btn").eq(0).focus()},300)},h.prototype.close=function(){var a=this,b=a.opts;f(b.$domObj.find(".read-content")[0]).set("right","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200)},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h}(b,a,m,n,c,f),Z=function(a,b,c,d,e,f){var g=function(a){var b={$domObj:null,$readerObj:null,isMobile:!0,coprData:null,black_time:3e4,black_timeMax:12e4,black_timeNow:0,api:null};this.opts=e.extend(!0,{},b,a),this._init()};return g.prototype._init=function(){this.opts;this._setLayout(),this.getCoprParam(function(){a.ReaderCopyRight.run()},"first")},g.prototype._setLayout=function(){var a=this.opts,b='<div class="read-comm-panel read-copyright-watermark"><div class="read-watermark"></div><div class="read-mask"></div><div class="read-phoneblack"><div class="read-countdown"></div></div></div>';a.$domObj=e(b),a.$readerObj.append(a.$domObj),a.$domObj.find(".read-mask").on("click",function(){e(this).css("display","none")})},g.prototype.getCoprParam=function(b,c){var d=this.opts,e=c||"nofirst";d.api.get_copyright({img_type:"base64"},function(c){c.watermark.imgUrl="data:image/png;base64,"+c.watermark.imgUrl,d.coprData=c,a.ReaderCopyRight._saveCoprParam(),b()},function(a){"first"===e?d.$domObj.trigger("Copyright:getCoprParam"):b()})},g.prototype.setCoprParam=function(b,c){var d=a.ReaderCopyRight.opts,e=d.coprData;return!!e.status&&void d.api.set_copyright({operate_type:b,operate_val:c},function(){console.log("[copyright.js] ->setCoprParam 成功:")},function(d){"copy"===b&&c&&(e.copy_long!==-1&&(e.copy_long-=c),e.copy_times!==-1&&(e.copy_times-=1),a.ReaderCopyRight._saveCoprParam()),console.log("[copyright.js] ->setCoprParam 出错:"+d)})},g.prototype.run=function(){var b=a.ReaderCopyRight.opts;a.ReaderCopyRight._setWatermark(),b.coprData.status&&(a.ReaderCopyRight._intercept(),a.ReaderCopyRight._interfaceFun())},g.prototype._saveCoprParam=function(){var b=a.ReaderCopyRight.opts;b.$domObj.trigger("Copyright:saveCoprParam",b.coprData)},g.prototype._setWatermark=function(){var b=a.ReaderCopyRight.opts,c=b.coprData.watermark;if(c.status){var d=b.$domObj.find(".read-watermark");d.css("background-image","url("+c.imgUrl+")"),d.css("opacity",c.opacity/100),d.css("display","block")}},g.prototype._intercept=function(){var b=a.ReaderCopyRight.opts;b.$readerObj[0].oncontextmenu=function(){return a.ReaderCopyRight._pressRbutton()},document.onkeydown=function(){return event.ctrlKey&&67==a.event.keyCode?a.ReaderCopyRight._pressCtrlC():event.ctrlKey&&80==a.event.keyCode?a.ReaderCopyRight._pressCtrlP():event.ctrlKey&&(event.altKey||18==a.event.keyCode)?a.ReaderCopyRight._pressCtrlAlt():void 0},b.coprData.print_flg||(a.onblur=function(){a.ReaderCopyRight._setMask("worked")}),b.isMobile&&b.$readerObj.css({"-webkit-user-select":"none","-ms-user-select":"none"})},g.prototype._interfaceFun=function(){function c(b){a.ReaderCopyRight._clipboardChange(b)}var d=a.ReaderCopyRight.opts.coprData;if("undefined"!=typeof gli_capture_cc&&"function"==typeof gli_capture_cc){var e=b.createFunName(a.ReaderCopyRight._pressCtrlC,"pressCtrlC");gli_capture_cc(e)}if("undefined"!=typeof gli_capture_cp&&"function"==typeof gli_capture_cp){var f=b.createFunName(a.ReaderCopyRight._pressCtrlP,"pressCtrlP");gli_capture_cp(f)}if("undefined"!=typeof gli_capture_ctrl_alt&&"function"==typeof gli_capture_ctrl_alt){var g=b.createFunName(a.ReaderCopyRight._pressCtrlAlt,"pressCtrlAlt");gli_capture_ctrl_alt(g)}if("undefined"!=typeof gli_capture_rbutton&&"function"==typeof gli_capture_rbutton){var h=b.createFunName(a.ReaderCopyRight._pressRbutton,"pressRbutton");gli_capture_rbutton(h)}if("undefined"!=typeof gli_capture_foreground&&"function"==typeof gli_capture_foreground){var i=b.createFunName(a.ReaderCopyRight._loseFocus,"loseFocus");gli_capture_foreground(i)}if("undefined"!=typeof gli_photo_change&&"function"==typeof gli_photo_change&&(d.screenshot_flg||gli_photo_change(function(){a.ReaderCopyRight._phoneblack()},!0)),"undefined"!=typeof gli_capture_clipboard_change&&"function"==typeof gli_capture_clipboard_change&&!d.screenshot_flg){var j=b.createFunName(c,"clipboardChange");gli_capture_clipboard_change(j)}},g.prototype._pressCtrlC=function(){return!1},g.prototype._pressCtrlP=function(){var b=a.ReaderCopyRight.opts.coprData;return b.print_flg?("undefined"!=typeof gli_web_print&&"function"==typeof gli_web_print&&gli_web_print(),a.ReaderCopyRight.setCoprParam("print",1),!0):(a.ReaderCopyRight.setCoprParam("print",0),!1)},g.prototype._pressCtrlAlt=function(){var b=a.ReaderCopyRight.opts.coprData;return!!b.screenshot_flg||(a.ReaderCopyRight._setMask("worked"),!1)},g.prototype._pressRbutton=function(){return!1},g.prototype._loseFocus=function(b){var c=a.ReaderCopyRight.opts.coprData;c.print_flg||b||a.ReaderCopyRight._setMask("worked")},g.prototype._setMask=function(b){var c=a.ReaderCopyRight.opts,d=c.$domObj.find(".mask");"worked"===b?d.css("display","block"):d.css("display","none")},g.prototype._phoneblack=function(){var c=a.ReaderCopyRight.opts;a.ReaderCopyRight.setCoprParam("screenshot",1);var d=b.getTimestamp(!0),e=parseInt(localStorage.getItem("timeRecord"))||d;localStorage.setItem("timeRecord",d),localStorage.setItem("black_timeNow",localStorage.getItem("black_timeNow")||c.black_time),d-e>6e5&&localStorage.setItem("black_timeNow",c.black_time);var f=parseInt(localStorage.getItem("black_timeNow"));if(f>c.black_timeMax)return c.$domObj.trigger("Copyright:exitReaderCb"),!1;var g=c.$domObj.find(".read-phoneblack");c.$domObj.find(".read-countdown");g.css("display","block"),c.black_timeNow=f,localStorage.setItem("black_timeNow",2*parseInt(f)),a.ReaderCopyRight._countDown(),setTimeout(function(){g.css("display","none")},f)},g.prototype._countDown=function(){var c=a.ReaderCopyRight.opts,d=localStorage.getItem("timeRecord"),e=(parseInt(d)+c.black_timeNow-b.getTimestamp(!0))/1e3,f=c.$domObj.find(".read-countdown");f.html("您有截屏操作，我们正在对您进行黑屏处理，还有"+e.toFixed(0)+"秒恢复正常！"),e>=0&&setTimeout(function(){a.ReaderCopyRight._countDown.call(a.ReaderCopyRight)},1e3)},g.prototype._clipboardChange=function(b){var c=b;"bitmap"===c&&(a.ReaderCopyRight._phoneblack(),"undefined"!=typeof gli_set_clipboard&&"function"==typeof gli_set_clipboard&&(gli_set_clipboard({type:"text",text:""}),a.ReaderCopyRight.setCoprParam("screenshot",0)))},g.prototype.on=function(b,c){var d=a.ReaderCopyRight.opts;d.$domObj.on(b,function(a,b){"function"==typeof c&&c(a,b)})},g}(b,c,h,m,a,n),aa=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,manuscriptPicTempl:"",$domObj:null,isMobile:!0,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[ManuscriptPic] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj,isMobile:this.opts.isMobile})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.manuscriptPicTempl),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap":"click";c.$domObj.find(".read-cover").on(d,function(){a.close()}),c.$domObj.on(d,".read-f-family li",function(){b(this).addClass("read-active").siblings().removeClass("read-active");var a=b(this).attr("data-model");c.$domObj.trigger("manuscriptPic:click",a)})},h.prototype.open=function(){var a=this,b=a.opts;b.$domObj.fadeIn(),setTimeout(function(){f(b.$domObj.find(".read-content")[0]).set("right","0").duration("0.5s").end()},10)},h.prototype.close=function(){var a=this,b=a.opts;f(b.$domObj.find(".read-content")[0]).set("right","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200)},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h}(b,a,m,n,c,f),ba=function(a,b,c,d,e){var f=a._,g=function(a){var c={$readerObj:null,knowledgeHtml:"",listHtml:'<div class="read-title read-cf"><span class="read-lf">【<span><%= obj.name %></span>】 知识点</span><span class="read-rt">共<span><%= obj.point_list.length %></span>条知识点</span></div><ul><% _.each(obj.point_list, function(list, i){  %><li data-index="<%= i %>"><span class="read-lf"><%= list.txt %></span><span class="read-rt"><%= i + 1 %></span></li><% }); %></ul>',$domObj:null,isMobile:!1,totalLen:0,api:null,level:5,baseSize:20,graphId:0,color:["#096984","#1c92f4","#596e8b","#899a7b","#28a9c8","#7ba3a9","#767aae","#5bb2bb","#99cbe8","#becfab"]};this.opts=b.extend(!0,{},c,a),this._init()};return g.prototype._init=function(){console.log("[KnowledgePanel] --> _init"),this._renderLayout(),this._bindEvent(),this._getKnowledge()},g.prototype._getKnowledge=function(){var a=this.opts,b=this;a.graphData=[],a.firstNodes=[],a.kNodes=[],a.api.getKnowledgeTree({},function(c){a.graphData=c.graph,b._initGraph()},function(a){console.warn("[reader.js]--获取知识失败!")})},g.prototype._getArrValByKey=function(a,c,d){var e={};if(a instanceof Array&&c&&null!=d)for(var f=0,g=a.length;f<g;f++){var h=a[f][c];if(h instanceof Array){if(h.indexOf(d)!=-1){e=b.extend(!0,{},a[f]),e.new_index=f;break}}else if(h==d){e=b.extend(!0,{},a[f]),e.new_index=f;break}}return e},g.prototype._setSize=function(a){for(var b=a<=20?35:23,c=100;a>20;c-=8)if(a>c){b+=1;break}return b},g.prototype._getRandomColor=function(){var a=this.opts,b=a.color;return b[Math.floor(10*Math.random())]},g.prototype._initGraph=function(){for(var a=this.opts,b=0,c=a.graphData.length;b<c;b++){for(var d=a.graphData[b].nodes,e=a.graphData[b].linkTarget,f=0,g=d.length;f<g;f++){var h=d[f];h.data_id=h.id,h.arr_index=f,h.symbolSize=a.baseSize,h.itemStyle={normal:{color:this._getRandomColor()}},delete h.id}for(var f=0,g=d.length;f<g;f++){for(var h=d[f],i=[],j=0,k=h.link_id.length;j<k;j++){var l=h.link_id[j],m=e[l].target,n=this._getArrValByKey(d,"data_id",m);i.push(n.arr_index)}h.arr_link=i}}this._getFirstNodes()},g.prototype._getFirstNodes=function(a){var c=this.opts,d=a||0;c.kData=c.graphData[d];var e=c.kData.nodes;c.baseSize=this._setSize(e.length);for(var f=0,g=e.length;f<g;f++){var h=e[f];h.symbolSize=c.baseSize;for(var i=0,j=h.arr_link.length;i<j;i++)null==h.arr_link[i]&&console.log("node_error:"+h.name+"("+f+")")}c.firstNodes=b.extend(!0,[],e)},g.prototype._getLinksData=function(a){var b=this.opts,c=a||b.firstNodes,d=[];if(0==c.length)return d;for(var e=0,f=c.length;e<f;e++)for(var g=c[e],h=0,i=g.arr_link.length;h<i;h++){var j=g.arr_link[h],k=this._getArrValByKey(c,"arr_index",j);d.push({source:g.name,target:k.name,value:5})}return d},g.prototype._getChildrenData=function(a){for(var b=this.opts,c=b.kData.nodes,d=[],e=0,f=c.length;e<f;e++)a.children.indexOf(c[e].data_id)!=-1&&d.push(c[e]);
return{nodes:d,links:this._getLinksData(d)}},g.prototype._getRelationData=function(a){var b=this.opts,c=(b.kData.nodes,[]);return this._getRelationNode([a],0,c),c[0].symbolSize=60,{nodes:c,links:this._getLinksData(c)}},g.prototype._getRelationNode=function(a,b,c){var d=this.opts,e=d.kData.nodes,f=b,g=c||[],h=[];if(f<d.level){for(var i=0,j=a.length;i<j;i++){var k=e[a[i]];k.symbolSize=52-8*f,g.push(k),h=h.concat(k.arr_link)}for(var l=[],m=0,n=h.length;m<n;m++){var o=this._getArrValByKey(g,"arr_index",h[m]);null==o.new_index&&l.indexOf(h[m])==-1&&l.push(h[m])}f+=1,this._getRelationNode(l,f,g)}},g.prototype._showGraph=function(a){var b=this.opts,c=this._getArrValByKey(b.graphData,"id",a),d=b.$domObj.find('.read-echarts-list [data-id="'+a+'"]');try{b.graphId=a,d.addClass("read-active"),d.siblings().removeClass("read-active"),b.$domObj.find(".read-echarts-title").html("【"+c.name+"图谱】"),this._getFirstNodes(a),this._showEcharts({nodes:b.firstNodes,links:this._getLinksData()})}catch(a){console.warn("panelKnowledgePc.js -->echart错误！"+a)}},g.prototype.kPageFix=function(){for(var a=this.opts,c=a.knowledgeData,d=c.point_list[c.index-1].pid,e=c.point_list[c.index-1].chapter_id,f='span[type="knowledge"][data-pid="'+d+'"]',g=a.pages,h=c.pageCount||0,i=g.length;h<i;h++){if(b(g[h].html).find(f).length){c.pageCount=99999,c.page_index=null==c.page_index?h:c.page_index,2==a.pageColumn?a.page_index=(h+1)%a.pageColumn?h+1:h:a.page_index=h+1,c.page_index==a.page_index&&a.chapts[a.chapt_index].chapter_id==e&&a.$domObj.trigger("countpage:knowledgeAlready"),c.page_index=a.page_index,a.direction=a.kDirection||"next",a.turnMode=0;break}c.pageCount=h}a.state?a.alreadyState=0:a.alreadyState=1},g.prototype._renderLayout=function(){var a=this.opts,c=f.template(a.knowledgeHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},g.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap":"click";c.$domObj.find(".read-exit").on(d,function(){a.close()}),c.$domObj.find(".read-cover").on(d,function(){a.close()}),c.$domObj.find(".read-back").on(d,function(){c.$domObj.find(".read-knowledge-nav").fadeOut(0),c.$domObj.find(".read-knowledge-echarts").fadeIn()}),c.$domObj.find(".read-knowledge-nav .read-nav").on(d,"li",function(){a.close();var d=parseInt(b(this).attr("data-index"));c.knowledgeList.index=d+1,c.$domObj.trigger("knowledge:click",c.knowledgeList)}),c.$domObj.find(".read-echarts-list").on(d,"li",function(){var c=b(this).attr("data-id");a._showGraph(c)}),c.$domObj.find(".read-search .read-icon").on(d,function(){var b=c.$domObj.find(".read-search input").val().trim();""!=b&&a._searchKnowledge(b)}),c.$domObj.find(".read-search input").keydown(function(b){var d=c.$domObj.find(".read-search input").val().trim();13==b.keyCode&&""!=d&&a._searchKnowledge(d)})},g.prototype._searchKnowledge=function(a){function b(a){for(var b=-1,f=0,g=d.graphData.length;f<g;f++)for(var h=d.graphData[f].nodes,i=0,j=h.length;i<j;i++){var k=h[i];if(k.data_id==a){d.graphId=f,b=k.arr_index;break}}if(b==-1)d.dialogObj.setMsg(c.emptySearch),d.dialogObj.open();else{var l=e._getArrValByKey(d.graphData,"id",d.graphId),m=d.$domObj.find('.read-echarts-list [data-id="'+d.graphId+'"]');m.addClass("read-active"),m.siblings().removeClass("read-active"),d.$domObj.find(".read-echarts-title").html("【"+l.name+"图谱】"),e._getFirstNodes(d.graphId);var n=e._getRelationData(b);d.chartObj.clear(),d.chartOption.series[0].force={repulsion:180,gravity:.1,edgeLength:70},d.chartOption.series[0].nodes=n.nodes,d.chartOption.series[0].links=n.links,d.chartObj.setOption(d.chartOption)}}var d=this.opts,e=this;d.api.getSearchKnowledge({key:a},function(a){b(a.node_id)},function(a){d.dialogObj.setMsg(c.emptySearch),d.dialogObj.open()})},g.prototype._showEcharts=function(a){function b(a){var b=a.data;k.series[0].links,k.series[0].nodes;if(null==b.source&&null!=b.arr_index&&b.arr_link.length){var c=e._getRelationData(b.arr_index);j.clear(),k.series[0].force={repulsion:180,gravity:.1,edgeLength:70},k.series[0].nodes=c.nodes,k.series[0].links=c.links,j.setOption(k)}}function c(a){function b(){d.knowledgeList=c;var a=f.template(d.listHtml)(c);d.$domObj.find(".read-knowledge-nav .read-nav").html(a)}if(null==a.source){d.$domObj.find(".read-knowledge-nav").fadeIn(),d.$domObj.find(".read-knowledge-echarts").fadeOut(0);var c={id:a.data_id,name:a.name,point_list:[]},g=e._getArrValByKey(d.kNodes,"id",a.data_id);null!=g.new_index?(delete g.new_index,c=g,b()):d.api.getGlossaryList({node_id:a.data_id,node_name:a.name},function(a){c.point_list=a.point_list,d.kNodes.push(c),b()},function(a){console.warn("[reader.js]--获取知识失败!"),b()})}}var d=this.opts,e=this,g=a.nodes,h=a.links,i=d.$domObj.find(".read-echarts");i.html("");var j=echarts.init(i[0]);d.chartObj=j;var k={series:[{type:"graph",layout:"force",force:{repulsion:4*d.baseSize,gravity:.08,edgeLength:2*d.baseSize},symbolSize:50,name:"名词解释",roam:!0,itemStyle:{emphasis:{color:"red"}},label:{normal:{show:"true",textStyle:{color:"#000000"}}},gravity:1,scaling:1,draggable:!0,linkSymbol:"none",steps:2,nodes:g,links:h}]};d.chartOption=k,j.setOption(k);var l=0;j.on("mousedown",function(a){l+=1,setTimeout(function(){l=0},500)}),j.on("mouseup",function(a){setTimeout(function(){1==l?(b(a),l=0):2==l&&(c(a.data),l=0)},300)})},g.prototype.open=function(){for(var a=this,b=a.opts,c="",d="",f=0,g=b.graphData.length;f<g;f++){var h=b.graphData[f].name,i=b.graphData[f].id;h=h.length>5?h.substring(4)+"…":h,h+="图谱",b.graphId==i?(d=b.graphData[f].name,c+='<li class="read-active" data-id='+i+">"+h+"</li>"):c+="<li data-id="+i+">"+h+"</li>"}c="<ul>"+c+"</ul>",b.$domObj.find(".read-echarts-title").html("【"+d+"图谱】"),b.$domObj.find(".read-echarts-list").html(c),b.$domObj.fadeIn(),b.$domObj.find(".read-knowledge-nav").fadeOut(0),b.$domObj.find(".read-knowledge-echarts").fadeIn(0),setTimeout(function(){e(b.$domObj.find(".read-content")[0]).set("left","0").duration("0.5s").end()},10);try{this._showEcharts({nodes:b.firstNodes,links:a._getLinksData()})}catch(a){console.warn("panelKnowledgePc.js -->echart错误！"+a)}},g.prototype.backOpen=function(){var a=this,b=a.opts;b.$domObj.fadeIn(),b.$domObj.find(".read-knowledge-nav").fadeIn(),b.$domObj.find(".read-knowledge-echarts").fadeOut(0),setTimeout(function(){e(b.$domObj.find(".read-content")[0]).set("left","0").duration("0.5s").end()},10)},g.prototype.close=function(){var a=this,b=a.opts;e(b.$domObj.find(".read-content")[0]).set("left","-100%").duration("0.5s").end(),setTimeout(function(){b.$domObj.fadeOut()},200)},g}(b,a,n,c,f),ca=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var A=c.LOG,B=function(a){A.log("[reader.js] --> 构造函数! ");var d={domWrapId:"",hostUrl:"",book_id:"",passData:null,user_id:"",downloadPath:"download/books",isEncrypt:!1,isOnlyDownload:!1,isClient:!0,isMobile:!0,isDownloadImg:!0,pagingType:"page_1",isNightMode:!1,isVerticalMode:!1,useEpubFile:!1,usePublish:!0,useBookmark:!0,useNote:!0,useCorrect:!0,useComplaint:!0,useSearch:!0,useExit:!0,useFonts:!0,useEpubStyle:!0,useVideo:!0,useProbation:!1,useVerticalType:!1,useManuscriptPic:!1,useExportEpub:!1,useExportPdf:!1,useKEnhanced:!1,useKnowledge:!1,useTV:!1,bookOpenTime:"",note_share_conf:{flag:!1},historyData:{page_offset:105},license_id:"doc_110220330",server:"server_101010101010",custom_nav_menus:[],getDataCb:c.emptyFunc,getCatalogCb:c.emptyFunc,probotionCb:null,allChapterFalseCb:null,exitReaderCb:c.emptyFunc,downloadCb:c.emptyFunc,getDisableChaptCb:c.emptyFunc,_useLayout:!0,$readerWrap:null,$readerObj:null,_minW:300,_minH:500,_downloadState:{state:!0,rate:0},totalLen:0,chapt_index:0,page_index:0,pageColumn:1,chapts:null};this.opts=b.extend(!0,{},d,a),this.opts.useVerticalType&&(this.opts.usePublish=!1),this.opts.data={catalog:null,readableChapter:null,progressData:null,settingData:null,copyright:null},this.LoadingObj=new e({domSelector:this.opts.domWrapId,msg:r.loading,clientType:this.opts.clientType}),this.DialogObj=new q({$wrapDomObj:b(this.opts.domWrapId),isMobile:this.opts.isMobile}),this._init()};return B.prototype._init=function(){var a=this.opts;this._check(),a.bookOpenTime=c.getTimestamp(),this.ApiObj=new d({baseData:{hostUrl:a.hostUrl,book_id:a.book_id,user_id:a.user_id,use_file_url:a.useEpubFile},passData:a.passData}),a.isClient?(this.getCatalog=this._getCatalogOffline,this.getBookmark=this._getBookmarkOffline,this.getNote=this._getNoteOffline,this.getChapterContent=this._getChapterOffline):(this.getCatalog=this._getCatalogOnline,this.getBookmark=this._getBookmarkOnline,this.getNote=this._getNoteOnline,this.getChapterContent=this._getChapterOnline),this._refresh(),this._renderLayout()},B.prototype._check=function(){var a=this.opts;a.$readerWrap=b(a.domWrapId),a.isOnlyDownload||""==a.domWrapId||0==a.length||a.$readerWrap.width()<a._minW||a.$readerWrap.height()<a._minH?a._useLayout=!1:(a._useLayout=!0,a.$readerObj=b("<div class='read-reader-pc' />"),a.$readerWrap.append(a.$readerObj),this.LoadingObj.open()),a.useTV&&(a.$readerObj.addClass("read-reader-tv"),this._backbutton())},B.prototype._backbutton=function(){function a(){document.addEventListener("backbutton",c,!1)}function c(){return"block"==e.$readerObj.find(".read-cbn-panel").css("display")?void d.cbnpage.close():"block"==e.$readerObj.find(".read-fonttype-panel").css("display")?void d.fontTypepage.close():"block"==e.$readerObj.find(".read-setting-panel").css("display")?void d.settingpage.close():void d.exit()}var d=this,e=this.opts;b(function(){document.addEventListener("deviceready",a,!1)})},B.prototype._refresh=function(){var a=this.opts;a.isEncrypt?(this.saveFile=c._saveFileEncrypt,this.readFile=this._readFileDec):(this.saveFile=c._saveFileCommon,this.readFile=c._readFileCommon),a.isClient||(this.saveFile=c.emptyFunc,""==a.user_id&&(a.useNote=!1,a.useBookmark=!1))},B.prototype._readFileDec=function(a,d){var e=this.opts,f={license_id:e.license_id,server:e.server},g={license_id:p.license_id,server:p.server},h=b.extend(!0,{},g,f);c._readFileDecrypt(h,a,d)},B.prototype._renderLayout=function(){var a=this.opts;this.mainpage=null,this.cbnpage=null,this.settingpage=null,this.countPageObj=null,this.complainpage=null,this.fontTypepage=null,this.manuscriptPicpage=null,this.searchpage=null,this.promptPage=null,this.viewImgPage=null,this._renderCatalog(),a._useLayout&&(this._renderBookmark(),this._renderNote(),this._renderSetting(),this._renderMainpage(),this._renderCopyright(),this._renderComplaint(),a.useKnowledge&&this._renderKnowledge(),this._renderFontType(),this._renderManuscriptPic(),this._renderCorrect(),this._renderSearch(),this._renderCountpage(),this._renderViewImgPage(),this._renderVideoPage(),this._renderSelect())},B.prototype._renderMainpage=function(){var a=this.opts,b=this,d=f.getTempl("main");this.mainpage=new g({$readerObj:a.$readerObj,templHtml:d,isMobile:a.isMobile,useKEnhanced:a.useKEnhanced,useKnowledge:a.useKnowledge,useTV:a.useTV}),this.mainpage.on("mainpanel:left",function(){b.prev(),b.selectObj.close()}),this.mainpage.on("mainpanel:middle",function(){b.settingpage.open(),b.selectObj.close()}),this.mainpage.on("mainpanel:right",function(){b.next(),b.selectObj.close()}),this.mainpage.on("knowledge:open",function(){b.knowledgepage.backOpen()}),this.mainpage.on("knowledge:showKMenu",function(a,c){var d=b.countPageObj.searchChaptIndex(c);b.countPageObj.turnChapter(d)}),this.mainpage.on("knowledge:closeKnowledge",function(a,c){b.countPageObj.interfaceFun=null}),this.mainpage.on("mainpanel:showBookmark",function(a,c){b.cbnpage.showBookmark(c)}),this.mainpage.on("mainpanel:img",function(c,d){b.viewImgPage.setOptions({imgSet:a.chapts[a.chapt_index].images,currentIdx:parseInt(d.currentIdx)}),b.viewImgPage.open()}),this.mainpage.on("mainpanel:video",function(c,d){a.useVideo&&b.videoPage.open(d)}),this.mainpage.on("mainpanel:showNote",function(){var d=a.chapts[a.chapt_index].chapter_id,e=a.chapts[a.chapt_index].chapter_name;c.hasFunction(b.cbnpage.noteObj,"showNote")&&b.cbnpage.noteObj.showNote(d,e)}),"undefined"!=typeof gli_keydown_event&&"function"==typeof gli_keydown_event&&(gli_keydown_event(1,function(){b.prev()},!0),gli_keydown_event(2,function(){b.next()},!0),gli_keydown_event(0,function(){b.exit()},!0));var e=function(a){a.addEventListener("touchstart",function(){var b=a.scrollTop,c=a.scrollHeight,d=b+a.offsetHeight;0===b?a.scrollTop=1:d===c&&(a.scrollTop=b-1)}),a.addEventListener("touchmove",function(b){a.offsetHeight<a.scrollHeight?b._isScroller=!0:b._isScroller=!1})};e(a.$readerObj.find(".read-selector-main")[0]),document.body.addEventListener("touchmove",function(a){a._isScroller===!1&&a.preventDefault()})},B.prototype._renderCopyright=function(){var a=this.opts,b=this;this.copyrightObj=new n({$readerObj:a.$readerObj,isMobile:a.isMobile,coprData:p.copyright,api:b.ApiObj}),this.copyrightObj.on("Copyright:saveCoprParam",function(a,c){b.opts.data.copyright=c,b._saveCopyright()}),this.copyrightObj.on("Copyright:getCoprParam",function(){b._getCoprDataOffline(function(a){b.opts.data.copyright=a.coprData,b.copyrightObj.opts.copyright=a.coprData,b.copyrightObj.run()},function(){b.copyrightObj.run()})}),this.copyrightObj.on("Copyright:exitReaderCb",function(){b.exit()})},B.prototype._renderSelect=function(){function a(a){var d=b.chapts[b.chapt_index];return a.chapter_id=d.chapter_id,a.chapter_name=d.chapter_name,a.note_page=a.posLen/b.totalLen+parseFloat(c.countPageObj.getHeadPerc()),a.note_page=a.note_page.toFixed(4),delete a.posLen,delete a.currPage,a}var b=this.opts,c=this;this.selectObj=new s({$readerObj:b.$readerObj,isMobile:b.isMobile,coprObj:c.copyrightObj,useNote:b.useNote,useCorrect:b.useCorrect,pageColumn:b.pageColumn,useVerticalType:b.useVerticalType}),this.selectObj.on("Select:addUnderline",function(b,d){var e=a(d);c.cbnpage.noteObj.addUnderline(e)}),this.selectObj.on("Select:delUnderline",function(a,d){c.cbnpage.noteObj.delNote({chapterid:b.chapts[b.chapt_index].chapter_id,noteid:d})}),this.selectObj.on("Select:addNote",function(b,d){var e=a(d);c.cbnpage.noteObj.editNote(e)}),this.selectObj.on("Select:correct",function(b,d){var e=a(d);c.correctpage.open(e)})},B.prototype._renderComplaint=function(){var a=this.opts,b=this,c=f.getTempl("complain");b.complainpage=new j({$readerObj:a.$readerObj,complainHtml:c,isMobile:a.isMobile,api:b.ApiObj,loading:b.LoadingObj})},B.prototype._renderKnowledge=function(){var a=this.opts,b=this,c=f.getTempl("knowledge");b.knowledgepage=new z({$readerObj:a.$readerObj,knowledgeHtml:c,isMobile:a.isMobile,api:b.ApiObj,loading:b.LoadingObj,dialogObj:b.DialogObj}),b.knowledgepage.opts.$domObj.on("knowledge:click",function(a,c){var d=c.point_list[c.index-1].chapter_id,e=b.countPageObj.searchChaptIndex(d);c.pageCount=0,b.mainpage.showKnowledge(c),b.countPageObj.opts.knowledgeData=c,b.countPageObj.interfaceFun=b.knowledgepage.kPageFix,b.countPageObj.turnChapter(e)})},B.prototype._renderFontType=function(){var a=this.opts,b=this,c=f.getTempl("fontType");b.fontTypepage=new w({$readerObj:a.$readerObj,fontTypeHtml:c,isMobile:a.isMobile,loading:b.LoadingObj,useTV:a.useTV}),b.fontTypepage.on("fontSize:click",function(c,d){b.LoadingObj.setMsg(r.changeFont),b.LoadingObj.open();var e=a.data.settingData.fontSize.value,f={oldValue:e,newValue:d};b._setFontSize(f),a.data.settingData.fontSize.value=d,b._saveSettingFile()}),b.fontTypepage.on("fontFamily:click",function(c,d){b.LoadingObj.setMsg(r.changeFont),b.LoadingObj.open();var e=a.data.settingData.fontFamily.value,f={oldValue:e,newValue:d};b._setFontFamily(f),a.data.settingData.fontFamily.value=d,b._saveSettingFile()})},B.prototype._renderManuscriptPic=function(){var a=this.opts,b=this,c=f.getTempl("manuscriptPic");b.manuscriptPicpage=new y({$readerObj:a.$readerObj,manuscriptPicTempl:c,isMobile:a.isMobile,loading:b.LoadingObj}),b.manuscriptPicpage.on("manuscriptPic:click",function(a,c){console.log("阅读模式切换为  "+c),b._deletePages(),b.countPageObj.setReaderMode(c),b.LoadingObj.close()})},B.prototype._renderCorrect=function(){var a=this.opts,b=this,c=f.getTempl("correct");b.correctpage=new t({$readerObj:a.$readerObj,correctHtml:c,isMobile:a.isMobile,api:b.ApiObj})},B.prototype._renderSearch=function(){var a=this.opts,b=this,c=f.getTempl("search");b.searchpage=new k({$readerObj:a.$readerObj,searchHtml:c,isMobile:a.isMobile,isClient:a.isClient,api:b.ApiObj,loading:b.LoadingObj}),b.searchpage.on("search:click",function(a,c){console.log("[reader.js] -> search:click 触发事件, 点击搜索结果跳转! "),b.countPageObj.turnPageByPerc(c)})},B.prototype._renderCatalog=function(){var a=this.opts,c=this;this.getCatalog(function(d){a.data.catalog=d,A.info("成功读取 目录数据 !","background:yellow;"),a.totalLen=parseInt(d.word_count),a.chapts=b.extend(!0,[],d.chapter);var e=b.extend(!0,[],d);if(a._useLayout){A.info("执行 【渲染布局】!");for(var g=0,h=0,j=e.chapter,k=0,l=j.length;k<l;k++)h+=j[k].textlen,j[k].textlen=h,0==j[k].chapter_status&&g++;g==j.length&&(c.LoadingObj.close(),null!=a.allChapterFalseCb?a.allChapterFalseCb():(c.DialogObj.setMsg(r.noReadContent),c.DialogObj.open())),c._checkPaging();var m=f.getTempl("cbn"),n=f.getTempl("cbnNavMenu"),o=f.getTempl("cbnNavBody"),p=f.getTempl("catalog"),q=f.getTempl("bookmark"),s=f.getTempl("note"),t=f.getTempl("noteEdit"),u=f.getTempl("noteDetail"),v=f.getTempl("noteShare"),w=c._getCachePath({fileName:"bookmark"}),x=c._getCachePath({fileName:"note"});c.cbnpage=new i({wrapDomId:a.domWrapId,$readerObj:a.$readerObj,templHtml:m,templHeadHtml:n,templBodyHtml:o,templCatalogHtml:p,templBookmarkHtml:q,templNoteHtml:s,isMobile:a.isMobile,isClient:a.isClient,saveFile:c.saveFile,bookmarkFilePath:w,noteFilePath:x,data:a.custom_nav_menus,api:c.ApiObj,useBookmark:a.useBookmark,useNote:a.useNote,useTV:a.useTV,editHtml:t,detailHtml:u,shareHtml:v,note_share_conf:a.note_share_conf}),c.cbnpage.renderCatalog(e),c.cbnpage.on("cbnbookmark:click",function(a,b){c.cbnpage.close(),c.countPageObj.turnPageByPerc(b)}),c.cbnpage.on("cbnnote:click",function(a,b){c.cbnpage.close(),c.countPageObj.turnPageByPerc(b)}),c.cbnpage.on("cbncatalog:click",function(b,d){var e=a.chapt_index,f=c.countPageObj.searchChaptIndex(d.id);return a.chapts[f].chapter_status?(e!==f&&c.countPageObj.turnChapter(f),void c.cbnpage.close()):(console.log("[reader.js] -->章节"+d.id+"无权限！"),a.getDisableChaptCb(),!1)})}},function(){A.info("[reader.js] --> _renderCatalog --> 渲染目录，获取目录信息失败!"),a.isClient?(A.info("[APP阅读] 本地无目录信息, 执行下载 !","background:pink;"),c.download(),c.LoadingObj.setMsg(r.downloadBooks)):(c.LoadingObj.close(),c.DialogObj.setMsg(r.checkNetwork),c.DialogObj.open())})},B.prototype._renderSetting=function(){function a(){}function b(){console.info("%c innerSuccessCb","background:yellow;");var a=f.getTempl("setting");g.settingpage=new h({wrapDomId:e.domWrapId,$readerObj:e.$readerObj,templHtml:a,commonDialog:g.DialogObj,clientType:e.clientType,isMobile:e.isMobile,progressData:i.progressData.progress,settingData:i.settingData,useBookmark:e.useBookmark,useKEnhanced:e.useKEnhanced,useKnowledge:e.useKnowledge,useComplaint:e.useComplaint,useSearch:e.useSearch,useExit:e.useExit,useFonts:e.useFonts,useVerticalType:e.useVerticalType,useManuscriptPic:e.useManuscriptPic,useExportEpub:e.useExportEpub,useExportPdf:e.useExportPdf,useTV:e.useTV}),g.settingpage.on("cbn:click",function(){console.log("[reader.js] -> 触发事件, 打开目录面板! "),g.cbnpage.open()}),g.settingpage.on("bookmark:click",function(a,b){console.log("[reader.js] --> bookmark:click 添加书签!! ");var c=e.chapts[e.chapt_index],d=1==e.pageColumn?c.pages[e.page_index-1].txt:c.pages[e.page_index-2].txt,f={bookmarkDom:b,pageSite:g.countPageObj.getFootPerc(),text:d,chapterId:c.chapter_id,chapterName:c.chapter_name};g.cbnpage.updateBookmarks(f)}),g.settingpage.on("progress:setVal",function(){console.log("[reader.js] -> 触发事件, 弹出进度条! ");var a=g.countPageObj.getFootPerc()||0;g.settingpage.$progressObj.setValue(a)}),g.settingpage.on("progress:click",function(a,b){console.log("[reader.js] -> 触发事件, 拖动定位! "),g.countPageObj.turnPageByPerc(b)}),g.settingpage.on("progress:prev",function(){var a=e.chapt_index-1;return a<0?(a=0,!1):e.chapts[a].chapter_status?(g.countPageObj.turnChapter(a),void console.log("[reader.js] -> 触发事件, 章节向前翻! ")):(console.log("[reader.js] -->章节:"+e.chapts[a].chapter_name+"无权限！"),e.getDisableChaptCb(),!1)}),g.settingpage.on("progress:next",function(){var a=e.chapt_index+1;return a===e.chapts.length?(a-=1,!1):e.chapts[a].chapter_status?(g.countPageObj.turnChapter(a),void console.log("[reader.js] -> 触发事件, 章节向后翻! ")):(console.log("[reader.js] -->章节:"+e.chapts[a].chapter_name+"无权限！"),e.getDisableChaptCb(),!1)}),g.settingpage.on("font:click",function(){console.log("[reader.js] -> 触发事件, 设置-字体, 亮度 等! ")});var b=i.settingData.fontSize;c({oldValue:b.value,newValue:b.value}),g.settingpage.on("size:click",function(a,b){console.log("[reader.js] -> 字体大小! "),c(b)}),g.settingpage.on("knowledge:click",function(){console.log("[reader.js] -> 触发事件, 打开知识型面板! "),g.knowledgepage.open()}),g.settingpage.on("complaint:click",function(){console.log("[reader.js] -> 触发事件, 打开版权投诉面板! "),g.complainpage.open()}),g.settingpage.on("fontType:click",function(){console.log("[reader.js] -> 触发事件, 字体设置面板! "),g.fontTypepage.open()}),g.settingpage.on("manuscriptPic:click",function(){console.log("[reader.js] -> 触发事件, 图文对照面板! "),g.manuscriptPicpage.open()}),g.settingpage.on("showSearch:click",function(a,b){console.log("[reader.js] -> 触发事件, 打开搜索面板! "),g.searchpage.sendSearch(b),e.$readerObj.attr("data-searchKword",b)}),g.settingpage.on("pageway:click",function(a,b){console.log("[reader.js] -> 触发事件, 翻页方式 "+b.newValue),e.pagingType=b.newValue,e.$readerObj.attr("data-pageway",e.pagingType)}),g.settingpage.on("hvtype:click",function(a){g.LoadingObj.setMsg(r.chaangeVertical),g.LoadingObj.open(),e.$readerObj.find(".read-page-1,.read-page-2").toggleClass("vertical-rl");var b=e.data.settingData.fontSize.value,c={oldValue:b,newValue:b};e.$readerObj.find(".read-page-1").hasClass("vertical-rl")?(e.isVerticalMode=!0,g.selectObj.opts.isVerticalMode=!0):(e.isVerticalMode=!1,g.selectObj.opts.isVerticalMode=!1),g._setFontSize(c)});var j=i.settingData.fontFamily;d({oldValue:j.value,newValue:j.value}),g.settingpage.on("family:click",function(a,b){A.info("[reader.js] -> 字体类型! "),d(b)}),g.settingpage.on("close:click",function(){console.log("[reader.js] -> 捕获事件, 关闭面板! "),g._saveSettingFile()}),g.settingpage.on("out:click",function(){console.log("[reader.js] -> 捕获事件, 退出阅读器! "),g.exit()})}function c(a){g._deletePages(),g.mainpage.setFontSize(a),g.countPageObj.setFontSize(a)}function d(a){g._deletePages(),g.mainpage.setFontFamily(a),g.countPageObj.setFontFamily(a)}console.info("%c _renderSetting","background:yellow;");var e=this.opts,g=this,i=e.data;g._getProgressDataOffline(function(c){g._getProgressDataOnline(function(d){parseInt(d.bookCloseTime)>parseInt(c.progressData.updateTime)?i.progressData={updateTime:d.bookCloseTime,progress:d.progress}:i.progressData=c.progressData,g._getSettingDataOffline(function(a){i.settingData=a.settingData,b()},function(){a()})},function(){i.progressData=c.progressData,g._getSettingDataOffline(function(a){i.settingData=a.settingData,b()},function(){a()})})},function(){a()})},B.prototype._checkPaging=function(){var a=this,b=this.opts;setTimeout(function(){if(null==b.data.progressData)a._checkPaging();else{if(b.isClient){var c=gli_get_cache_path()+a._getCachePath({fileName:""})||"";c=c.substr(0,c.lastIndexOf("."))}else var c="";a.countPageObj.begin({totalLen:b.totalLen,chapts:b.chapts,chapt_index:b.chapt_index,progressData:b.data.progressData,path:c})}},800)},B.prototype._renderCountpage=function(){var a=this,b=this.opts,c=f.getTempl("countpage");this.countPageObj=new l({templHtml:c,$readerObj:b.$readerObj,isMobile:b.isMobile,useEpubStyle:b.useEpubStyle,useProbation:b.useProbation,isClient:b.isClient,pageColumn:b.pageColumn,useManuscriptPic:b.useManuscriptPic}),this.delicateObj=new u({wrapDomObj:b.$readerObj.find(".read-delicate")[0]});this.countPageObj.on("countpage:getChapterContent",function(b,c){a._pagingChapter(c)}),this.countPageObj.on("countpage:showPage",function(c,d){b.usePublish&&(d.chapterContent=a.delicateObj.excute({html:d.chapterContent}),2==b.pageColumn&&(d.secondPage=a.delicateObj.excute({html:d.secondPage}))),a._showPage(d)}),this.countPageObj.on("countpage:finish",function(c,d){var e=b.chapts[d],f=a.countPageObj.getPagingData();e.pages=f.pages,e.images=f.images,e.html=f.html,e.isPretreat=f.isPretreat,b.getDataCb()}),this.countPageObj.on("countpage:already",function(){a.LoadingObj.close()}),this.countPageObj.on("countpage:knowledgeAlready",function(){a.mainpage.showKnowledge()}),this.countPageObj.on("countpage:downloadPhoto",function(b,c){a._downloadPhoto(c)}),this.countPageObj.on("countpage:noright",function(c,d){null!=b.probotionCb?b.probotionCb():(a.DialogObj.setMsg(r.testReadOver),a.DialogObj.open())})},B.prototype._renderViewImgPage=function(){var a=this.opts;this.viewImgPage=new o({$wrapObj:a.$readerObj,dataTempl:f.getTempl("viewImg"),isClient:a.isClient,isMobile:a.isMobile,clientType:a.clientType,isDownloadImg:a.isDownloadImg})},B.prototype._renderVideoPage=function(){var a=this.opts;a.useVideo&&(this.videoPage=new v({$readerObj:a.$readerObj,videoTemplHtml:f.getTempl("video"),isClient:a.isClient,isMobile:a.isMobile,clientType:a.clientType}))},B.prototype._getCatalogOffline=function(a,b){var d=(this.opts,this._getCachePath({fileName:"catalog"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},B.prototype._getCatalogOnline=function(a,b){this.ApiObj.getBookCatalog({},function(b){a(b)},function(a){b(a)})},B.prototype._getBookmarkOffline=function(a,b){A.log("[reader.js] -> _getBookmarkOffline! ");var d=(this.opts,this._getCachePath({fileName:"bookmark"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},B.prototype._getBookmarkOnline=function(a,b){A.log("[reader.js] -> _getBookmarkOnline! "),this.ApiObj.getBookmark({},function(b){a(b)},function(a){console.warn("[reader.js]--获取书签信息失败!"),b(a)})},B.prototype._renderBookmark=function(){var a=this.opts,b=this;if(a.useBookmark)return b.cbnpage?void this.getBookmark(function(d){function e(){b._getBookmarkOnline(function(a){var c=b._getCachePath({fileName:"bookmark"}),d=JSON.stringify(a);b.saveFile(c,d),b.cbnpage.renderBookmark(a)},function(){b.cbnpage.renderBookmark(d)})}if(A.info("成功读取 书签数据 !","background:yellow;"),a.isClient){var f=c.filterLocalData(d.bookmark_list);0==f.length?e():b.ApiObj.batchUpdateBookmark({time_stamp:d.time_stamp,mark_list:f},function(a){e()},function(a){b.cbnpage.renderBookmark(d)})}else b.cbnpage.renderBookmark(d)},function(){A.warn("[reader.js] --> _renderBookmark --> 渲染书签，获取书签信息失败!"),a.isClient?(A.info("[APP阅读] 本地无书签信息, 执行下载 !","background:pink;"),b.downloadBookmark()):b.cbnpage.renderBookmark()}):void setTimeout(function(){b._renderBookmark()},1e3)},B.prototype.downloadBookmark=function(){var a=this,b=this.opts;A.log("[PC.js] -> downloadBookmark "+b.book_id);var c=a._getCachePath({fileName:"bookmark"});this._getBookmarkOnline(function(b){A.log("成功下載 书签 并 保存!");var d=JSON.stringify(b);a.saveFile(c,d),setTimeout(function(){a._renderBookmark()},300)},function(a){A.warn("[PC.js] -> downloadBookmark "+a)})},B.prototype._getNoteOffline=function(a,b){A.log("[reader.js] -> _getNoteOffline! ");var d=(this.opts,this._getCachePath({fileName:"note"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},B.prototype._getNoteOnline=function(a,b){A.log("[reader.js] -> _getNoteOnline! "),this.ApiObj.getBookNote({},function(b){a(b)},function(a){A.warn("[reader.js]--获取笔记信息失败!"),b(a)})},B.prototype._getSettingDataOffline=function(a,b){var d=this,e=d.opts,f={};if(!e.isClient)return f.settingData=p.settingData,void a(f);var g=this._getCachePath({fileName:"settingPanel",bid:"b_all",uid:"u_all"});this.readFile(g,function(b){null==b?(f.settingData=p.settingData,d.saveFile(g,JSON.stringify(f)),a(f)):(b=c.doDecodeData(b),a(JSON.parse(b)))})},B.prototype._getProgressDataOffline=function(a,b){var d=this,e=d.opts,f={};if(!e.isClient)return f.progressData=p.progressData,f.progressData.updateTime="0",void a(f);var g=this._getCachePath({fileName:"progress"});this.readFile(g,function(b){null==b?(f.progressData=p.progressData,f.progressData.updateTime="0",d.saveFile(g,JSON.stringify(f)),a(f)):(b=c.doDecodeData(b),a(JSON.parse(b)))})},B.prototype._getProgressDataOnline=function(a,b){A.log("[readerMobile.js] -> _getProgressDataOnline! "),this.ApiObj.getProgressData({},function(b){a(b)},function(a){A.warn("[reader.js]--在线获取 阅读进度 失败!"),b(a)})},B.prototype._renderNote=function(){var a=this.opts,b=this;if(a.useNote)return b.cbnpage?void this.getNote(function(d){function e(){b._getNoteOnline(function(a){var c=b._getCachePath({fileName:"note"}),d=JSON.stringify(a);b.saveFile(c,d),b.cbnpage.renderNote(a)},function(){b.cbnpage.renderNote(d)})}if(A.info("成功读取 笔记数据 !","background:yellow;"),a.isClient){var f=c.filterLocalData(d.note_list);0==f.length?e():b.cbnpage.noteObj.batchUpdateNote({time_stamp:d.time_stamp,note_list:f},function(a){e()},function(a){b.cbnpage.renderNote(d)})}else b.cbnpage.renderNote(d)},function(){A.warn("[reader.js] --> _renderNote --> 渲染笔记，获取笔记信息失败!"),a.isClient?(A.info("[APP阅读] 本地无笔记信息, 执行下载 !","background:pink;"),b.downloadNote()):b.cbnpage.renderNote()}):void setTimeout(function(){b._renderNote()},100)},B.prototype._setFontSize=function(a){var b=this,c=b.opts,d={oldValue:"",newValue:""};d.oldValue="read-size-"+a.oldValue,d.newValue="read-size-"+a.newValue,c.$readerObj.find(".read-main-panel .read-chapter-content .read-content").removeClass(d.oldValue).addClass(d.newValue),c.$readerObj.find(".read-main-panel .read-chapter-content .read-delicate-container").removeClass(d.oldValue).addClass(d.newValue),b._deletePages(),b.countPageObj.setFontSize(a)},B.prototype._setFontFamily=function(a){var b=this,c=b.opts,d={oldValue:"",newValue:""};d.oldValue="read-font-family-"+a.oldValue,d.newValue="read-font-family-"+a.newValue,c.$readerObj.find(".read-main-panel .read-chapter-content .read-content").removeClass(d.oldValue).addClass(d.newValue),c.$readerObj.find(".read-main-panel .read-chapter-content .read-delicate-container").removeClass(d.oldValue).addClass(d.newValue),b._deletePages(),b.countPageObj.setFontFamily(a)},B.prototype.downloadNote=function(){var a=this,b=this.opts;A.log("[PC.js] -> download "+b.book_id);var c=this._getCachePath({fileName:"note"});this._getNoteOnline(function(b){A.log("成功下載 笔记 并 保存!");var d=JSON.stringify(b);a.saveFile(c,d),setTimeout(function(){a.cbnpage.renderNote(b)},300)},function(b){A.warn("[PC.js] -> downloadNote "+b),a.cbnpage.renderNote()})},B.prototype._getChapterOffline=function(a,b,d){A.log("[reader.js] -> _getChapterOffline! ");var e=this._getCachePath({fileName:a.chapter_name});this.readFile(e,function(a){null==a?d():(a=c.doDecodeData(a),b(a))})},B.prototype._getChapterOnline=function(a,b,c){var d=this.opts;d.useKnowledge&&(a.type="knowledge"),this.ApiObj.getChapter(a,function(a){b(a)},function(a){c(a)})},B.prototype._updateDownloadState=function(a){for(var b=this.opts,c=b.data.catalog?b.data.catalog.chapter:[],d=0,e=c.length;d<e;d++)if(c[d].chapter_id==a.chapter_id){c[d].isDownload=a.isDownload;break}},B.prototype._saveCatalog=function(){var a=this.opts,b=this._getCachePath({fileName:"catalog"}),c=JSON.stringify(a.data.catalog);this.saveFile(b,c)},B.prototype._saveChapter=function(a,b){var c=this.opts,d=this._getCachePath({fileName:a});if(c.isOnlyDownload){var e=d.substr(0,d.lastIndexOf("/")+1);this._batchdownloadPhoto(e,b)}this.saveFile(d,b)},B.prototype._saveSettingFile=function(a){var b=this.opts,c=this._getCachePath({fileName:"settingPanel",bid:"b_all",uid:"u_all"});if(this.settingpage){var d=b.data.settingData;a&&(d.readTimes=parseInt(d.readTimes)+1),this.saveFile(c,JSON.stringify({settingData:d}))}},B.prototype._saveProgressFile=function(){var a=this.opts,b=a.data.progressData,d=this._getCachePath({fileName:"progress"});b.updateTime=c.getTimestamp(),b.progress=this.countPageObj.getFootPerc(),this.saveFile(d,JSON.stringify({progressData:b
}))},B.prototype._saveBookState=function(){var a=this.opts,b=this,d=a.chapts[a.chapt_index].chapter_id,e=[],f=this._getCachePath({fileName:"bookState"});this.readFile(f,function(g){null!=g&&(g=c.doDecodeData(g),g=JSON.parse(g),e=g),e.push({bookOpenTime:a.bookOpenTime,bookCloseTime:c.getTimestamp(),progress:b.countPageObj.getFootPerc(),chapter_id:d}),b.ApiObj.setBookState({bookStateData:e},function(){b.saveFile(f,JSON.stringify([]))},function(){b.saveFile(f,JSON.stringify(e))})})},B.prototype._getCoprDataOffline=function(a,b){var d=this,e=this.opts,f=this._getCachePath({fileName:"copyright"});return e.isClient?void this.readFile(f,function(e){if(null==e){var g={};g.coprData=p.copyright,d.opts.data.copyright=p.copyright,d.saveFile(f,JSON.stringify(g)),b()}else e=c.doDecodeData(e),a(JSON.parse(e))}):(e.data.copyright=p.copyright,b(),!1)},B.prototype._saveCopyright=function(){var a=this.opts,b=this._getCachePath({fileName:"copyright"}),c=JSON.stringify({coprData:a.data.copyright});this.saveFile(b,c)},B.prototype._downloadSingleChapter=function(a,b,c){var d=this,e=d.opts;a&&a.chapter_status&&this._getChapterOnline({chapter_id:a.chapter_id},function(c){A.info("[reader.js] -> 下载单个章节:"+a.chapter_name),a.isDownload=!0,d._saveChapter(a.chapter_name,c),d._updateDownloadState(a),d._saveCatalog(),b(),e.downloadCb()},function(a){A.warn("[reader.js] -> 获取单个 [章节内容] 失败!"+a),c()})},B.prototype._downloadChapter=function(){for(var a=this.opts,b=a.data.readableChapter||[],d=-1,e=this,f=0,g=b.length;f<g;f++)if(!b[f].isDownload){d=f;break}-1!==d&&e._downloadSingleChapter(b[d],function(f){a.isOnlyDownload&&e._downloadChapter(),30==a._downloadState.rate&&e._renderCatalog(),a._downloadState={state:!0,rate:c.getProgressRate(b.length,d+1,30)}},function(b){a._downloadState.rate<=30&&(console.error("[reader.js] --> _downloadChapter; 只有目录下载成功， 无章节内容."),e.LoadingObj.close(),e.DialogObj.setMsg(r.chapterFalse),e.DialogObj.open())})},B.prototype.download=function(){var a=this.opts,b=this;A.info("[reader.js] --> download!  userId:"+a.user_id+" , book_id:"+a.book_id),this._getCatalogOnline(function(c){a.data.catalog=c;var d=c.chapter,e=[];a._downloadState.rate=30;for(var f=0,g=d.length;f<g;f++)if(d[f].isDownload=!1,d[f].chapter_status){var h={};h.chapter_id=d[f].chapter_id,h.chapter_name=d[f].chapter_name,h.isDownload=d[f].isDownload,h.chapter_status=d[f].chapter_status,e.push(h)}return 0==e.length?(b.LoadingObj.close(),void(null!=a.allChapterFalseCb?a.allChapterFalseCb():(b.DialogObj.setMsg(r.noReadContent),b.DialogObj.open()))):(a.data.readableChapter=e,a.getCatalogCb(),void(a.useEpubFile||(b._saveCatalog(),b._downloadChapter())))},function(a){A.warn("[reader.js] -> download "+a),b.LoadingObj.close(),b.DialogObj.setMsg(r.checkNetwork),b.DialogObj.open()})},B.prototype.getDownloadInfo=function(){var a=this.opts,b=a._downloadState;return b},B.prototype.getCatalogInfo=function(){var a=this.opts,b=a.data.catalog||[];return b},B.prototype.getPagesAll=function(){var a=this.opts,b=a.chapts||[];return b},B.prototype._downloadPhoto=function(a){var b=(this.opts,a.new_src.replace(gli_get_cache_path(),""));c._downloadImageFile(a.old_src,b)},B.prototype._batchdownloadPhoto=function(a,c){var d=gli_get_cache_path()+a+"images/",e=this;b(c).find("img").each(function(){var a=b(this).attr("src"),c=a.substring(a.lastIndexOf("/")+1,a.length),f=d+c;e._downloadPhoto({old_src:a,new_src:f})})},B.prototype._pagingChapter=function(a){var b=this,d=b.opts,e=d.chapts[a];return e.chapter_status?void(d.chapts[a].pages&&d.chapts[a].pages.length?(b.countPageObj.setChapterData({index:a,getHtml:d.chapts[a].html,pages:d.chapts[a].pages,isPretreat:d.chapts[a].isPretreat}),b.countPageObj.readyData()):(b.LoadingObj.setMsg(r.loading),b.LoadingObj.open(),d.chapts[a].isPretreat?(b.countPageObj.setChapterData({index:a,getHtml:d.chapts[a].html,pages:[],isPretreat:d.chapts[a].isPretreat}),b.countPageObj.excutePaging()):b.getChapterContent({chapter_id:e.chapter_id,chapter_name:e.chapter_name},function(c){d.chapts[a].html=c,b.countPageObj.setChapterData({index:a,getHtml:c,pages:[],isPretreat:d.chapts[a].isPretreat}),b.countPageObj.excutePaging()},function(f){A.warn("[reader.js]--> pagingChapter:"+f),b._downloadSingleChapter(e,function(){for(var e=0,f=d.chapts,g=0;g<f.length;g++)f[g].chapter_status&&e++;b._pagingChapter(a),d._downloadState={state:!0,rate:c.getProgressRate(e,a+1,d._downloadState.rate)}},function(){b.LoadingObj.close(),b.DialogObj.setMsg(r.chapterFalse),b.DialogObj.open(),b.countPageObj.opts.chapt_index=d.chapt_index,b.countPageObj.opts.page_index=d.page_index})}))):(console.log("[reader.js] --> 该章节您没有权限！"),null!=d.probotionCb&&d.probotionCb(),!1)},B.prototype._deletePages=function(){var a=this.opts,b=a.chapts;if(!b)return!1;for(var c=0,d=b.length;c<d;c++)b[c].pages&&(b[c].pages=[])},B.prototype.next=function(){this.countPageObj.turnPage("next")},B.prototype.prev=function(){this.countPageObj.turnPage("prev")},B.prototype._showPage=function(a){A.info("[reader.js]--> showPage");var b=this.opts;if(!a.turnMode&&b.chapt_index===a.chapt_index&&b.page_index===a.page_index)return this.mainpage.highLight(),!1;b.chapt_index=a.chapt_index,b.page_index=a.page_index,a.currPage=a.pagePerc,this.mainpage.showPagedata(a,b.pagingType);var c=b.chapts[b.chapt_index].chapter_name,d=b.chapts.length,e=this.countPageObj.getFootPerc();this.settingpage.setProgressVal({name:c,currIndex:b.chapt_index+1,total:d,val:e,turnMode:a.turnMode})},B.prototype._getCachePath=function(a){var b=this.opts,d=b.downloadPath,e=a.bid||b.book_id,f=a.uid||b.user_id,g=a.fileName||"",h=c.createBookPath(f,e,g,d);return h},B.prototype.delLocalData=function(){var a=this,b=a.opts;"function"==typeof gli_file_unlink&&gli_file_unlink(b.downloadPath)},B.prototype._unbindAppEvents=function(){"undefined"!=typeof gli_keydown_event&&"function"==typeof gli_keydown_event&&(gli_keydown_event(0,function(){},!1),gli_keydown_event(1,function(){},!1),gli_keydown_event(2,function(){},!1)),"undefined"!=typeof gli_photo_change&&"function"==typeof gli_photo_change&&gli_photo_change(function(){},!1)},B.prototype.getLocalBooksId=function(){return[]},B.prototype.exit=function(a){var b=this.opts;try{this._saveProgressFile(),this._saveSettingFile(!0),this._saveBookState(),this._unbindAppEvents()}catch(a){console.error("[readerMObile.js] --> exit"+a)}b.exitReaderCb()},B.prototype.open=function(a){console.info("[readerMobile.js] --> open!")},B}(b,a,c,d,z,L,M,N,S,T,U,y,A,B,C,D,m,n,V,W,H,X,Y,Z,aa,ba),da=function(a,b){var c=(a._,{countpage:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-panel%20read-selector-countpage%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-page-1%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-countpage-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-countpage%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progressbar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view-offset%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-1%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-2%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),main:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-panel%20read-selector-main%20%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-page-storage%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E5%B9%B3%E9%93%BA%E5%8A%A8%E7%94%BB%E9%A1%B5%E9%9D%A2%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content-animate%20read-page-prev%20read-cf%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E4%B9%A6%E7%AD%BE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-animate-content%20read-page-1%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-animate-content%20read-page-2%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view-offset%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-1%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-2%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-page-1%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-page-2%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-delicate-container%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-delicate%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progressbar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view-offset%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-1%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-2%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E5%B9%B3%E9%93%BA%E5%8A%A8%E7%94%BB%E9%A1%B5%E9%9D%A2%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content-animate%20read-page-next%20read-cf%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-name%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%98%BE%E7%A4%BA%E4%B9%A6%E7%AD%BE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%86%85%E5%AE%B9%E6%98%BE%E7%A4%BA%E5%8C%BA--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-animate-content%20read-page-1%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-animate-content%20read-page-2%20read-cf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B5%E7%A0%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-view-offset%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-1%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-page%20read-two-offset%20read-offset-2%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),newpage:decodeURI(""),setting:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-setting-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B7%A6%E4%BE%A7%E9%80%80%E5%87%BA%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-exit-reader%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-lf%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E8%BF%94%E5%9B%9E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%8F%B3%E4%BE%A7%20%E4%B9%A6%E7%AD%BE%20%E7%89%88%E6%9D%83%E6%8A%95%E8%AF%89%20%E6%90%9C%E7%B4%A2--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-handle-box%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-view%20read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-bookmark-btn%20read-rt%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-copyright%20read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-rt%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search%20read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-rt%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%3C!--%E4%B8%AD%E9%97%B4%E9%80%8F%E6%98%8E%E5%8C%BA%E5%9F%9F--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-set-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-content%20read-h-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-cbn-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-hv-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-progress-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-hv-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-font-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-hv-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-night-btn%20read-active%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-hv-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),fontlight:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-font-set-panel%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-set-page%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B1%8F%E5%B9%95%E4%BA%AE%E5%BA%A6--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-screen-intensity%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-light-bar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon-div%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-lf%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-rt%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-system-light%20read-h-right%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%22%3E%E7%B3%BB%E7%BB%9F%E4%BA%AE%E5%BA%A6%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%AD%97%E4%BD%93%E5%A4%A7%E5%B0%8F--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font-size%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bg-color%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%AD%97%E4%BD%93%E7%B1%BB%E5%9E%8B--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font-family%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-font-family-view%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-more-font-btn%20read-disabled%22%3E%E6%9B%B4%E5%A4%9A%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E7%BF%BB%E9%A1%B5%E6%96%B9%E5%BC%8F%20%20%20--%20%E5%B1%8F%E5%B9%95%E9%95%BF%E4%BA%AE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-setting-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-plugs-group%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-turn-page%20read-lf%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-screen-always-bright%20read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E5%B1%8F%E5%B9%95%E9%95%BF%E4%BA%AE%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bright-bar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon-triangle%20read-h-center%22%3E%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),progress:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-schedule-set-panel%22%3E%0A%20%20%20%20%20%20%20%20%3C!--%E7%AB%A0%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-adjust%20read-h-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-font%20read-prev-chapter%22%3E%E6%97%A0%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-center-click-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-icon%20read-prev%20read-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-chapter-count-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-text-over%20read-chapt-title%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-text-over%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-chapt-current%22%3E1%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E/%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-chapt-total%22%3E6%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-icon%20read-next%20read-v-center%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-font%20read-next-chapter%22%3E5%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C!--%E8%BF%9B%E5%BA%A6%E8%B0%83%E8%8A%82--%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-schedule-adjust%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-bar%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),complain:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-pad-modal%20read-complaint-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-modal-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-modal-body%20read-hv-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-body-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-cancel-btn%20read-lf%22%3E%E5%8F%96%E6%B6%88%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-h-center%22%3E%E7%89%88%E6%9D%83%E6%8A%95%E8%AF%89%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-send-btn%20read-rt%22%3E%E5%8F%91%E9%80%81%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-canel-box%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-canel-box-btn%20read-canel-box-cont%22%3E%E7%BB%A7%E7%BB%AD%E7%BC%96%E8%BE%91%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-canel-box-btn%20read-canel-box-leave%22%3E%E7%A6%BB%E5%BC%80%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20class=%22read-complaint-textarea%22%20placeholder=%22%E4%BF%9D%E6%8A%A4%E7%89%88%E6%9D%83%EF%BC%8C%E5%85%B1%E5%BB%BA%E7%99%BE%E5%AE%B6%E4%BA%89%E9%B8%A3%E7%9A%84%E5%8E%9F%E5%88%9B%E5%A4%A7%E7%8E%AF%E5%A2%83%EF%BC%8C%E6%84%9F%E8%B0%A2%E6%9C%89%E6%82%A8%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),search:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-search-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%B7%A6%E4%BE%A7%E8%BF%94%E5%9B%9E%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-search-back%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-lf%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-v-center%22%3E%E8%BF%94%E5%9B%9E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E4%B8%AD%E9%97%B4%E6%90%9C%E7%B4%A2%E6%A1%86--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-search-box%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search-ipt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinput%20type=%22text%22%20placeholder=%22%E8%AF%B7%E8%BE%93%E5%85%A5%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%22/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-search-btn%22%3E%E6%90%9C%E7%B4%A2%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search-history%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-history-title%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-lf%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-lf%22%3E%E5%8E%86%E5%8F%B2%E6%90%9C%E7%B4%A2%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-clear-history%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-history-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-search-result%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),correct:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-pad-modal%20read-correction-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-modal-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-modal-body%20read-hv-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-body-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-cancel-btn%20read-lf%22%3E%E5%8F%96%E6%B6%88%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-h-center%22%3E%E7%BA%A0%E9%94%99%E6%96%87%E5%AD%97%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-send-btn%20read-rt%22%3E%E5%8F%91%E9%80%81%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-canel-box%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-canel-box-btn%20read-canel-box-cont%22%3E%E7%BB%A7%E7%BB%AD%E7%BC%96%E8%BE%91%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-canel-box-btn%20read-canel-box-leave%22%3E%E7%A6%BB%E5%BC%80%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%E5%8F%91%E7%9A%84%E6%96%B9%E6%B3%95%E7%9A%84%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20class=%22read-correction-textarea%22%20placeholder=%22%E5%B8%AE%E5%8A%A9%E6%88%91%E4%BB%AC%E7%BA%A0%E6%AD%A3%E9%94%99%E8%AF%AF%EF%BC%8C%E8%AE%A9%E6%88%91%E4%BB%AC%E4%B8%BA%E5%A4%A7%E5%AE%B6%E6%9B%B4%E5%A5%BD%E7%9A%84%E6%9C%8D%E5%8A%A1%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),
cbn:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-cbn-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cbn-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cbn-view%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header-nav%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),cbnNavMenu:decodeURI("%0A%20%20%20%20%3C%25%20_.each(obj,%20function(%20menu%20)%7B%20%20%20%25%3E%0A%0A%20%20%20%20%3Cdiv%20class=%22read-lf%20%3C%25=%20menu.state%20%25%3E%20read-nav-menus%3C%25=%20obj.length%20%25%3E%20%22%3E%0A%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-pointer%20read-text-over%20read-hv-center%22%20data-view=%22%3C%25=%20menu.view%20%25%3E%22%3E%3C%25=%20menu.text%20%25%3E%3C/span%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%0A%20%20%20%20%3C%25%20%20%20%7D);%20%20%25%3E%0A"),cbnNavBody:decodeURI("%0A%20%20%20%20%3C%25%20_.each(obj,%20function(%20menu%20)%7B%20%20%20%25%3E%0A%20%20%20%20%3Cdiv%20class=%22%3C%25=%20menu.view%20%25%3E%20%3C%25%20if(menu.state%20!=%20'read-active')%7B%20%25%3E%20read-hide%20%20%3C%25%20%7D%20%25%3E%20%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-no-%3C%25=%20menu.name%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-h-center%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%3C%25=%20menu.prompt%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C%25%20%20%20%7D);%20%20%25%3E%0A"),catalog:decodeURI("%0A%20%20%20%20%0A%20%20%20%20%3Cdiv%20class=%22read-book-info%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%3Ch1%20class=%22read-text-over%22%3E%3C%25=%20obj.name%20%25%3E%3C/h1%3E%0A%20%20%20%20%20%20%20%20%3Ch2%20class=%22read-text-over%22%3E%3C%25=%20obj.subtitle%20%25%3E%3C/h2%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-catalog-author%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-lf%20read-text-over%22%3E%3C%25=%20obj.author%20%25%3E%3C/span%3E%3Cspan%20class=%22%22%3E%E8%91%97%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-lf%20read-text-over%22%3E%3C%25=%20obj.translator%20%25%3E%3C/span%3E%3Cspan%20class=%22%22%3E%E8%AF%91%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-catalog-visitors%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%3Cspan%3E%3C%25=%20obj.read_num%20%25%3E%20%E9%98%85%E8%AF%BB%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%3Cspan%3E%3C%25=%20obj.word_count%20%25%3E%20%E5%AD%97%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A%0A%20%20%20%20%3Cdiv%20class=%22read-chapter-list%22%3E%0A%20%20%20%20%20%20%20%20%3Cul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20class=%22%3C%25%20if%20(!chapt.chapter_status)%20%7B%20%25%3Eread-no-data%3C%25%20%7D%20%25%3E%22%20data-status=%22%3C%25=%20chapt.chapter_status%20%25%3E%22%20data-id=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-lf%20read-chapter-name%22%3E%3C%25=%20chapt.chapter_name%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%3Cspan%20class=%22read-rt%20read-chapter-seat%22%3E%3C%25=%20!!chapt.pageNum%20?%20chapt.pageNum%20:%200%20%25%3E%3C/span%3E--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-rt%20read-chapter-seat%22%3E%3C%25=%20(parseInt(chapt.textlen)/parseInt(obj.word_count)%20*%20100).toFixed(2)%20%25%3E%25%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%3C/div%3E%0A"),note:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-has-note%20%22%3E%0A%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter_list,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%3C%25%20if(!_.isEmpty(chapt.note_list))%7B%20%25%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-one-chapter-notes%22%20data-chapterid=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-chapter%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-note-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.chapter_name%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-note-chapter-count%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.note_count%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(chapt.note_list,%20function(note)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note%22%20data-noteid=%22%3C%25=%20note.note_id%20%25%3E%22%20data-percent=%22%3C%25=%20note.note_page%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-left%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20note.original%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20note.note_text%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-note-time%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-note-or-underline%20read-note-%3C%25=%20!note.note_text%20?%200%20:%201%20%20%25%3E%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-page-site%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=(parseFloat(note.note_page)*100).toFixed(2)+%20%22%25%22%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-time%22%3E%3C%25=%20obj.nowDate%20==%20note.note_time.substr(0,%2010)%20?%20note.note_time.substring(11)%20:%20note.note_time.substr(0,%2010)%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D;%20%25%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20class=%22read-no-note%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-h-center%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-h-center%22%3E%E9%98%85%E8%AF%BB%E6%97%B6%E9%95%BF%E6%8C%89%E6%96%87%E5%AD%97%E5%8F%AF%E6%B7%BB%E5%8A%A0%E7%AC%94%E8%AE%B0%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),bookmark:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-has-bookmark%22%3E%0A%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.chapter_list,%20function(chapt)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-one-chapter-bookmark%22%20data-chapterid=%22%3C%25=%20chapt.chapter_id%20%25%3E%22%20data-chapterName=%22%3C%25=%20chapt.chapter_name%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-chapter%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-text-over%20read-bookmark-chapter-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.chapter_name%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-bookmark-chapter-count%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20chapt.count%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(chapt.bookmark_list,%20function(bookmark)%7B%20%20%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark%22%20data-bookmarkid=%22%3C%25=%20bookmark.bookmark_id%20%25%3E%22%20data-percent=%22%3C%25=%20bookmark.bookmark_page%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bookmark-left%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25=%20bookmark.bookmark_text%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-cf%20read-bookmark-time%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%22%3E%3Cspan%20class=%22read-icon%20read-icon-v-center%22%3E%3C/span%3E%3Cspan%20class=%22read-bookmark-percent%22%3E%3C%25=%20(parseFloat(bookmark.bookmark_page)*100).toFixed(2)%20%25%3E%25%3C/span%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-time%22%3E%3C%25=%20bookmark.bookmark_time%20%25%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-bookmark-del%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%3C/div%3E%0A%20%20%20%20%3Cdiv%20class=%22read-no-bookmark%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-icon-h-center%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-h-center%22%3E%E9%98%85%E8%AF%BB%E6%97%B6%E7%82%B9%E5%87%BB%E5%8F%B3%E4%B8%8A%E8%A7%92%E7%9A%84%E4%B9%A6%E7%AD%BE%E5%8D%B3%E5%8F%AF%E6%B7%BB%E5%8A%A0%3C/span%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),firstOpen:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-first-time%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-item-1%20read-icon-left%20read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-item-2%20read-icon-middle%20read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-item-1%20read-icon-right%20read-lf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),viewImg:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-viewimg-panel%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-img-setting%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20read-exit-img%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E8%BF%94%E5%9B%9E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20read-save-btn%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%22%3E%E4%BF%9D%E5%AD%98%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%20read-rotate-btn%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-viewimg-content%22%3E%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteEdit:decodeURI("%0A%20%20%20%20%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-pad-modal%20read-edit-note-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-modal-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-modal-body%20read-hv-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-body-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-cancel-btn%20read-lf%22%3E%E5%8F%96%E6%B6%88%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-font%20read-h-center%22%3E%E7%BC%96%E8%BE%91%E7%AC%94%E8%AE%B0%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-send-btn%20read-rt%22%3E%E4%BF%9D%E5%AD%98%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-canel-box%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-canel-box-btn%20read-canel-box-cont%22%3E%E7%BB%A7%E7%BB%AD%E7%BC%96%E8%BE%91%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-canel-box-btn%20read-canel-box-leave%22%3E%E7%A6%BB%E5%BC%80%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pad-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ctextarea%20class=%22read-edit-textarea%22%20placeholder=%22%E8%BD%BB%E6%9D%BE%E8%AE%B0%E5%BD%95%E4%BD%A0%E7%9A%84%E6%89%80%E6%83%B3%E3%80%81%E6%89%80%E6%84%9F%22%3E%3C/textarea%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),noteDetail:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-comm-panel%20read-note-detail-panel%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-detail-cover%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-detail-content%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-hv-center%20read-font%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-body%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E5%8E%9F%E6%96%87%E6%91%98%E8%A6%81--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-original-text%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E7%AC%94%E8%AE%B0%E5%86%85%E5%AE%B9--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-note-text%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%E6%97%B6%E9%97%B4--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-time%20read-rt%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-footer%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-btn-div%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-lf%20read-delete-btn%22%3E%E5%88%A0%E9%99%A4%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ca%20href=%22javascript:void(0)%22%20class=%22read-a-btn%20read-rt%20read-edit-btn%22%3E%E7%BC%96%E8%BE%91%3C/a%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-turn-note%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-lf%20read-prev%22%3E%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%E4%B8%8A%E4%B8%80%E9%A1%B5%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-page%20read-hv-center%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-current%22%3E1%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%3E/%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-total%22%3E1%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20class=%22read-rt%20read-next%22%3E%E4%B8%8B%E4%B8%80%E9%A1%B5%3Cspan%20class=%22read-icon%22%3E%3C/span%3E%3C/button%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-reader-share%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-title%20read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-lf%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-hv-center%22%3E%E5%88%86%E4%BA%AB%E5%88%B0%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-rt%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cul%20class=%22read-cf%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20_.each(obj.shareNotes,%20function(item)%7B%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cli%20data-type=%22%3C%25=item.type%20%25%3E%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-icon%20%3C%25=item.icon_css%25%3E%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-font%20read-text-over%22%3E%3C%25=item.txt%25%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/li%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%25%20%7D);%20%25%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/ul%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A"),video:decodeURI("%0A%20%20%20%20%3Cdiv%20class=%22read-mobile-video-wrap%20read-hide%22%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-list%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-bigSizeVideo%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cvideo%20class=%22read-current-video%22%20width=%22100%25%20%22%20height=%2299%25%20%22%3E%3C/video%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E6%8E%A7%E5%88%B6%E6%9D%A1%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-contorls-container%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-controls%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-play-btn%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-currenttime%20%22%3E00:00%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedprogress-bar%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-video-totaltime%20%22%3E00:00%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-full-screen%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header-back-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-header-video-title%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E8%B0%83%E8%8A%82%E9%9F%B3%E9%87%8F%E6%9D%A1%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-volume-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-addvolume-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-totalvolume-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedvolume-bar%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-reducevolume-icon%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6%E6%9D%A1%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-light-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-light-icon%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-totallight-bar%20%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-loadedlight-bar%20%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E5%BC%95%E5%AF%BC%E9%A1%B5%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-guide-page%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E8%BF%9B%E5%BA%A6%E9%81%AE%E7%BD%A9%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-progress-bar%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cspan%20class=%22read-current-time%22%3E%3C/span%3E%3Cspan%3E/%3C/span%3E%3Cspan%20class=%22read-total-time%20%22%3E%3C/span%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E6%AD%A3%E5%9C%A8%E5%8A%A0%E8%BD%BD%E9%81%AE%E7%BD%A9%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-waiting-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-play-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E6%9A%82%E5%81%9C%E9%81%AE%E7%BD%A9%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-pause-mask%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class=%22read-play-icon%22%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%20%20%20%20%3C/div%3E%0A%20%20%20%20%3C/div%3E%0A")});return output={getTempl:function(a){return c[a]}}}(b,a),ea=function(a,b,c,d){var e=a._,f=function(a){var c={$readerObj:null,templHtml:"",$domObj:null,data:{chapterName:"",chapterContent:"",pagePerc:""},isMobile:!0,swipe:"X",basePoint:{X:0,Y:0},width:0,height:0,pageColumn:1};this.opts=b.extend(!0,{},c,a),this.opts.$animatePage=null,this.opts.$mainCont=null,this.opts.$animateCont=null,this._init()};return f.prototype._init=function(){console.log("[panelMain] --> _init"),this._renderLayout(),this._bindEvent()},f.prototype._renderLayout=function(){var a=this.opts,b=a.$readerObj.offset();a.basePoint.X=b.left,a.basePoint.Y=b.top;var c=e.template(a.templHtml),d=c(a.data);a.$readerObj.append(d),a.$domObj=a.$readerObj.find(".read-selector-main"),a.$mainCont=a.$domObj.find(".read-content"),a.width=b.width,a.height=b.height,a.$chapter=a.$domObj.find(".read-view .read-chapter-view"),a.$content=a.$domObj.find(".read-view .read-page-1"),a.$page=a.$domObj.find(".read-view .read-offset-1"),a.$content2=a.$domObj.find(".read-view .read-page-2"),a.$page2=a.$domObj.find(".read-view .read-offset-2"),a.$animatePage=a.$domObj.find(".read-content-animate"),a.$animateCont=a.$animatePage.find(".read-content"),a.$Achapter=a.$animatePage.find(".read-chapter-view"),a.$Acontent=a.$animatePage.find(".read-page-1"),a.$Apage=a.$animatePage.find(".read-view-offset .read-offset-1"),2==a.pageColumn?a.$readerObj.attr("data-page-mode","not-mode"):a.$readerObj.attr("data-page-mode","")},f.prototype._bindEvent=function(){var a=this.opts,d=a.basePoint,e=a.width,f=(a.height,this);a.isLeft=!0,a.isMove=!1,a.$domObj.on("touchstart",function(b){var c=b.touches[0];a.flag=null,a.movement=0,a.pageX=c.pageX,a.pageY=c.pageY,a.isMove=!0}),a.$domObj.on("touchmove",function(b){var c=a.$readerObj.attr("data-pageway"),d=a.$readerObj.attr("data-page-mode");"not-mode"!=d&&"page_2"!=c&&f.touchmove(b)}),a.$domObj.on("touchend",function(a){f.touchend(a)});var g=a.isMobile?"tap":"click";a.$domObj.on(g,function(g){var h=b(this).attr("data-animate");if("1"==h)return void console.info("%c [panelMain.js] -> 动画中!","background:yellow;");var i=g.target;if("IMG"==i.nodeName&&i.getAttribute("data-index")&&1!=i.getAttribute("data-cover"))return c.LOG.info("[panelMain.js]-> 点击了图片!"),c.LOG.info("data-index:"+i.getAttribute("data-index")),void a.$domObj.trigger("mainpanel:img",{currentIdx:i.getAttribute("data-index")});if("VIDEO"==i.nodeName){c.LOG.info("[panelMainPad.js]-> 点击了视频!");var j=i.getAttribute("src")||i.querySelector("source").getAttribute("src"),k=i.getAttribute("data-name")||j.split("/").pop();return void a.$domObj.trigger("mainpanel:video",{src:j,name:k})}if(b(i).hasClass("read-footnote-mark"))return void f._showFootnote(b(i));i.setAttribute("data-event","0"),console.log("MainPanel -> x: "+g.clientX+" , y:"+g.clientY+", type:"+g.type);var l=g.clientX-d.X,m=(g.clientY-d.Y,Math.floor(l/e*100));70<m&&m<=100?a.$domObj.trigger("mainpanel:right"):30<m&&m<=70?a.$domObj.trigger("mainpanel:middle"):0<m&&m<=30?a.$domObj.trigger("mainpanel:left"):console.warn("[panelMain] -> eventPos:"+m)})},f.prototype._showFootnote=function(a){var d=this.opts,e=d.$readerObj,f="";f="["+a.attr("data-count")+"]",f+=c.trim(a.parent().find("footnote").text()),c.LOG.info("[readerPc.js] --> setFootNote:"+f);var g="<div class='read-footnote-mask'><div class='read-footnote-exitdiv'><div class='read-footnote-exit'></div></div><div class='read-footnote-div'><p class='read-footnote-txt'>"+f+"</p></div></div>",h=b(g);e.append(h);var i=e.height(),j=e.width(),k=.4*i>500?500:i/3,l=.4*j<500?j-20:j/3;h.find(".read-footnote-exitdiv").css({width:l+"px",left:(j-l)/2+"px",top:(i-k)/2-10+"px"}),h.find(".read-footnote-div").css({width:l+"px",height:k+"px",left:(j-l)/2+"px",top:(i-k+20)/2+"px","font-size":"0.3em"}),h.on("tap",function(a){var b=a.target.className;"read-footnote-mask"!=b&&"read-footnote-exit"!=b||h.remove()})},f.prototype.showPagedata=function(a,b){var c=this,d=c.opts;d.data=a,"page_1"==b&&1!=a.turnMode?1==d.pageColumn?c._getTileData():c.noAnimate():"page_2"==b?c.noAnimate():c.noAnimate()},f.prototype._getTileData=function(){var a=this,b=a.opts,c=b.data.direction;"next"==c?(b.$animatePage.eq(1).find(".read-chapter-view").html(b.data.chapterName),b.$animatePage.eq(1).find(".read-page-1").html(b.data.chapterContent),b.$animatePage.eq(1).find(".read-offset-1").html(b.data.currPage)):"prev"==c&&(b.$animatePage.eq(0).find(".read-chapter-view").html(b.data.chapterName),b.$animatePage.eq(0).find(".read-page-1").html(b.data.chapterContent),b.$animatePage.eq(0).find(".read-offset-1").html(b.data.currPage)),"swipe"!=b.operation&&this._tilePage(c)},f.prototype._tilePage=function(a){var b=this,c=b.opts;c.$domObj.find(".read-header .read-bookmark-view").hide(),c.$domObj.attr("data-animate","1"),"prev"==a?(c.$animatePage.eq(0).removeClass("read-hide"),setTimeout(function(){d(c.$animatePage[0]).translate(c.width,0).duration("0.3s").ease("out").end()},10)):(c.$animatePage.eq(1).removeClass("read-hide"),setTimeout(function(){d(c.$animatePage[1]).translate(-c.width,0).duration("0.3s").ease("out").end()},10)),setTimeout(function(){c.$chapter.html(c.data.chapterName),c.$content.html(c.data.chapterContent),c.$page.html(c.data.pagePerc),b._setPageShow(),c.$domObj.find(".read-content-animate").css({transform:"none","-webkit-transform":"none","-moz-transform":"none",
"-ms-transform":"none"}).addClass("read-hide"),c.$animatePage.eq(1).find(".read-chapter-view").html(""),c.$animatePage.eq(1).find(".read-animate-content").html(""),c.$animatePage.eq(1).find(".read-page").html(""),c.$animatePage.eq(0).find(".read-chapter-view").html(""),c.$animatePage.eq(0).find(".read-animate-content").html(""),c.$animatePage.eq(0).find(".read-page").html(""),c.$domObj.attr("data-animate","0"),c.$domObj.trigger("mainpanel:showBookmark",c.data)},300)},f.prototype.realPage=function(){var a=this,b=a.opts,c=b.data.direction;b.$domObj.attr("data-animate","1"),b.$domObj.find(".read-header .read-bookmark-view").hide(),b.$real.show(),setTimeout(function(){b.$real.addClass("read-real-turn-"+c)},10),b.$realChapter.html(b.$chapter.html()),b.$realContent.html(b.$content.html()),b.$chapter.html(b.data.chapterName),b.$content.html(b.data.chapterContent),b.$page.html(b.data.firstPagePerc),b.$content2.html(b.data.secondPage),b.$page2.html(b.data.pagePerc),setTimeout(function(){b.$real.removeClass("read-real-turn-"+c),b.$real.hide(),b.$domObj.attr("data-animate","0"),b.$domObj.trigger("mainpanel:showBookmark",b.data)},500),this._setPageShow()},f.prototype.noAnimate=function(){var a=this,b=a.opts;b.data.direction;b.$domObj.trigger("mainpanel:showBookmark",b.data),b.$chapter.html(b.data.chapterName),b.$content.html(b.data.chapterContent),b.$page.html(b.data.firstPagePerc),b.$content2.html(b.data.secondPage),b.$page2.html(b.data.pagePerc),this._setPageShow()},f.prototype._setPageShow=function(){var a=this.opts;"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub]),this._setImgSrc(),this._setVideoSrc(),this._setTableStyle(),this._bindTableEvent(),this.highLight(),a.$domObj.trigger("mainpanel:showNote")},f.prototype.highLight=function(){var a=this.opts,c=a.$readerObj.attr("data-searchKword");if(c){var d=/(([\w_\.%]+)|([^\2]))/gi,e=[];c.replace(d,function(a){e.push(a)});for(var f=b("span[data-id]"),g="",h=0;h<f.length;h++)if(g="",b(f[h]).text()==e[0]){for(var i=0;i<e.length;i++)g+=b(f[h+i]).text();if(g.indexOf(c)!=-1)for(var j=0;j<i;j++)b(f[h+j]).addClass("read-highlight"),console.log("高亮显示搜索结果！")}a.$readerObj.attr("data-searchKword","")}},f.prototype._setImgSrc=function(){var a=this.opts;a.$mainCont.find("img[data-src]").each(function(){var a=b(this).attr("data-src");b(this).attr("src",a),b(this).removeAttr("data-src")}),a.$mainCont.find("img[data-old-src]").on("error",function(){var a=b(this).attr("data-old-src");b(this).attr("src",a),b(this).removeAttr("data-old-src")})},f.prototype._setVideoSrc=function(){var a=this.opts;a.$mainCont.find("source[data-src]").each(function(){var a=b(this).attr("data-src");b(this).attr("src",a),b(this).removeAttr("data-src")})},f.prototype._setTableStyle=function(){var a=this.opts,c=a.$mainCont.width(),d=0;a.$mainCont.find("table").each(function(){return"1"==b(this).attr("zoom")||void(b(this).width()>c&&(d=b(this).parent().height(),b(this).parent().addClass("read-tbl-big-data"),d=2*d-b(this).parent().height(),b(this).attr("zoom","1"),b(this).attr("data-resth",d)))}),a.$mainCont.find('table[zoom="1"]').each(function(){var a=b(this).attr("data-resth"),c=b('<div class="read-tbl-wrap" style="height: '+a+'px">');b(this).parent().append(c);var d=b('<div class="read-open-pop">');b(this).parent().append(d),c.append(b(this))})},f.prototype._bindTableEvent=function(){var a=this,c=this.opts,d=c.basePoint,e=c.width,f=c.$mainCont.find('table[zoom="1"]'),g=c.isMobile?"tap":"click";f.on(g,function(c){var f=c.clientX-d.X,g=Math.floor(f/e*100);if(30<g&&g<=70){var h=b(this).clone(!0);a._expandTable(h),c.stopPropagation()}})},f.prototype._expandTable=function(a){var c=this.opts,d=c.isMobile?"tap":"click",e=b('<div class="read-comm-panel read-comm-table">'),f=b('<div class="read-comm-tbl-wrap">'),g=b('<div class="read-close-btn">');e.append(g),e.append(f),f.append(a),c.$readerObj.append(e),e.on(d+" swipeDown",function(a){return!1}),g.on(d,function(a){e.remove(),a.stopPropagation()})},f.prototype.setFontSize=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-size-"+a.oldValue,c.newValue="read-size-"+a.newValue,b.$domObj.find(".read-content").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-delicate-container").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-animate-content").removeClass(c.oldValue).addClass(c.newValue)},f.prototype.setFontFamily=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-font-family-"+a.oldValue,c.newValue="read-font-family-"+a.newValue,b.$domObj.find(".read-content").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-delicate-container").removeClass(c.oldValue).addClass(c.newValue),b.$domObj.find(".read-animate-content").removeClass(c.oldValue).addClass(c.newValue)},f.prototype.setBgColor=function(a){var b=this.opts,c={oldValue:"",newValue:""};c.oldValue="read-bg-"+a.oldValue,c.newValue="read-bg-"+a.newValue,b.$readerObj.removeClass("read-night"),b.$domObj.removeClass(c.oldValue),b.$domObj.addClass(c.newValue)},f.prototype.open=function(){console.log("[panelMain] --> open");var a=this.opts;a.$domObj.fadeIn(300)},f.prototype.close=function(){var a=this.opts;a.$domObj.fadeOut(100)},f.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},f.prototype.touchmove=function(a){var b=this.opts,c=a.touches[0],d=c.pageX-b.pageX,e=c.pageY-b.pageY;b.operation="swipe",b.flag||(b.flag=Math.abs(d)>Math.abs(e)?"X":"Y"),b.flag===b.swipe&&(a.preventDefault(),a.stopPropagation(),b.movement=d,b.isMove&&(b.isLeft=!(d<0),d<0?(b.isLeft=!1,b.$domObj.trigger("mainpanel:right")):(b.isLeft=!0,b.$domObj.trigger("mainpanel:left")),b.isMove=!1),b.isLeft?b.isLeft&&(b.$animatePage.eq(0).removeClass("read-hide"),b.$animatePage[0].style.webkitTransform="translate3d("+d+"px,0,0)"):(b.$animatePage.eq(1).removeClass("read-hide"),b.$animatePage[1].style.webkitTransform="translate3d("+d+"px,0,0)"))},f.prototype.touchend=function(a){var b=this,c=this.opts,d=50,e=c.movement;if(c.operation="tap",c.flag)if(a.preventDefault(),Math.abs(e)>Math.abs(d)){var f=c.isLeft?"prev":"next";b._tilePage(f)}else c.$animatePage[1].style.webkitTransform="translate3d(0px,0,0)",c.$animatePage[0].style.webkitTransform="translate3d(0px,0,0)",c.$animatePage.addClass("read-hide")},f}(b,a,c,f),fa=function(a,b,c,d,e,f){var g=a._,h=function(a){var b={wrapDomId:"",$readerObj:null,templHtml:"",fontlightHtml:"",progressHtml:"",$domObj:null,$headerObj:null,$footerObj:null,$bodyObj:null,$fontlight:null,$progress:null,isMobile:!0,isNightMode:null,settingData:null,progressData:null};this.opts=e.extend(!0,{},b,a),this._init()};return h.prototype._init=function(){console.log("[SettingPanel] --> _init"),this._renderLayout(),this._bindEvent()},h.prototype._renderLayout=function(){var a=this.opts,b=g.template(a.templHtml),c=b();a.$domObj=e(c),a.$readerObj.append(a.$domObj),a.$headerObj=a.$domObj.find(".read-header"),a.$footerObj=a.$domObj.find(".read-footer");var d=a.$headerObj.css("top"),f=a.$footerObj.css("bottom");a.$headerObj.attr("data-top",d),a.$footerObj.attr("data-bottom",f),this._renderProgress(),this._renderFontlight(),a.bookmarkDom=a.$domObj.find(".read-header .read-bookmark-btn"),a.useBookmark||a.bookmarkDom.css("visibility","hidden"),a.useComplaint||a.$headerObj.find(".read-copyright").css("visibility","hidden"),a.useSearch||a.$headerObj.find(".read-search").css("visibility","hidden"),a.useExit||a.$headerObj.find(".read-exit-reader").hide()},h.prototype._renderProgress=function(){var a=this.opts,b=g.template(a.progressHtml),c=b();a.$footerObj.append(c),a.$progress=a.$footerObj.find(".read-schedule-set-panel"),console.info("%c 阅读进度!!:"+a.progressData,"background:yellow;");var e=a.$progress.find(".read-progress-bar");this.$progressObj=new d({domSelector:e,value:a.progressData||0,isMobile:a.isMobile}),a.$progress.on("dragEnd",function(b,c){a.$domObj.trigger("progress:click",c)})},h.prototype._renderFontlight=function(){function a(){var a=4;e.useFonts||(m.parents(".read-setting-bar").hide(),o.parents(".read-setting-bar").hide(),a-=1),e.useBgColor||(p.parents(".read-setting-bar").hide(),a-=1),e.useLight||(k.parents(".read-setting-bar").hide(),l.parents(".read-screen-always-bright").hide(),e.$footerObj.find(".read-night-btn").hide(),a-=1),e.usePageWay||(n.hide(),a-=1),e.useLight||e.usePageWay||l.parents(".read-setting-bar").hide(),a||e.$footerObj.find(".read-font-btn").hide()}var e=this.opts,f=e.settingData,h=g.template(e.fontlightHtml),i=h();e.$footerObj.append(i),e.$fontlight=e.$footerObj.find(".read-font-set-panel");var j=e.$fontlight.find(".read-light-bar");this.$systemLightbarObj=new d({domSelector:j,value:f.brightness,isMobile:e.isMobile});var k=e.$fontlight.find(".read-system-light");this.$systemLightObj=new c({domSelector:k,value:f.useSysBrightness,isMobile:e.isMobile});var l=e.$fontlight.find(".read-screen-always-bright .read-bright-bar");this.$screenLightObj=new c({domSelector:l,value:f.screenLongActive,isMobile:e.isMobile});var m=e.$fontlight.find(".read-font-size");this.$fontSizeObj=new b({$domObj:m,data:f.fontSize.list,value:f.fontSize.value,isMobile:e.isMobile});var n=e.$fontlight.find(".read-turn-page");this.$pagingObj=new b({type:"oval",$domObj:n,data:[{text:"平铺翻页",value:"page_1"},{text:"无",value:"page_2"}],value:"page_1",isMobile:e.isMobile});var o=e.$fontlight.find(".read-font-family-view");this.$fontFamilyObj=new b({type:"oval",$domObj:o,data:f.fontFamily.list,value:f.fontFamily.value});var p=e.$fontlight.find(".read-bg-color");this.$bgColorObj=new b({type:"round",$domObj:p,data:f.bgColor.list,value:f.bgColor.value}),a()},h.prototype._bindEvent=function(){var a=this.opts,b=this,c=a.isMobile?"tap":"click";a.$domObj.find(".read-body").on(c,function(){b.close()}),a.$domObj.find(".read-exit-reader").on(c,function(){b.close(),a.$domObj.trigger("out:click")}),a.$footerObj.find(".read-cbn-btn").on(c,function(){a.$domObj.trigger("cbn:click"),b.close()}),a.$domObj.find(".read-header .read-copyright").on(c,function(){a.$domObj.trigger("complaint:click"),b.close()}),a.bookmarkDom.on(c,function(){a.$domObj.trigger("bookmark:click",a.bookmarkDom)}),a.$domObj.find(".read-header .read-search").on(c,function(){a.$domObj.trigger("showSearch:click"),b.close()}),a.$footerObj.find(".read-prev").on(c,function(){a.$domObj.trigger("progress:prev")}),a.$footerObj.find(".read-next").on(c,function(){a.$domObj.trigger("progress:next")}),a.$footerObj.find(".read-progress-btn").on(c,function(){e(this).addClass("read-active").siblings().removeClass("read-active"),b._hideChildPanel(a.$fontlight),b._showChildPanel(a.$progress),a.$domObj.trigger("progress:setVal")}),a.$footerObj.find(".read-font-btn").on(c,function(){e(this).addClass("read-active").siblings().removeClass("read-active"),b._hideChildPanel(a.$progress),b._showChildPanel(a.$fontlight)}),this.$systemLightbarObj.on("dragMove",function(a,c){console.info("[panelSetting.js] -> dragMove:"+c),b._setScreenBrightness(parseFloat(c)),b.$systemLightbarObj.enable()}),this.$systemLightbarObj.on("dragEnd",function(a,c){console.info("[panelSetting.js] -> dragEnd:"+c),b.$systemLightObj.getValue()&&b.$systemLightObj.changeState()}),this.$systemLightObj.on("change:click",function(a,c){c?(b.$systemLightbarObj.disabled(),b._useSysBrightness()):(b.$systemLightbarObj.enable(),b._setScreenBrightness(b.$systemLightbarObj.getValue()))}),this.$pagingObj.on("change:click",function(b,c){console.log(" %c 设置翻页方式! "+c,"color:green"),a.$domObj.trigger("pageway:click",c)}),this.$fontSizeObj.on("change:click",function(b,c){a.$domObj.trigger("size:click",c)}),this.$fontFamilyObj.on("change:click",function(b,c){a.$domObj.trigger("family:click",c)}),this.$bgColorObj.on("change:click",function(b,c){a.isNightMode=!1,a.$domObj.trigger("bgcolor:click",c)}),this.$screenLightObj.on("change:click",function(b,c){gli_set_keepscreenon(c);var d=a.$domObj.find(".read-footer .read-screen-always-bright");c?(d.find(".read-font.read-lf").addClass("read-active"),d.find(".read-font.read-rt").removeClass("read-active")):(d.find(".read-font.read-lf").removeClass("read-active"),d.find(".read-font.read-rt").addClass("read-active"))}),a.$domObj.find(".read-footer .read-set-btn .read-night-btn").on(c,function(){a.isNightMode=!a.isNightMode,a.$domObj.trigger("night:click",a.isNightMode)})},h.prototype.setProgressVal=function(a){var b=this.opts,c=a.currIndex-1,d=a.total-a.currIndex;0===c&&(c="无"),0===d&&(c="无"),a.turnMode&&this.$progressObj.setValue(a.val),b.$footerObj.find(".read-prev-chapter").html(c),b.$footerObj.find(".read-next-chapter").html(d),b.$footerObj.find(".read-chapt-title").html(a.name),b.$footerObj.find(".read-chapt-current").html(a.currIndex),b.$footerObj.find(".read-chapt-total").html(a.total)},h.prototype.setColor=function(a){this.$systemLightbarObj.setColor(a)},h.prototype._showChildPanel=function(a){var b=(this.opts,a.height()),c=parseFloat(a.css("font-size"));b=a.hasClass("read-font-set-panel")?b+c/5:b,f(a[0]).set("top",-b+"px").duration("0.5s").end()},h.prototype._hideChildPanel=function(a){this.opts;f(a[0]).set("top","0").duration("0.5s").end()},h.prototype.getPanelObject=function(){},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h.prototype.open=function(){console.log("[SettingPanel] --> open");var a=this.opts;a.$domObj.fadeIn(200),f(a.wrapDomId+" .read-setting-panel  .read-header").set("top","0").duration("0.3s").end(),f(a.wrapDomId+" .read-setting-panel  .read-footer").set("bottom","0").duration("0.3s").end(),a.$footerObj.find(".read-set-btn .read-content").children().each(function(){e(this).removeClass("read-active")}),this.$fontSizeObj.reSize(),this.$pagingObj.reSize(),this.$fontFamilyObj.reSize(),this.$bgColorObj.reSize(),this.$systemLightbarObj.reSize(),this.$progressObj.reSize(),this.$screenLightObj.reSize(),this.$systemLightObj.reSize()},h.prototype.close=function(){var a=this.opts,b=a.$headerObj.attr("data-top"),c=a.$footerObj.attr("data-bottom");f(a.wrapDomId+" .read-setting-panel .read-header").set("top",b).duration("0.3s").end(),f(a.wrapDomId+" .read-setting-panel .read-footer").set("bottom",c).duration("0.3s").end(),setTimeout(function(){a.$domObj.fadeOut(10)},300),this._hideChildPanel(a.$progress),this._hideChildPanel(a.$fontlight),a.$domObj.trigger("close:click")},h.prototype.getSettingData=function(){var a=this.opts,b=a.settingData;return b.brightness=this.$systemLightbarObj.getValue(),b.useSysBrightness=this.$systemLightObj.getValue(),b.screenLongActive=this.$screenLightObj.getValue(),b.fontSize.value=this.$fontSizeObj.getValue(),b.pagingType.value=this.$pagingObj.getValue(),b.fontFamily.value=this.$fontFamilyObj.getValue(),b.bgColor.value=this.$bgColorObj.getValue(),b.isNightMode=a.isNightMode,b},h.prototype._setScreenBrightness=function(a){var b=.3,c=.7,d=b+a*c;d=parseFloat(d.toFixed(2)),"function"==typeof gli_set_brightness&&gli_set_brightness(d)},h.prototype._useSysBrightness=function(){var a=this;"function"==typeof gli_get_brightness&&gli_get_brightness(function(b){a._setScreenBrightness(b)})},h}(b,h,i,j,a,f),ga=function(a,b,c,d,e,f){var g=a._,h=function(a){console.log("[Bookmark] -> 构造函数!");var c={wrapObj:null,tmplHtml:"",isMobile:!0,data:null,markDomObj:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){var a=this.opts;a.templObj=g.template(a.tmplHtml),this._bindEvent(),this.dialog=new d({$wrapDomObj:a.$readerObj,isMobile:a.isMobile,okBtn:{txt:"确定",cssClass:"",func:function(){}},cancelBtn:{txt:"离开",cssClass:"",func:function(){}}})},h.prototype._bindEvent=function(){var a=this,c=this.opts,d=c.isMobile?"tap swipeLeft swipeRight":"click swipeLeft swipeRight";c.wrapObj.on(d,".read-bookmark-del",function(d){console.log("[bookmark.js]书签点击了删除"+d.type),c.wrapObj.trigger("bookmark:delclick");var e=b(this).parents(".read-one-chapter-bookmark"),f={chapterId:e.attr("data-chapterid"),bookmarkid:b(this).parents(".read-bookmark").attr("data-bookmarkid")};a.delBookmark(f)}),c.wrapObj.on(d,".read-original-text",function(a){var d=parseFloat(b(this).parents(".read-bookmark").attr("data-percent"));c.wrapObj.trigger("bookmark:click",d)})},h.prototype.renderLayout=function(a){var b=this.opts,d=c.convertData(a.bookmark_list,"bookmark_list"),e={chapter_list:d,bookmark_list:a.bookmark_list};if(b.data=e,d.length>0){var f=b.templObj(e);b.wrapObj.html(f)}else b.wrapObj.find(".read-has-bookmark").html("").hide(),b.wrapObj.find(".read-no-bookmark").fadeIn()},h.prototype.addBookmark=function(a){function d(){g.data.bookmark_list.push(h);var a={time_stamp:g.data.time_stamp,bookmark_list:g.data.bookmark_list};g.saveFile(g.filePath,JSON.stringify(a)),f.renderLayout(g.data)}var f=this,g=this.opts;console.log("[Bookmark] -> addBookmark!");var h={bookmark_id:c.getRandomKey(),bookmark_text:a.text.slice(0,30),bookmark_time:c.getNowFormatDate(),bookmark_page:a.pageSite,chapter_name:a.chapterName,chapter_id:a.chapterId,oparate_type:"1",s_id:""};g.markDomObj.attr({"data-bookmarkid":h.bookmark_id,"data-chapterid":a.chapterId}).addClass("read-active");var i=b.extend(!0,{},h);g.api.setBookmark(i,function(a){console.log("[Bookmark.prototype.addBookmark] --> 增加书签-成功!"+a),d();var b={oparate_type:"1",s_id:a.s_id,bookmark_id:a.bookmark_id,time_stamp:a.time_stamp};f._updLocalData(b)},function(a){g.isClient?d():(f.dialog.setMsg(e.bookMarkFail),f.dialog.open(),g.markDomObj.removeClass("read-active"))})},h.prototype.delBookmark=function(a){var b=this,c=this.opts;console.log("[Bookmark] -> delBookmark!"),g.isEmpty(a)&&(a={bookmarkid:c.markDomObj.attr("data-bookmarkid"),chapterId:c.markDomObj.attr("data-chapterid")});for(var d=a.bookmarkid,f=c.data.bookmark_list,h=null,i=0,j=f.length;i<j;i++)if(h=f[i],h.bookmark_id==a.bookmarkid){h.oparate_type="3";break}var k={time_stamp:c.data.time_stamp,bookmark_list:c.data.bookmark_list};c.saveFile(c.filePath,JSON.stringify(k)),c.markDomObj.attr("data-bookmarkid")==d&&c.markDomObj.removeClass("read-active"),b.renderLayout(c.data),h.s_id&&c.api.delBookmark({bookmark_id:d},function(a){var c={oparate_type:"3",s_id:a.s_id,bookmark_id:a.bookmark_id,time_stamp:a.time_stamp};b._updLocalData(c)},function(a){c.isClient||(b.dialog.setMsg(e.bookMarkDelFail),b.dialog.open(),h.oparate_type="0",c.markDomObj.attr("data-bookmarkid")==d&&c.markDomObj.addClass("read-active"),b.renderLayout(c.data))})},h.prototype.updateBookmarks=function(a){var c=this,d=this.opts;console.log("[Bookmark] -> updateBookmarks!"),d.markDomObj=b(a.bookmarkDom),d.markDomObj.hasClass("read-active")?c.delBookmark():c.addBookmark(a)},h.prototype.getBookmarks=function(){console.log("[Bookmark] -> getBookmarks! ");var a=this.opts;return a.data},h.prototype.isShowBookmark=function(a){console.log("[Bookmark] -> isShowBookmark!");var b=this,c=b.opts,d=[],e=!0;g.isEmpty(c.data)||(d=c.data.chapter_list);for(var f=0;f<d.length;f++){var h=d[f];if(a.chapterId==h.chapter_id){for(var i=0;i<h.bookmark_list.length;i++){var j=h.bookmark_list[i],k=j.bookmark_page;if(k<=a.endPageOffset&&k>a.startPageOffset){e=!1,b._showMarkIcon(j.bookmark_id,"open");break}}break}}e&&b._showMarkIcon("","close")},h.prototype._showMarkIcon=function(a,b){var c=this.opts;0==c.markDomObj.length&&(c.markDomObj=c.wrapObj.parents(".read-reader-pad").find(".read-setting-panel").find(".read-header .read-bookmark-btn")),"open"==b?c.markDomObj.attr("data-bookmarkid",a).addClass("read-active"):c.markDomObj.attr("data-bookmarkid","").removeClass("read-active")},h.prototype.getMarkDom=function(){return this.opts.markDomObj},h.prototype._updLocalData=function(a){for(var b=this.opts,c=b.data.bookmark_list,d=null,e=0,f=c.length;e<f;e++)if(d=c[e],d.bookmark_id==a.bookmark_id){"1"==a.oparate_type?(d.s_id=a.s_id,d.oparate_type="0"):"3"==a.oparate_type&&c.splice(e,1),b.data.time_stamp=a.time_stamp;break}var g={time_stamp:b.data.time_stamp,bookmark_list:b.data.bookmark_list};b.saveFile(b.filePath,JSON.stringify(g))},h}(b,a,c,m,n,f),ha=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,editHtml:"",$domObj:null,isMobile:!0,noteData:null,sigleNote:null,api:null};this.opts=b.extend(!1,{},c,a),this._init()};return h.prototype._init=function(){console.log("[editPanel] --> _init"),this._renderLayout(),this._bindEvent()},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.editHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-content textarea"),d=b.isMobile?"tap":"click";b.$domObj.find(".read-pad-body-header .read-cancel-btn").on(d,function(){var b=c.val().trim();c.blur(),a.cancel(b)}),b.$domObj.find(".read-pad-body-header .read-send-btn").on(d,function(){var d=c.val().trim();c.blur(),a._sendNote(b.thisNoteObj,d)}),b.$domObj.find(".read-canel-box-cont").on(d,function(){a.hideCanelBox(),c.focus()}),b.$domObj.find(".read-canel-box-leave").on(d,function(){a.close()}),b.$domObj.find(".read-pad-content textarea").on("focus",function(){a.hideCanelBox()})},h.prototype.open=function(a){var b=this,c=b.opts;c.thisNoteObj=a,c.$domObj.fadeIn(),c.$domObj.find(".read-pad-content .read-original-text").html(a.original),a.note_text?(c.isEditNote=!0,c.$domObj.find(".read-pad-content textarea").val(a.note_text)):c.isEditNote=!1,a.isunderline&&g.each(c.noteData.note_list,function(b){if(b.note_id==a.note_id)return c.thisNoteObj.s_id=b.s_id,!1})},h.prototype.cancel=function(a){var b=this;b.opts;a?b.showCanelBox():b.close()},h.prototype.showCanelBox=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-canel-box"),d=parseFloat(c.css("font-size"));c.show(),setTimeout(function(){f(c[0]).set("height",d+"px").duration("0.2s").end()},10)},h.prototype.hideCanelBox=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-canel-box");f(c[0]).set("height",0).duration("0.2s").end(),setTimeout(function(){c.hide()},200)},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-pad-content textarea").val(""),a.hideCanelBox(),b.$domObj.hide()},h.prototype._sendNote=function(a,b){var f=this,g=f.opts;if(b){f.sucessDialog=new c({$wrapDomObj:g.$domObj,okBtn:{txt:"确定",cssClass:"",func:function(){f.close(),f.sucessDialog.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){f.close(),f.sucessDialog.destroy()}}});var h={chapter_id:a.chapter_id,chapter_name:a.chapter_name,firstId:a.firstId,lastId:a.lastId,note_id:a.note_id,note_page:a.note_page,note_text:b,note_time:e.getNowFormatDate(),original:a.original,s_id:a.s_id,oparate_type:"",isSave:!1};if(g.isEditNote||a.isunderline){h.oparate_type=2;for(var i=g.noteData.note_list,j=0,k=i.length;j<k;j++)if(i[j].note_id==h.note_id){i[j]=h;break}}else h.s_id="",h.note_id=e.getRandomKey(),h.oparate_type=1,g.noteData.note_list.push(h);g.$domObj.trigger("addnote:click",{noteData:g.noteData,sigleNote:h,flag:g.isEditNote})}else{var l=new c({$wrapDomObj:g.$domObj,okBtn:{txt:"确定",cssClass:"",func:function(){l.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){f.close(),l.destroy()}}});l.setMsg(d.inputContent),l.open()}},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h}(b,a,m,n,c,f),ia=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,detailHtml:"",$domObj:null,isMobile:!0,noteData:null,thisNoteObj:null,thisNoteList:[],api:null,shareObj:null};this.opts=b.extend(!1,{},c,a),this._noteShareActiveItems={wx:null,wx_moments:null,sina_weibo:null,qq:null,qq_zone:null},this._init()};return h.prototype._init=function(){console.log("[detailPanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.detailHtml),d=this._getShareItemsInfo(),e=c({shareNotes:d});a.$domObj=b(e),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap swipeRight":"click";if(c.$domObj.find(".read-note-detail-cover").on(d,function(b){("tap"==b.type||"swipeRight"==b.type)&&a.close()}),c.$domObj.find(".read-footer .read-delete-btn").on(d,function(b){"tap"==b.type&&a.deleteNote()}),c.$domObj.find(".read-footer .read-edit-btn").on(d,function(b){"tap"==b.type&&a.editNote(),a.close()}),c.$domObj.find(".read-footer .read-prev").on(d,function(b){"tap"==b.type&&a._prev()}),c.$domObj.find(".read-footer .read-next").on(d,function(b){"tap"==b.type&&a._next()}),c.note_share_conf.flag){for(var e=c.note_share_conf.share_items,f=0,g=e.length;f<g;f++)e[f].flag&&(a._noteShareActiveItems[e[f].type]=e[f].share_cb);c.$domObj.find(".read-reader-share").on(d,"li",function(){var c=a._getCurrentNotInfo(),d=b(this).attr("data-type");"function"==typeof a._noteShareActiveItems[d]?a._noteShareActiveItems[d](c):console.error("PC分享笔记:"+b(this).find(".read-text-over").html()+",未注册回调函数!")})}else c.$domObj.find(".read-footer .read-title").hide()},h.prototype.open=function(a,b){var c=this,d=c.opts;d.thisNoteObj={noteid:a,chapterid:b},d.$domObj.fadeIn();var e=d.$domObj.find(".read-note-detail-content"),g=e.width();f(e[0]).translate(-g,0).duration("0.3s").end(),this._filterNote(b),this.viewNote()},h.prototype.close=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-note-detail-content"),d=c.width();f(c[0]).translate(d,0).duration("0.3s").end(),b.$domObj.fadeOut()},h.prototype.viewNote=function(){var a=this,b=a.opts,c=b.thisNoteObj;return c.noteid===-1?(b.$domObj.find(".read-body .read-original-text").html(""),b.$domObj.find(".read-body .read-note-text").html("当前章节没笔记啦！"),b.$domObj.find(".read-body .read-time").html(""),b.$domObj.find(".read-footer .read-page .read-current").html(0),b.$domObj.find(".read-footer .read-page .read-total").html(0),b.$domObj.find(".read-body .read-btns").css("pointer-events","none"),b.$domObj.find(".read-footer").css("pointer-events","none"),!1):(b.$domObj.find(".read-body .read-btns").css("pointer-events",""),b.$domObj.find(".read-footer").css("pointer-events",""),g.each(b.thisNoteList,function(a,d){if(a.note_id==c.noteid)return b.thisNoteData=a,b.$domObj.find(".read-body .read-original-text").html(a.original),b.$domObj.find(".read-body .read-note-text").html(a.note_text),b.$domObj.find(".read-body .read-time").html(a.note_time),b.$domObj.find(".read-footer .read-page .read-current").html(d+1),b.$domObj.find(".read-footer .read-page .read-total").html(b.thisNoteList.length),b.thisNoteIndex=d,!1}),void("undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])))},h.prototype.reshowNote=function(){var a=this.opts;this._filterNote(a.thisNoteObj.chapterid);var b=a.thisNoteIndex;b>0?b-=1:b=b<a.thisNoteList.length?b:-1,a.thisNoteObj.noteid=b>-1?a.thisNoteList[b].note_id:-1,this.viewNote()},h.prototype._filterNote=function(a){var b=this.opts,c=[];b.thisNoteList=[];for(var d=0,e=b.noteData.chapter_list.length;d<e;d++)if(b.noteData.chapter_list[d].chapter_id==a){c=b.noteData.chapter_list[d].note_list;break}for(var f=0,g=c.length;f<g;f++)c[f].note_text&&"3"!=c[f].oparate_type&&b.thisNoteList.push(c[f])},h.prototype._prev=function(){var a=this,b=a.opts,c=b.thisNoteIndex;return b.thisNoteIndex=b.thisNoteIndex>0?b.thisNoteIndex-1:0,b.thisNoteObj.noteid=b.thisNoteList[b.thisNoteIndex].note_id,c!=b.thisNoteIndex&&void this.viewNote()},h.prototype._next=function(){var a=this,b=a.opts,c=b.thisNoteIndex,d=b.thisNoteList.length-1;return b.thisNoteIndex=b.thisNoteIndex<d?b.thisNoteIndex+1:d,b.thisNoteObj.noteid=b.thisNoteList[b.thisNoteIndex].note_id,c!=b.thisNoteIndex&&void this.viewNote()},h.prototype.editNote=function(){var a=this,b=a.opts;b.$domObj.trigger("detailDel:edit",b.thisNoteData)},h.prototype.deleteNote=function(){var a=this,b=a.opts;b.$domObj.trigger("detailDel:delete",b.thisNoteObj)},h.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},h.prototype._getShareItemsInfo=function(){var a=this.opts,c={flag:!1,share_items:[{type:"wx",flag:!1,share_cb:null},{type:"wx_moments",flag:!1,share_cb:null},{type:"sina_weibo",flag:!1,share_cb:null},{type:"qq",flag:!1,share_cb:null},{type:"qq_zone",flag:!1,share_cb:null}]},d={wx:{txt:"微信好友",icon_css:"read-icon-wx"},wx_moments:{txt:"微信朋友圈",icon_css:"read-icon-wx-pyq"},sina_weibo:{txt:"新浪微博",icon_css:"read-icon-wb"},qq:{txt:"qq好友",icon_css:"read-icon-qq"},qq_zone:{txt:"qq空间",icon_css:"read-icon-qzone"}},e=b.extend(!0,{},c,a.note_share_conf),f=[];if(e.flag)for(var g=e.share_items,h={},i="",j=0,k=g.length;j<k;j++)g[j].flag&&(i=g[j].type,h={flag:!0,icon_css:d[i].icon_css,txt:d[i].txt,type:i},f.push(h));return f},h.prototype._getCurrentNotInfo=function(){var a=this,b=a.opts,c={book_id:"",chapter_id:"",note_txt:""};try{c.book_id=b.api.opts.baseData.book_id||"",c.chapter_id=b.thisNoteObj.chapterid,c.note_txt=b.thisNoteData.original}catch(a){console.error("[panelDetail.js]"+a)}return c},h}(b,a,m,n,c,f),ja=function(a,b,c,d,e,f,g,h){var i=a._,j=function(a){var c={wrapObj:null,$readerObj:null,$contentObj:null,tmplHtml:"",isMobile:!0,data:null,chapter_id:"",editHtml:"",detailHtml:"",shareHtml:""};this.opts=b.extend(!0,{},c,a),this._init()};return j.prototype._init=function(){var a=this.opts;a.templObj=i.template(a.tmplHtml),a.$contentObj=a.$readerObj.find(".read-selector-main .read-content"),this.noteDialog=new f({$wrapDomObj:this.opts.$readerObj,okBtn:{txt:"确定",cssClass:"",func:function(){}},cancelBtn:{txt:"离开",cssClass:"",func:function(){}}})},j.prototype._bindEvent=function(){var a=this.opts,c=this,d=a.isMobile?"tap":"click";a.wrapObj.on(d,".read-note-time .read-icon",function(a){var d=b(this).parents(".read-one-chapter-notes"),e={chapterid:d.attr("data-chapterid"),noteid:b(this).parents(".read-note").attr("data-noteid")};c.delNote(e),a.stopPropagation()}),a.wrapObj.on(d,".read-original-text",function(c){var d=b(this).parents(".read-note").attr("data-percent");a.wrapObj.trigger("cbnnote:click",parseFloat(d)),c.stopPropagation()}),a.editObj.on("addnote:click",function(b,d){a.data=d.noteData,c.renderCbnPage(a.data),c.showNote(a.chapter_id,a.chapter_name),d.flag&&a.noteDetailObj.reshowNote(),d.sigleNote&&c._sendNote(d.sigleNote)}),a.noteDetailObj.on("detailDel:delete",function(a,b){c.delNote(b)}),a.noteDetailObj.on("detailDel:edit",function(b,d){d.chapter_id=a.chapter_id,c.editNote(d)})},j.prototype.renderLayout=function(a){var b=this.opts;b.data=a||{time_stamp:"0",note_list:[]},this.renderCbnPage(b.data),b.editObj=new c({$readerObj:b.$readerObj,editHtml:b.editHtml,isMobile:b.isMobile,api:b.api,saveFile:b.saveFile,filePath:b.filePath,noteData:b.data}),b.noteDetailObj=new d({$readerObj:b.$readerObj,detailHtml:b.detailHtml,shareHtml:b.shareHtml,isMobile:b.isMobile,api:b.api,saveFile:b.saveFile,filePath:b.filePath,noteData:b.data,note_share_conf:b.note_share_conf}),this._bindEvent()},j.prototype.renderCbnPage=function(a){var b=this.opts,c=!1,d=e.convertData(a.note_list,"note_list");a.chapter_list=d;var f={chapter_list:d,nowDate:""};if(f.chapter_list.length>0){for(var g=0,h=f.chapter_list.length;g<h;g++)if(f.chapter_list[g].note_count){c=!0;break}var i=e.getNowFormatDate();f.nowDate=i.substr(0,10);var j=b.templObj(f);b.wrapObj.html(j),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])}c||(b.wrapObj.find(".read-has-note").html("").hide(),b.wrapObj.find(".read-no-note").fadeIn())},j.prototype.cancelDel=function(){for(var a=this,c=a.opts,d=c.wrapObj.find(".read-has-note .read-note"),e=0;e<d.length;e++)if("true"==b(d[e]).attr("data-hasDel")){var f=b(d[e]).find(".read-note-del"),g=f.width();h(f[0]).translate(g,0).duration("0.2s").end(),b(d[e]).attr("data-hasDel","false")}},j.prototype.delNote=function(a){for(var b=this,c=this.opts,d=a.noteid,e=c.data.note_list,f="",h=null,i=0,j=e.length;i<j;i++)if(h=e[i],h.note_id==d){""==h.s_id?e.splice(i,1):(h.oparate_type="3",f=h.s_id);break}var k={time_stamp:c.data.time_stamp,note_list:c.data.note_list};c.saveFile(c.filePath,JSON.stringify(k)),b.renderCbnPage(c.data),c.noteDetailObj.opts.thisNoteObj&&c.noteDetailObj.reshowNote(),this.showNote(c.chapter_id,c.chapter_name),""!=f&&c.api.delNote({
note_id:d},function(a){b._updateSingleNote({s_id:"",note_id:a.note_id,time_stamp:a.time_stamp,oparate_type:3})},function(){c.isClient||(b.noteDialog.setMsg(g.noteDelFail),b.noteDialog.open(),h.oparate_type="0",b.renderCbnPage(c.data),c.noteDetailObj.opts.thisNoteObj&&(c.noteDetailObj._filterNote(c.chapter_id),c.noteDetailObj.opts.thisNoteObj.noteid=d,c.noteDetailObj.viewNote()),b.showNote(c.chapter_id,c.chapter_name))})},j.prototype.showNote=function(a,c){var d=this.opts,e=d.isMobile?"tap":"click";d.chapter_id=a,d.chapter_name=c;var f=[];d.$contentObj.find(".read-gli-note").removeClass("read-gli-note"),d.$contentObj.find(".read-gli-underline").removeClass("read-gli-underline"),d.$contentObj.find(".read-note-icon").remove();for(var g=d.data?d.data.chapter_list:[],h=0,i=g.length;h<i;h++)if(g[h].chapter_id==a){f=g[h].note_list.concat();break}var j=d.$contentObj.find("span[data-id]").first().attr("data-id"),k=d.$contentObj.find("span[data-id]").last().attr("data-id");j=parseInt(j),k=parseInt(k);var l=0,m=0,n=0,o="",p="",q=d.$contentObj.css("font-size");q=parseFloat(q.replace("px",""));for(d.$readerObj.offset().top,d.$readerObj.offset().left;f.length;)if(l=parseInt(f[0].firstId),m=parseInt(f[0].lastId),n=m,o=f[0].note_id,p=f[0].note_text,l=l>j?l:j,m=m<k?m:k,l>m)f.splice(0,1);else{if(""===p)for(var r=l;r<=m;r++)d.$contentObj.find('span[data-id="'+r+'"]').attr("data-noteid",o),d.$contentObj.find('span[data-id="'+r+'"]').hasClass("read-gli-note")||d.$contentObj.find('span[data-id="'+r+'"]').addClass("read-gli-underline");else{for(var r=l;r<=m;r++)d.$contentObj.find('span[data-id="'+r+'"]').attr("data-noteid",o).addClass("read-gli-note");if(m===n){var s=b('<div class="read-note-icon">'),t=d.$contentObj.find('span[data-id="'+m+'"]'),u=t.offset().top,v=t.offset().left,w=t.width();u=u<q?q:u,s.css({top:u-q+"px",left:v+w-q+"px"}).attr("data-noteid",o).attr("data-chapterid",a).on(e,function(a){d.noteDetailObj.open(b(this).data("noteid"),d.chapter_id),a.stopPropagation()}),d.$contentObj.eq(0).append(s)}}f.splice(0,1)}},j.prototype.addUnderline=function(a){var b=this.opts;if(b.$contentObj.find(".read-font-select").hasClass("read-gli-underline")||b.$contentObj.find(".read-font-select").hasClass("read-gli-note"))this.noteDialog.setMsg(g.noteError),this.noteDialog.open();else{b.$contentObj.find(".read-font-select").addClass("read-gli-underline");var c=b.data.note_list,d={chapter_id:b.chapter_id,chapter_name:b.chapter_name,s_id:"",note_id:e.getRandomKey(),original:a.original,note_text:"",note_time:e.getNowFormatDate(),firstId:a.firstId,lastId:a.lastId,note_page:a.note_page,oparate_type:"1",isSave:!1};b.$contentObj.find(".read-font-select").attr("data-noteid",d.note_id),c.push(d),this.renderCbnPage(b.data),this._sendNote(d)}},j.prototype.editNote=function(a){var b=this.opts;return a.isunderline||!b.$contentObj.find(".read-font-select").hasClass("read-gli-underline")&&!b.$contentObj.find(".read-font-select").hasClass("read-gli-note")?void b.editObj.open(a):(this.noteDialog.setMsg(g.noteError),this.noteDialog.open(),!1)},j.prototype._sendNote=function(a){function b(a,b){b&&(c.editObj.sucessDialog.setMsg(a),c.editObj.sucessDialog.open())}var c=this.opts,d=this,e={time_stamp:c.data.time_stamp,note_list:c.data.note_list};c.saveFile(c.filePath,JSON.stringify(e)),c.api.sendNote(a,function(c){console.info("[panelNotePc.js --> _sendNote] -- success!"),d._updateSingleNote({s_id:c.s_id,note_id:c.note_id,time_stamp:c.time_stamp,oparate_type:1}),b(g.noteSucess,""!=a.note_text),d._fallback(!0)},function(){var e=c.isClient?g.noteSucess:g.noteFail;""!=a.note_text||c.isClient?""!=a.note_text&&b(e,!0):(d.noteDialog.setMsg(g.noteFail),d.noteDialog.open()),d._fallback(c.isClient)})},j.prototype._fallback=function(a){for(var b=this.opts,c=b.data.note_list,d=!1,e=c.length-1;e>=0;e--)if(c[e].isSave===!1){delete c[e].isSave;var f=b.editObj.opts;a?f.thisNoteObj=null:(f.isEditNote?(c[e]=f.thisNoteObj,d=!0):f.thisNoteObj&&f.thisNoteObj.isunderline?c[e].note_text="":c.splice(e,1),this.renderCbnPage(b.data),this.showNote(b.chapter_id,b.chapter_name),d&&(b.noteDetailObj.opts.thisNoteObj.noteid=f.thisNoteObj.note_id,b.noteDetailObj._filterNote(b.chapter_id),b.noteDetailObj.viewNote()));break}},j.prototype._updateSingleNote=function(a){for(var b=this.opts,c=b.data.note_list,d=null,e=0,f=c.length;e<f;e++)if(d=c[e],d.note_id==a.note_id){"3"==a.oparate_type?c.splice(e,1):(d.s_id=a.s_id,d.oparate_type="0"),a.time_stamp&&(b.data.time_stamp=a.time_stamp);break}var g={time_stamp:b.data.time_stamp,note_list:b.data.note_list};b.saveFile(b.filePath,JSON.stringify(g))},j.prototype.batchUpdateNote=function(a,b,c){var d=this.opts;d.api.batchUpdateNote(a,function(a){"function"==typeof b&&b(a)},function(a){"function"==typeof c&&c(a)})},j.prototype.on=function(a,b){var c=this.opts;c.wrapObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},j}(b,a,ha,ia,c,m,n,f),ka=function(a,b,c,d,e,f,g){var h=a._,i=function(a){var b={wrapDomId:"",$readerObj:null,templHtml:"",templHeadHtml:"",templBodyHtml:"",templCatalogHtml:"",templNoteHtml:"",$domObj:null,$headerObj:null,$bodyObj:null,isMobile:!0,useBookmark:!0,useNote:!0,data:null},c=[{text:"目录",name:"catalog",state:"read-active",view:"read-catalog-body",prompt:"无目录"},{text:"笔记",name:"note",state:"",view:"read-note-body",prompt:"阅读时长按文字可添加笔记"},{text:"书签",name:"bookmark",state:"",view:"read-bookmark-body",prompt:"阅读时点击右上角的书签按钮即可添加书签"}];this.opts=e.extend(!0,{},b,a),this.opts.useBookmark||c.pop(),this.opts.useNote||c.splice(1,1);for(var d=this.opts.data,g=0,h=d.length;g<h;g++)d[g].view="read-custom-body",d[g].state=d[g].state||"";this.opts.data=c.concat(this.opts.data),this.opts.data.length>5&&(this.opts.data=this.opts.data.slice(0,5)),this.customFunc=[];for(var i=0;i<this.opts.data.length;i++){var j=this.opts.data[i].cbFunc||f.emptyFunc;this.customFunc.push(j)}this._init()};return i.prototype._init=function(){console.log("[panelCbn.js] --> _init! "),this._renderLayout(),this._bindEvent()},i.prototype._renderLayout=function(){var a=this.opts,f=h.template(a.templHtml),g=f();a.$domObj=e(g),a.$readerObj.append(a.$domObj),a.$headerObj=a.$domObj.find(".read-header-nav"),a.$bodyObj=a.$domObj.find(".read-body");var i=h.template(a.templHeadHtml),j=i(a.data);a.$headerObj.append(j);var k=h.template(a.templBodyHtml),l=k(a.data);a.$bodyObj.append(l);var m=a.$bodyObj.find(".read-catalog-body");this.$catalogWrapBody=m,this.catalogObj=new b({wrapObj:m,tmplHtml:a.templCatalogHtml,isMobile:a.isMobile});var n=a.$bodyObj.find(".read-bookmark-body");this.$bookmarkWrapBody=n,this.bookmarkObj=null;var o=a.$readerObj.find(".read-setting-panel .read-header .read-bookmark-btn");a.useBookmark&&(this.bookmarkObj=new c({wrapObj:n,$readerObj:a.$readerObj,tmplHtml:a.templBookmarkHtml,isMobile:a.isMobile,isClient:a.isClient,markDomObj:o,saveFile:a.saveFile,filePath:a.bookmarkFilePath,api:a.api}));var p=a.$bodyObj.find(".read-note-body");this.$noteWrapBody=p,this.noteObj=null,a.useNote&&(this.noteObj=new d({$readerObj:a.$readerObj,wrapObj:p,tmplHtml:a.templNoteHtml,isMobile:a.isMobile,isClient:a.isClient,saveFile:a.saveFile,filePath:a.noteFilePath,editHtml:a.editHtml,detailHtml:a.detailHtml,shareHtml:a.shareHtml,api:a.api,note_share_conf:a.note_share_conf}))},i.prototype._bindEvent=function(){var a=this.opts,b=a.isMobile?"tap swipeLeft":"click",c=this;a.$domObj.find(".read-cbn-cover").on(b,function(){c.close()});var d=null;a.$headerObj.on(b,"div",function(){var b=e(this).index();e(this).addClass("read-active").siblings().removeClass("read-active"),d=a.$bodyObj.children().eq(b),d.removeClass("read-hide").siblings().addClass("read-hide"),d.hasClass("read-custom-body")&&c.customFunc[b](d)}),this.$catalogWrapBody.on("catalog:click",function(b,c){console.log("[panelCbn.js] 你点击了目录! -> id:"+c.id+", status:"+c.status),a.$domObj.trigger("cbncatalog:click",c)}),this.$bookmarkWrapBody.on("bookmark:click",function(b,c){console.log("[panelCbn.js] 你点击了书签 -! ->"),a.$domObj.trigger("cbnbookmark:click",c)})},i.prototype.getPanelObject=function(){},i.prototype.getCustomNavBody=function(a){console.log("[CbnPanel] --> getCustomNavBody")},i.prototype.renderCatalog=function(a){this.catalogObj.renderLayout(a)},i.prototype.renderBookmark=function(a){this.bookmarkObj.renderLayout(a)},i.prototype.updateBookmarks=function(a){console.log("[panelCbn.js]--> updateBookmarks"),f.hasFunction(this.bookmarkObj,"updateBookmarks")&&this.bookmarkObj.updateBookmarks(a)},i.prototype.getBookmarkData=function(){return console.log("[panelCbn.js]--> getBookmarkData"),this.bookmarkObj.getBookmarks()},i.prototype.showBookmark=function(a){console.log("[panelCbn.js]--> showBookmark"),f.hasFunction(this.bookmarkObj,"isShowBookmark")&&this.bookmarkObj.isShowBookmark(a)},i.prototype.renderNote=function(a){this.noteObj.renderLayout(a)},i.prototype.open=function(){var a=this.opts;a.$domObj.show();var b=a.$domObj.find(".read-cbn-view");setTimeout(function(){g(b[0]).set("left","0").duration("0.5s").end()},10)},i.prototype.close=function(){var a=this.opts,b=a.$domObj.find(".read-cbn-view");g(b[0]).set("left","-100%").duration("0.5s").end(),setTimeout(function(){a.$domObj.fadeOut()},400)},i.prototype.on=function(a,b){var c=this.opts;c.$domObj.on(a,function(a,c){"function"==typeof b&&b(a,c)})},i}(b,l,ga,ja,a,c,f),la=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,complainHtml:"",$domObj:null,isMobile:!0,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[ComplaintPanel] --> _init"),this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},h.prototype._renderLayout=function(){var a=this.opts,c=g.template(a.complainHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-content textarea"),d=b.isMobile?"tap":"click";c.on("focus",function(){a.hideCanelBox()}),b.$domObj.find(".read-cancel-btn").on(d,function(){var b=c.val();c.blur(),a.cancel(b)}),b.$domObj.find(".read-canel-box-cont").on(d,function(){a.hideCanelBox(),c.focus()}),b.$domObj.find(".read-canel-box-leave").on(d,function(){a.close()}),b.$domObj.find(".read-send-btn").on(d,function(){var b=c.val();c.blur(),a.sendComplaint(b)})},h.prototype.open=function(){var a=this,b=a.opts;b.$domObj.fadeIn()},h.prototype.cancel=function(a){var b=this;b.opts;a?b.showCanelBox():b.close()},h.prototype.showCanelBox=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-canel-box"),d=parseFloat(c.css("font-size"));c.show(),setTimeout(function(){f(c[0]).set("height",d+"px").duration("0.2s").end()},10)},h.prototype.hideCanelBox=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-canel-box");f(c[0]).set("height",0).duration("0.2s").end(),setTimeout(function(){c.hide()},200)},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-pad-content textarea").val(""),a.hideCanelBox(),b.$domObj.hide()},h.prototype.sendComplaint=function(a){var b=this,f=b.opts,g=f.$domObj.find(".read-header .read-send");if(b.sucessDialog=new c({$wrapDomObj:this.opts.$domObj,okBtn:{txt:"确定",cssClass:"",func:function(){b.close()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close()}}}),0!=a.length){var h=e.getTimestamp(),i=g.attr("data-complaint")?h-g.attr("data-complaint"):h;i>20?(f.loading.setMsg(d.dealWith),f.loading.open(),f.api.sendComplaint({complaint_val:a},function(a){f.loading.close(),a.status?(b.sucessDialog.setMsg(d.compSucess),b.sucessDialog.open(),g.attr("data-complaint",e.getTimestamp())):(b.sucessDialog.setMsg(a.error),b.sucessDialog.open())},function(){f.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(b.dialog.setMsg(d.compInterval),b.dialog.open())}else b.dialog.setMsg(d.inputContent),b.dialog.open()},h}(b,a,m,n,c,f),ma=function(a,b,c,d,e){var f=a._,g='<% _.each(obj, function(search){  %><div class="read-one-history"><span class="read-font read-lf"><%= search.keyword %></span><span class="read-time read-rt"><%= search.time %></span></div><% }); %>',h='<% _.each(obj.search_list, function(search_list){  %><div class="read-one-result read-cf" data-site="<%= search_list.search_page %>"><div class="read-title"><%= search_list.chapter_name %></div><div class="read-content"><%= search_list.search_text %></div><div class="read-site read-rt"><%= (parseFloat(search_list.search_page)*100).toFixed(4) + "%" %></div></div><% }); %>',i=function(a){var c={$readerObj:null,searchHtml:"",$domObj:null,isMobile:!0,api:null,hisTempl:f.template(g),searchResTempl:f.template(h)};this.opts=b.extend(!0,{},c,a),this._init()};return i.prototype._init=function(){console.log("[SearchPanel] --> _init");var a=this.opts;a.isClient?this.sendSearch=this.sendSearchOffline:this.sendSearch=this.sendSearchOnline,this._renderLayout(),this._bindEvent(),this.dialog=new c({$wrapDomObj:this.opts.$domObj})},i.prototype._renderLayout=function(){var a=this.opts,c=f.template(a.searchHtml),d=c();a.$domObj=b(d),a.$readerObj.append(a.$domObj)},i.prototype._bindEvent=function(){var a=this,c=a.opts,d=c.isMobile?"tap":"click";c.$domObj.find(".read-header .read-search-back").on(d,function(){c.$domObj.find(".read-header .read-search-ipt").blur(),a.close()}),c.$domObj.find(".read-header .read-search-btn").on(d,function(){var b=c.$domObj.find(".read-header .read-search-ipt input").val();a.sendSearch(b)}),c.$domObj.on(d,".read-history-content .read-one-history",function(c){console.log("[panelSearch.js] -- > 点击搜索历史");var d=b(this).find(".read-font").text();a.sendSearch(d)}),c.$domObj.on(d,".read-search-history .read-clear-history",function(b){console.log("[panelSearch.js] -- > 点击清空搜索历史"),c.$domObj.find(".read-history-content").html(""),c.$domObj.find(".read-search-history").hide(),a.delSearchHis()}),c.$domObj.on(d,".read-one-result",function(d){console.log("[panelSearch.js] -- > 点击搜索历史"),a.close(),c.$domObj.trigger("search:click",parseFloat(b(this).attr("data-site")))})},i.prototype.open=function(){var a=this,b=a.opts;b.$domObj.fadeIn(),b.api.getSearchHistory({},function(a){if(0!=a.search_history.length){var c=b.hisTempl(a.search_history);b.$domObj.find(".read-search-history").show().find(".read-history-content").html(c)}},function(){})},i.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-search-history").hide(),b.$domObj.find(".read-search-result").hide(),b.$domObj.find(".read-header .read-search-ipt input").val(""),b.$domObj.fadeOut()},i.prototype.sendSearchOffline=function(a){var b=this,c=b.opts;"function"!=typeof gli_search_offline?b.sendSearchOnline(a):0!=a.length?(c.loading.open(),c.loading.setMsg(d.nowSearch),gli_search_offline({keyword:a},function(a){if(c.loading.close(),0!=a.length){c.$domObj.find(".read-search-history").hide();var b=c.searchResTempl(a);c.$domObj.find(".read-search-result").show().html(b)}},function(){c.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(console.log("%c [panelSearch] sendSearch--> 请输入搜索内容","color:red;"),b.dialog.setMsg(d.inputContent),b.dialog.open())},i.prototype.sendSearchOnline=function(a){var b=this,c=b.opts;0!=a.length?(c.loading.open(),c.loading.setMsg(d.nowSearch),c.api.search({keyword:a},function(e){var f=e.data;if(c.loading.close(),e.status)if(f.search_list.length>0){c.$domObj.find(".read-search-history").hide();var g=c.searchResTempl(f);c.$domObj.find(".read-search-result").show().html(g),c.$readerObj.attr("data-searchKword",a)}else b.dialog.setMsg(d.emptySearch),b.dialog.open();else b.dialog.setMsg(e.msg),b.dialog.open()},function(){c.loading.close(),b.dialog.setMsg(d.sendError),b.dialog.open()})):(b.dialog.setMsg(d.inputContent),b.dialog.open(),console.log("%c [panelSearch] sendSearch--> 请输入搜索内容","color:red;"))},i.prototype.delSearchHis=function(){var a=this,b=a.opts;b.api.delSearchHis({},function(){console.log("%c [panelSearch] 清除历史搜索成功","background:green;")},function(){})},i}(b,a,m,n,f),na=function(a,b,c,d,e,f){var g=a._,h=function(a){var c={$readerObj:null,correctHtml:"",$domObj:null,isMobile:!0,api:null};this.opts=b.extend(!0,{},c,a),this._init()};return h.prototype._init=function(){console.log("[CorrectPanel] --> _init"),this._renderLayout(),this._bindEvent()},h.prototype._renderLayout=function(){var a=this.opts,d=g.template(a.correctHtml),e=d();a.$domObj=b(e),a.$readerObj.append(a.$domObj),this.tips=new c({parentObj:a.$readerObj[0]})},h.prototype._bindEvent=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-content textarea"),d=b.isMobile?"tap":"click";b.$domObj.find(".read-pad-body-header .read-cancel-btn").on(d,function(){var b=c.val().trim();c.blur(),a.cancel(b)}),b.$domObj.find(".read-pad-body-header .read-send-btn").on(d,function(){var b=c.val().trim();c.blur(),a.sendCorrect(b)}),b.$domObj.find(".read-canel-box-cont").on(d,function(){a.hideCanelBox(),c.focus()}),b.$domObj.find(".read-canel-box-leave").on(d,function(){a.close()}),b.$domObj.find(".read-pad-content textarea").on("focus",function(){a.hideCanelBox()})},h.prototype.open=function(a){var b=this.opts;b.thisNoteObj=a,b.first=!0,b.$domObj.fadeIn(),b.$domObj.find(".read-pad-content .read-original-text").html(a.original),"undefined"!=typeof MathJax&&MathJax.Hub.Queue(["Typeset",MathJax.Hub])},h.prototype.cancel=function(a){this.opts;a?this.showCanelBox():this.close()},h.prototype.showCanelBox=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-canel-box"),d=parseFloat(c.css("font-size"));c.show(),setTimeout(function(){f(c[0]).set("height",d+"px").duration("0.2s").end()},10)},h.prototype.hideCanelBox=function(){var a=this,b=a.opts,c=b.$domObj.find(".read-pad-canel-box");f(c[0]).set("height",0).duration("0.2s").end(),setTimeout(function(){c.hide()},200)},h.prototype.close=function(){var a=this,b=a.opts;b.$domObj.find(".read-pad-content textarea").val(""),a.hideCanelBox(),b.$domObj.hide()},h.prototype.sendCorrect=function(a){var b=this,c=this.opts;b.dialog=new e({$wrapDomObj:this.opts.$domObj,okBtn:{txt:"确定",cssClass:"",func:function(){b.dialog.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close(),b.dialog.destroy()}}});var f={chapter_id:c.thisNoteObj.chapter_id,chapter_name:c.thisNoteObj.chapter_name,percent:c.thisNoteObj.note_page,original:c.thisNoteObj.original,correctVal:a};if(a){var g=new e({$wrapDomObj:this.opts.$domObj,okBtn:{txt:"确定",cssClass:"",func:function(){b.close(),g.destroy()}},cancelBtn:{txt:"离开",cssClass:"",func:function(){b.close(),g.destroy()}}});c.api.sendCorrect(f,function(){g.setMsg(d.correctSucess),g.open()},function(a){console.warn(a),b.dialog.setMsg(d.sendError),b.dialog.open()})}else b.dialog.setMsg(d.correctError),b.dialog.open()},h}(b,a,F,n,m,f),oa=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=c.LOG,x=function(a){w.log("[reader.js] --> 构造函数! ");var d={domWrapId:"",hostUrl:"",book_id:"",passData:null,user_id:"",downloadPath:"download/books",isEncrypt:!1,isOnlyDownload:!1,isClient:!0,isMobile:!0,isDownloadImg:!0,pagingType:"page_1",isNightMode:!1,useEpubFile:!1,usePublish:!0,useBookmark:!0,useNote:!0,useCorrect:!0,useComplaint:!0,useSearch:!0,useExit:!0,useFonts:!0,useBgColor:!0,useLight:!0,usePageWay:!0,useEpubStyle:!0,useVideo:!0,useProbation:!1,bookOpenTime:"",note_share_conf:{flag:!1},historyData:{page_offset:105},license_id:"doc_110220330",server:"server_101010101010",custom_nav_menus:[],getDataCb:c.emptyFunc,getCatalogCb:c.emptyFunc,probotionCb:null,allChapterFalseCb:null,exitReaderCb:c.emptyFunc,downloadCb:c.emptyFunc,getDisableChaptCb:c.emptyFunc,_useLayout:!0,$readerWrap:null,$readerObj:null,_minW:300,_minH:500,_downloadState:{state:!0,rate:0},totalLen:0,chapt_index:0,page_index:0,pageColumn:1,chapts:null};this.opts=b.extend(!0,{},d,a),this.opts.data={catalog:null,readableChapter:null,progressData:null,settingData:null,copyright:null},this.LoadingObj=new l({domSelector:this.opts.domWrapId,msg:r.loading}),this.DialogObj=new q({$wrapDomObj:b(this.opts.domWrapId)}),this._init()};return x.prototype._init=function(){var a=this.opts;this._check(),a.bookOpenTime=c.getTimestamp(),this.ApiObj=new d({baseData:{hostUrl:a.hostUrl,book_id:a.book_id,user_id:a.user_id,use_file_url:a.useEpubFile},passData:a.passData}),a.isClient?(this.getCatalog=this._getCatalogOffline,this.getBookmark=this._getBookmarkOffline,this.getNote=this._getNoteOffline,this.getChapterContent=this._getChapterOffline):(this.getCatalog=this._getCatalogOnline,this.getBookmark=this._getBookmarkOnline,this.getNote=this._getNoteOnline,this.getChapterContent=this._getChapterOnline),this._refresh(),this._renderLayout()},x.prototype._check=function(){var a=this.opts;a.$readerWrap=b(a.domWrapId),a.isOnlyDownload||""==a.domWrapId||0==a.length||a.$readerWrap.width()<a._minW||a.$readerWrap.height()<a._minH?a._useLayout=!1:(a._useLayout=!0,a.$readerObj=b("<div class='read-reader-pad' />"),a.$readerWrap.append(a.$readerObj),this._setFontSize())},x.prototype._refresh=function(){var a=this.opts;a.isEncrypt?(this.saveFile=c._saveFileEncrypt,this.readFile=this._readFileDec):(this.saveFile=c._saveFileCommon,this.readFile=c._readFileCommon),a.isClient||(this.saveFile=c.emptyFunc,""==a.user_id&&(a.useNote=!1,a.useBookmark=!1))},x.prototype._readFileDec=function(a,d){var e=this.opts,f={license_id:e.license_id,server:e.server},g={license_id:p.license_id,server:p.server},h=b.extend(!0,{},g,f);c._readFileDecrypt(h,a,d)},x.prototype._renderLayout=function(){var a=this.opts;this.mainpage=null,this.cbnpage=null,this.settingpage=null,this.countPageObj=null,this.complainpage=null,this.searchpage=null,this.promptPage=null,this.viewImgPage=null,this._renderCatalog(),a._useLayout&&(this._renderBookmark(),this._renderNote(),this._renderPromptPage(),this._renderSetting(),this._renderMainpage(),this._renderCopyright(),this._renderComplaint(),this._renderCorrect(),this._renderSearch(),this._renderCountpage(),this._renderViewImgPage(),this._renderVideoPage(),this._renderSelect())},x.prototype._renderMainpage=function(){var a=this.opts,b=this,d=e.getTempl("main");this.mainpage=new f({$readerObj:a.$readerObj,templHtml:d,isMobile:a.isMobile,usePublish:a.usePublish,pageColumn:a.pageColumn}),this.mainpage.on("mainpanel:left",function(){b.pre(),b.selectObj.close()}),this.mainpage.on("mainpanel:middle",function(){b.settingpage.open(),b.selectObj.close()}),this.mainpage.on("mainpanel:right",function(){b.next(),b.selectObj.close()}),this.mainpage.on("mainpanel:showBookmark",function(a,c){b.cbnpage.showBookmark(c)}),this.mainpage.on("mainpanel:img",function(c,d){b.viewImgPage.setOptions({imgSet:a.chapts[a.chapt_index].images,currentIdx:parseInt(d.currentIdx)}),b.viewImgPage.open()}),this.mainpage.on("mainpanel:video",function(c,d){a.useVideo&&b.videoPage.open(d)}),this.mainpage.on("mainpanel:showNote",function(){var d=a.chapts[a.chapt_index].chapter_id,e=a.chapts[a.chapt_index].chapter_name;c.hasFunction(b.cbnpage.noteObj,"showNote")&&b.cbnpage.noteObj.showNote(d,e)}),"undefined"!=typeof gli_keydown_event&&"function"==typeof gli_keydown_event&&(gli_keydown_event(1,function(){b.pre()},!0),gli_keydown_event(2,function(){b.next()},!0),gli_keydown_event(0,function(){b.exit()},!0))},x.prototype._renderCopyright=function(){var a=this.opts,b=this;this.copyrightObj=new n({$readerObj:a.$readerObj,isMobile:a.isMobile,coprData:p.copyright,api:b.ApiObj}),this.copyrightObj.on("Copyright:saveCoprParam",function(a,c){b.opts.data.copyright=c,b._saveCopyright()}),this.copyrightObj.on("Copyright:getCoprParam",function(){b._getCoprDataOffline(function(a){b.opts.data.copyright=a.coprData,b.copyrightObj.opts.copyright=a.coprData,b.copyrightObj.run()},function(){b.copyrightObj.run()})}),this.copyrightObj.on("Copyright:exitReaderCb",function(){b.exit()})},x.prototype._renderSelect=function(){function a(a){var d=b.chapts[b.chapt_index];a.chapter_id=d.chapter_id,a.chapter_name=d.chapter_name;var e=2==a.currPage?b.page_index:b.page_index-1;return a.note_page=a.posLen/b.totalLen+parseFloat(c.countPageObj.getHeadPerc(e)),a.note_page=a.note_page.toFixed(4),delete a.posLen,delete a.currPage,a}var b=this.opts,c=this;this.selectObj=new s({$readerObj:b.$readerObj,isMobile:b.isMobile,clientType:b.clientType,coprObj:c.copyrightObj,useNote:b.useNote,useCorrect:b.useCorrect,pageColumn:b.pageColumn}),this.selectObj.on("Select:addUnderline",function(b,d){var e=a(d);c.cbnpage.noteObj.addUnderline(e)}),this.selectObj.on("Select:delUnderline",function(a,d){c.cbnpage.noteObj.delNote({chapterid:b.chapts[b.chapt_index].chapter_id,noteid:d})}),this.selectObj.on("Select:addNote",function(b,d){var e=a(d);c.cbnpage.noteObj.editNote(e)}),this.selectObj.on("Select:correct",function(b,d){var e=a(d);c.correctpage.open(e)})},x.prototype._renderComplaint=function(){var a=this.opts,b=this,c=e.getTempl("complain");b.complainpage=new i({$readerObj:a.$readerObj,complainHtml:c,isMobile:a.isMobile,api:b.ApiObj,loading:b.LoadingObj})},x.prototype._renderCorrect=function(){var a=this.opts,b=this,c=e.getTempl("correct");b.correctpage=new t({$readerObj:a.$readerObj,correctHtml:c,isMobile:a.isMobile,api:b.ApiObj})},x.prototype._renderSearch=function(){var a=this.opts,b=this,c=e.getTempl("search");b.searchpage=new j({$readerObj:a.$readerObj,searchHtml:c,isMobile:a.isMobile,isClient:a.isClient,api:b.ApiObj,loading:b.LoadingObj}),b.searchpage.opts.$domObj.on("search:click",function(a,c){console.log("[reader.js] -> search:click 触发事件, 点击搜索结果跳转! "),b.countPageObj.turnPageByPerc(c)})},x.prototype._renderCatalog=function(){var a=this.opts,c=this;this.getCatalog(function(d){a.data.catalog=d,w.info("成功读取 目录数据 !","background:yellow;"),a.totalLen=parseInt(d.word_count),a.chapts=b.extend(!0,[],d.chapter);var f=b.extend(!0,[],d);if(a._useLayout){w.info("执行 【渲染布局】!");for(var g=0,i=0,j=f.chapter,k=0,l=j.length;k<l;k++)i+=j[k].textlen,j[k].textlen=i,0==j[k].chapter_status&&g++;g==j.length&&(c.LoadingObj.close(),null!=a.allChapterFalseCb?a.allChapterFalseCb():(c.DialogObj.setMsg(r.noReadContent),c.DialogObj.open())),c._checkPaging();var m=e.getTempl("cbn"),n=e.getTempl("cbnNavMenu"),o=e.getTempl("cbnNavBody"),p=e.getTempl("catalog"),q=e.getTempl("bookmark"),s=e.getTempl("note"),t=e.getTempl("noteEdit"),u=e.getTempl("noteDetail"),v=e.getTempl("noteShare"),x=c._getCachePath({fileName:"bookmark"}),y=c._getCachePath({fileName:"note"});c.cbnpage=new h({wrapDomId:a.domWrapId,$readerObj:a.$readerObj,templHtml:m,templHeadHtml:n,templBodyHtml:o,templCatalogHtml:p,templBookmarkHtml:q,templNoteHtml:s,isMobile:a.isMobile,isClient:a.isClient,saveFile:c.saveFile,bookmarkFilePath:x,noteFilePath:y,data:a.custom_nav_menus,api:c.ApiObj,useBookmark:a.useBookmark,useNote:a.useNote,editHtml:t,detailHtml:u,shareHtml:v,note_share_conf:a.note_share_conf}),c.cbnpage.renderCatalog(f),c.cbnpage.on("cbnbookmark:click",function(a,b){c.cbnpage.close(),c.countPageObj.turnPageByPerc(b)}),c.cbnpage.on("cbnnote:click",function(a,b){c.cbnpage.close(),c.countPageObj.turnPageByPerc(b)}),c.cbnpage.on("cbncatalog:click",function(b,d){var e=a.chapt_index,f=c.countPageObj.searchChaptIndex(d.id);return a.chapts[f].chapter_status?(e!==f&&c.countPageObj.turnChapter(f),void c.cbnpage.close()):(console.log("[reader.js] -->章节"+d.id+"无权限！"),a.getDisableChaptCb(),!1)})}},function(){w.info("[reader.js] --> _renderCatalog --> 渲染目录，获取目录信息失败!"),a.isClient?(w.info("[APP阅读] 本地无目录信息, 执行下载 !","background:pink;"),c.download(),c.LoadingObj.setMsg(r.downloadBooks)):(c.LoadingObj.close(),c.DialogObj.setMsg(r.checkNetwork),c.DialogObj.open())})},x.prototype._renderSetting=function(){function a(){}function b(){console.info("%c innerSuccessCb","background:yellow;");var a=e.getTempl("setting"),b=e.getTempl("fontlight"),l=e.getTempl("progress");j.settingpage=new g({wrapDomId:i.domWrapId,$readerObj:i.$readerObj,templHtml:a,fontlightHtml:b,progressHtml:l,isMobile:i.isMobile,progressData:k.progressData.progress,settingData:k.settingData,isNightMode:k.settingData.isNightMode,useBookmark:i.useBookmark,useComplaint:i.useComplaint,useSearch:i.useSearch,useExit:i.useExit,useFonts:i.useFonts,useBgColor:i.useBgColor,useLight:i.useLight,usePageWay:i.usePageWay}),j.settingpage.on("cbn:click",function(){console.log("[reader.js] -> 触发事件, 打开目录面板! "),j.cbnpage.open()}),j.settingpage.on("bookmark:click",function(a,b){console.log("[reader.js] --> bookmark:click 添加书签!! ");var c=i.chapts[i.chapt_index],d={bookmarkDom:b,pageSite:j.countPageObj.getFootPerc(),text:c.pages[i.page_index-1].txt,chapterId:c.chapter_id,chapterName:c.chapter_name};j.cbnpage.updateBookmarks(d)}),j.settingpage.on("progress:setVal",function(){console.log("[reader.js] -> 触发事件, 弹出进度条! ");var a=j.countPageObj.getFootPerc()||0;j.settingpage.$progressObj.setValue(a)}),j.settingpage.on("progress:click",function(a,b){console.log("[reader.js] -> 触发事件, 拖动定位! "),j.countPageObj.turnPageByPerc(b)}),j.settingpage.on("progress:prev",function(){var a=i.chapt_index-1;return a<0?(a=0,!1):i.chapts[a].chapter_status?(j.countPageObj.turnChapter(a),void console.log("[reader.js] -> 触发事件, 章节向前翻! ")):(console.log("[reader.js] -->章节:"+i.chapts[a].chapter_name+"无权限！"),i.getDisableChaptCb(),!1)}),j.settingpage.on("progress:next",function(){var a=i.chapt_index+1;return a===i.chapts.length?(a-=1,!1):i.chapts[a].chapter_status?(j.countPageObj.turnChapter(a),void console.log("[reader.js] -> 触发事件, 章节向后翻! ")):(console.log("[reader.js] -->章节:"+i.chapts[a].chapter_name+"无权限！"),i.getDisableChaptCb(),!1)}),j.settingpage.on("font:click",function(){console.log("[reader.js] -> 触发事件, 设置-字体, 亮度 等! ")});var m=k.settingData.fontSize;c({oldValue:m.value,newValue:m.value}),j.settingpage.on("size:click",function(a,b){console.log("[reader.js] -> 字体大小! "),c(b)}),j.settingpage.on("complaint:click",function(){console.log("[reader.js] -> 触发事件, 打开版权投诉面板! "),j.complainpage.open()}),j.settingpage.on("showSearch:click",function(){console.log("[reader.js] -> 触发事件, 打开搜索面板! "),j.searchpage.open()}),j.settingpage.on("pageway:click",function(a,b){console.log("[reader.js] -> 触发事件, 翻页方式 "+b.newValue),i.pagingType=b.newValue,i.$readerObj.attr("data-pageway",i.pagingType)});var n=k.settingData.fontFamily;d({oldValue:n.value,newValue:n.value}),j.settingpage.on("family:click",function(a,b){w.info("[reader.js] -> 字体类型! "),d(b)});var o=k.settingData.bgColor;f({oldValue:o.value,newValue:o.value}),j.settingpage.on("bgcolor:click",function(a,b){w.info("[reader.js] -> 背景颜色! "),f(b)}),i.isNightMode=k.settingData.isNightMode,h(),j.settingpage.on("night:click",function(a,b){w.info("[reader.js] -> 夜间模式切换! "),i.isNightMode=b,h()}),j.settingpage.on("close:click",function(){console.log("[reader.js] -> 捕获事件, 关闭面板! "),j._saveSettingFile()}),j.settingpage.on("out:click",function(){console.log("[reader.js] -> 捕获事件, 退出阅读器! "),j.exit()})}function c(a){j._deletePages(),j.mainpage.setFontSize(a),j.countPageObj.setFontSize(a)}function d(a){j._deletePages(),j.mainpage.setFontFamily(a),j.countPageObj.setFontFamily(a)}function f(a){j.mainpage.setBgColor(a)}function h(){i.isNightMode?i.$readerObj.addClass("read-night"):i.$readerObj.removeClass("read-night")}console.info("%c _renderSetting","background:yellow;");var i=this.opts,j=this,k=i.data;j._getProgressDataOffline(function(c){j._getProgressDataOnline(function(d){parseInt(d.bookCloseTime)>parseInt(c.progressData.updateTime)?k.progressData={updateTime:d.bookCloseTime,progress:d.progress}:k.progressData=c.progressData,j._getSettingDataOffline(function(a){k.settingData=a.settingData,b()},function(){a()})},function(){k.progressData=c.progressData,j._getSettingDataOffline(function(a){k.settingData=a.settingData,b()},function(){a()})})},function(){a()})},x.prototype._checkPaging=function(){var a=this,b=this.opts;setTimeout(function(){if(null==b.data.progressData||null==b.data.settingData)a._checkPaging();else{if(b.isClient){var c=gli_get_cache_path()+a._getCachePath({fileName:""})||"";c=c.substr(0,c.lastIndexOf("."))}else var c="";a.countPageObj.begin({totalLen:b.totalLen,chapts:b.chapts,chapt_index:b.chapt_index,progressData:b.data.progressData,path:c}),"function"==typeof gli_device_orientation&&setTimeout(function(){gli_device_orientation(function(b){Math.abs(b-90)<45||Math.abs(b-270)<45?a.changePageColumn(1):a.changePageColumn(2);
},500)},1e3)}},800)},x.prototype._renderCountpage=function(){var a=this,b=this.opts,c=e.getTempl("countpage");this.countPageObj=new k({templHtml:c,$readerObj:b.$readerObj,isMobile:b.isMobile,clientType:b.clientType,isClient:b.isClient,pageColumn:b.pageColumn,useEpubStyle:b.useEpubStyle,useProbation:b.useProbation}),this.delicateObj=new u({wrapDomObj:b.$readerObj.find(".read-delicate")[0]});this.countPageObj.on("countpage:getChapterContent",function(b,c){a._pagingChapter(c)}),this.countPageObj.on("countpage:showPage",function(c,d){b.usePublish&&(d.chapterContent=a.delicateObj.excute({html:d.chapterContent}),2==b.pageColumn&&(d.secondPage=a.delicateObj.excute({html:d.secondPage}))),a._showPage(d)}),this.countPageObj.on("countpage:finish",function(c,d){var e=b.chapts[d],f=a.countPageObj.getPagingData();e.pages=f.pages,e.images=f.images,e.html=f.html,e.isPretreat=f.isPretreat,b.getDataCb()}),this.countPageObj.on("countpage:already",function(){a.LoadingObj.close(),0===b.data.settingData.readTimes&&(a.promptPage.open(0),b.data.settingData.readTimes++)}),this.countPageObj.on("countpage:downloadPhoto",function(b,c){a._downloadPhoto(c)}),this.countPageObj.on("countpage:noright",function(c,d){null!=b.probotionCb?b.probotionCb():(a.DialogObj.setMsg(r.testReadOver),a.DialogObj.open())})},x.prototype._renderViewImgPage=function(){var a=this.opts;this.viewImgPage=new o({$wrapObj:a.$readerObj,dataTempl:e.getTempl("viewImg"),isClient:a.isClient,isMobile:a.isMobile,clientType:a.clientType,isDownloadImg:a.isDownloadImg})},x.prototype._renderVideoPage=function(){var a=this.opts;a.useVideo&&(this.videoPage=new v({$readerObj:a.$readerObj,videoTemplHtml:e.getTempl("video"),isClient:a.isClient,isMobile:a.isMobile,clientType:a.clientType}))},x.prototype._renderPromptPage=function(){var a=this.opts;this.promptPage=new m({$wrapObj:a.$readerObj,isMobile:a.isMobile,contentSet:[e.getTempl("firstOpen"),"<div class='read-content'> TEST_2 !</div>"]})},x.prototype._setFontSize=function(){var a=this.opts,b=a.$readerWrap.width();a.$readerWrap.css("font-size",b/10.24+"px")},x.prototype._getCatalogOffline=function(a,b){var d=(this.opts,this._getCachePath({fileName:"catalog"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},x.prototype._getCatalogOnline=function(a,b){this.ApiObj.getBookCatalog({},function(b){a(b)},function(a){b(a)})},x.prototype._getBookmarkOffline=function(a,b){w.log("[reader.js] -> _getBookmarkOffline! ");var d=(this.opts,this._getCachePath({fileName:"bookmark"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},x.prototype._getBookmarkOnline=function(a,b){w.log("[reader.js] -> _getBookmarkOnline! "),this.ApiObj.getBookmark({},function(b){a(b)},function(a){console.warn("[reader.js]--获取书签信息失败!"),b(a)})},x.prototype._renderBookmark=function(){var a=this.opts,b=this;if(a.useBookmark)return b.cbnpage?void this.getBookmark(function(d){function e(){b._getBookmarkOnline(function(a){var c=b._getCachePath({fileName:"bookmark"}),d=JSON.stringify(a);b.saveFile(c,d),b.cbnpage.renderBookmark(a)},function(){b.cbnpage.renderBookmark(d)})}if(w.info("成功读取 书签数据 !","background:yellow;"),a.isClient){var f=c.filterLocalData(d.bookmark_list);0==f.length?e():b.ApiObj.batchUpdateBookmark({time_stamp:d.time_stamp,mark_list:f},function(a){e()},function(a){b.cbnpage.renderBookmark(d)})}else b.cbnpage.renderBookmark(d)},function(){w.warn("[reader.js] --> _renderBookmark --> 渲染书签，获取书签信息失败!"),a.isClient?(w.info("[APP阅读] 本地无书签信息, 执行下载 !","background:pink;"),b.downloadBookmark()):b.cbnpage.renderBookmark()}):void setTimeout(function(){b._renderBookmark()},1e3)},x.prototype.downloadBookmark=function(){var a=this,b=this.opts;w.log("[PAD.js] -> downloadBookmark "+b.book_id);var c=a._getCachePath({fileName:"bookmark"});this._getBookmarkOnline(function(b){w.log("成功下載 书签 并 保存!");var d=JSON.stringify(b);a.saveFile(c,d),setTimeout(function(){a._renderBookmark()},300)},function(a){w.warn("[PAD.js] -> downloadBookmark "+a)})},x.prototype._getNoteOffline=function(a,b){w.log("[reader.js] -> _getNoteOffline! ");var d=(this.opts,this._getCachePath({fileName:"note"}));this.readFile(d,function(d){null==d?b():(d=c.doDecodeData(d),a(JSON.parse(d)))})},x.prototype._getNoteOnline=function(a,b){w.log("[reader.js] -> _getNoteOnline! "),this.ApiObj.getBookNote({},function(b){a(b)},function(a){w.warn("[reader.js]--获取笔记信息失败!"),b(a)})},x.prototype._getSettingDataOffline=function(a,b){var d=this,e=d.opts,f={};if(!e.isClient)return f.settingData=p.settingData,void a(f);var g=this._getCachePath({fileName:"settingPanel",bid:"b_all",uid:"u_all"});this.readFile(g,function(b){null==b?(f.settingData=p.settingData,d.saveFile(g,JSON.stringify(f)),a(f)):(b=c.doDecodeData(b),a(JSON.parse(b)))})},x.prototype._getProgressDataOffline=function(a,b){var d=this,e=d.opts,f={};if(!e.isClient)return f.progressData=p.progressData,f.progressData.updateTime="0",void a(f);var g=this._getCachePath({fileName:"progress"});this.readFile(g,function(b){null==b?(f.progressData=p.progressData,f.progressData.updateTime=c.getTimestamp()+"",d.saveFile(g,JSON.stringify(f)),a(f)):(b=c.doDecodeData(b),a(JSON.parse(b)))})},x.prototype._getProgressDataOnline=function(a,b){w.log("[readerMobile.js] -> _getProgressDataOnline! "),this.ApiObj.getProgressData({},function(b){a(b)},function(a){w.warn("[reader.js]--在线获取 阅读进度 失败!"),b(a)})},x.prototype._renderNote=function(){var a=this.opts,b=this;if(a.useNote)return b.cbnpage?void this.getNote(function(d){function e(){b._getNoteOnline(function(a){var c=b._getCachePath({fileName:"note"}),d=JSON.stringify(a);b.saveFile(c,d),b.cbnpage.renderNote(a)},function(){b.cbnpage.renderNote(d)})}if(w.info("成功读取 笔记数据 !","background:yellow;"),a.isClient){var f=c.filterLocalData(d.note_list);0==f.length?e():b.cbnpage.noteObj.batchUpdateNote({time_stamp:d.time_stamp,note_list:f},function(a){e()},function(a){b.cbnpage.renderNote(d)})}else b.cbnpage.renderNote(d)},function(){w.warn("[reader.js] --> _renderNote --> 渲染笔记，获取笔记信息失败!"),a.isClient?(w.info("[APP阅读] 本地无笔记信息, 执行下载 !","background:pink;"),b.downloadNote()):b.cbnpage.renderNote()}):void setTimeout(function(){b._renderNote()},100)},x.prototype.downloadNote=function(){var a=this,b=this.opts;w.log("[PAD.js] -> download "+b.book_id);var c=this._getCachePath({fileName:"note"});this._getNoteOnline(function(b){w.log("成功下載 笔记 并 保存!");var d=JSON.stringify(b);a.saveFile(c,d),setTimeout(function(){a.cbnpage.renderNote(b)},300)},function(b){w.warn("[PAD.js] -> downloadNote "+b),a.cbnpage.renderNote()})},x.prototype._getChapterOffline=function(a,b,d){w.log("[reader.js] -> _getChapterOffline! ");var e=this._getCachePath({fileName:a.chapter_name});this.readFile(e,function(a){null==a?d():(a=c.doDecodeData(a),b(a))})},x.prototype._getChapterOnline=function(a,b,c){this.ApiObj.getChapter(a,function(a){b(a)},function(a){c(a)})},x.prototype._updateDownloadState=function(a){for(var b=this.opts,c=b.data.catalog?b.data.catalog.chapter:[],d=0,e=c.length;d<e;d++)if(c[d].chapter_id==a.chapter_id){c[d].isDownload=a.isDownload;break}},x.prototype._saveCatalog=function(){var a=this.opts,b=this._getCachePath({fileName:"catalog"}),c=JSON.stringify(a.data.catalog);this.saveFile(b,c)},x.prototype._saveChapter=function(a,b){var c=this.opts,d=this._getCachePath({fileName:a});if(c.isOnlyDownload){var e=d.substr(0,d.lastIndexOf("/")+1);this._batchdownloadPhoto(e,b)}this.saveFile(d,b)},x.prototype._saveSettingFile=function(a){var b=(this.opts,this._getCachePath({fileName:"settingPanel",bid:"b_all",uid:"u_all"}));if(this.settingpage){var c=this.settingpage.getSettingData();a&&(c.readTimes=parseInt(c.readTimes)+1),this.saveFile(b,JSON.stringify({settingData:c}))}},x.prototype._saveProgressFile=function(){var a=this.opts,b=a.data.progressData,d=this._getCachePath({fileName:"progress"});b.updateTime=c.getTimestamp(),b.progress=this.countPageObj.getFootPerc(),this.saveFile(d,JSON.stringify({progressData:b}))},x.prototype._saveBookState=function(){var a=this.opts,b=this,d=[],e=this._getCachePath({fileName:"bookState"});this.readFile(e,function(f){null!=f&&(f=c.doDecodeData(f),f=JSON.parse(f),d=f),d.push({bookOpenTime:a.bookOpenTime,bookCloseTime:c.getTimestamp()}),b.ApiObj.setBookState({bookStateData:d},function(){b.saveFile(e,JSON.stringify([]))},function(){b.saveFile(e,JSON.stringify(d))})})},x.prototype._getCoprDataOffline=function(a,b){var d=this,e=this.opts,f=this._getCachePath({fileName:"copyright"});return e.isClient?void this.readFile(f,function(e){if(null==e){var g={};g.coprData=p.copyright,d.opts.data.copyright=p.copyright,d.saveFile(f,JSON.stringify(g)),b()}else e=c.doDecodeData(e),a(JSON.parse(e))}):(e.data.copyright=p.copyright,b(),!1)},x.prototype._saveCopyright=function(){var a=this.opts,b=this._getCachePath({fileName:"copyright"}),c=JSON.stringify({coprData:a.data.copyright});this.saveFile(b,c)},x.prototype._downloadSingleChapter=function(a,b,c){var d=this,e=d.opts;a&&a.chapter_status&&this._getChapterOnline({chapter_id:a.chapter_id},function(c){w.info("[reader.js] -> 下载单个章节:"+a.chapter_name),a.isDownload=!0,d._saveChapter(a.chapter_name,c),d._updateDownloadState(a),d._saveCatalog(),b(),e.downloadCb()},function(a){w.warn("[reader.js] -> 获取单个 [章节内容] 失败!"+a),c()})},x.prototype._downloadChapter=function(){for(var a=this.opts,b=a.data.readableChapter||[],d=-1,e=this,f=0,g=b.length;f<g;f++)if(!b[f].isDownload){d=f;break}-1!==d&&e._downloadSingleChapter(b[d],function(f){a.isOnlyDownload&&e._downloadChapter(),30==a._downloadState.rate&&e._renderCatalog(),a._downloadState={state:!0,rate:c.getProgressRate(b.length,d+1,30)}},function(b){a._downloadState.rate<=30&&(console.error("[reader.js] --> _downloadChapter; 只有目录下载成功， 无章节内容."),e.LoadingObj.close(),e.DialogObj.setMsg(r.chapterFalse),e.DialogObj.open())})},x.prototype.download=function(){var a=this.opts,b=this;w.info("[reader.js] --> download!  userId:"+a.user_id+" , book_id:"+a.book_id),this._getCatalogOnline(function(c){a.data.catalog=c;var d=c.chapter,e=[];a._downloadState.rate=30;for(var f=0,g=d.length;f<g;f++)if(d[f].isDownload=!1,d[f].chapter_status){var h={};h.chapter_id=d[f].chapter_id,h.chapter_name=d[f].chapter_name,h.isDownload=d[f].isDownload,h.chapter_status=d[f].chapter_status,e.push(h)}return 0==e.length?(b.LoadingObj.close(),void(null!=a.allChapterFalseCb?a.allChapterFalseCb():(b.DialogObj.setMsg(r.noReadContent),b.DialogObj.open()))):(a.data.readableChapter=e,a.getCatalogCb(),void(a.useEpubFile||(b._saveCatalog(),b._downloadChapter())))},function(a){w.warn("[reader.js] -> download "+a),b.LoadingObj.close(),b.DialogObj.setMsg(r.checkNetwork),b.DialogObj.open()})},x.prototype.getDownloadInfo=function(){var a=this.opts,b=a._downloadState;return b},x.prototype.getCatalogInfo=function(){var a=this.opts,b=a.data.catalog||[];return b},x.prototype.getPagesAll=function(){var a=this.opts,b=a.chapts||[];return b},x.prototype._downloadPhoto=function(a){var b=(this.opts,a.new_src.replace(gli_get_cache_path(),""));c._downloadImageFile(a.old_src,b)},x.prototype._batchdownloadPhoto=function(a,c){var d=gli_get_cache_path()+a+"images/",e=this;b(c).find("img").each(function(){var a=b(this).attr("src"),c=a.substring(a.lastIndexOf("/")+1,a.length),f=d+c;e._downloadPhoto({old_src:a,new_src:f})})},x.prototype._pagingChapter=function(a){var b=this,d=b.opts,e=d.chapts[a];return e.chapter_status?void(d.chapts[a].pages&&d.chapts[a].pages.length?(b.countPageObj.setChapterData({index:a,getHtml:d.chapts[a].html,pages:d.chapts[a].pages,isPretreat:d.chapts[a].isPretreat}),b.countPageObj.readyData()):(b.LoadingObj.setMsg(r.loading),b.LoadingObj.open(),d.chapts[a].isPretreat?(b.countPageObj.setChapterData({index:a,getHtml:d.chapts[a].html,pages:[],isPretreat:d.chapts[a].isPretreat}),b.countPageObj.excutePaging()):b.getChapterContent({chapter_id:e.chapter_id,chapter_name:e.chapter_name},function(c){d.chapts[a].html=c,b.countPageObj.setChapterData({index:a,getHtml:c,pages:[],isPretreat:d.chapts[a].isPretreat}),b.countPageObj.excutePaging()},function(f){w.warn("[reader.js]--> pagingChapter:"+f),b._downloadSingleChapter(e,function(){for(var e=0,f=d.chapts,g=0;g<f.length;g++)f[g].chapter_status&&e++;b._pagingChapter(a),d._downloadState={state:!0,rate:c.getProgressRate(e,a+1,d._downloadState.rate)}},function(){b.LoadingObj.close(),b.DialogObj.setMsg(r.chapterFalse),b.DialogObj.open(),b.countPageObj.opts.chapt_index=d.chapt_index,b.countPageObj.opts.page_index=d.page_index})}))):(console.log("[reader.js] --> 该章节您没有权限！"),null!=d.probotionCb&&d.probotionCb(),!1)},x.prototype._deletePages=function(){var a=this.opts,b=a.chapts;if(!b)return!1;for(var c=0,d=b.length;c<d;c++)b[c].pages&&(b[c].pages=[])},x.prototype.next=function(){this.countPageObj.turnPage("next")},x.prototype.pre=function(){this.countPageObj.turnPage("prev")},x.prototype.changePageColumn=function(a){var b=this.opts;return this.countPageObj.opts.state?(console.log("[readerPad.js] --> 正在分页,不能切换！"),!1):b.pageColumn!=a&&(b.pageColumn=a,this.selectObj.opts.pageColumn=a,this.countPageObj.opts.pageColumn=a,this._deletePages(),this._setFontSize(),this.countPageObj.changeColumn(),void(2==b.pageColumn?b.$readerObj.attr("data-page-mode","not-mode"):b.$readerObj.attr("data-page-mode","")))},x.prototype._showPage=function(a){w.info("[reader.js]--> showPage");var b=this.opts;if(!a.turnMode&&b.chapt_index===a.chapt_index&&b.page_index===a.page_index)return this.mainpage.highLight(),!1;b.chapt_index=a.chapt_index,b.page_index=a.page_index,1==b.pageColumn&&(a.firstPagePerc=a.pagePerc),this.mainpage.showPagedata(a,b.pagingType);var c=b.chapts[b.chapt_index].chapter_name,d=b.chapts.length,e=this.countPageObj.getFootPerc();this.settingpage.setProgressVal({name:c,currIndex:b.chapt_index+1,total:d,val:e,turnMode:a.turnMode})},x.prototype._getCachePath=function(a){var b=this.opts,d=b.downloadPath,e=a.bid||b.book_id,f=a.uid||b.user_id,g=a.fileName||"",h=c.createBookPath(f,e,g,d);return h},x.prototype.delLocalData=function(){var a=this,b=a.opts;"function"==typeof gli_file_unlink&&gli_file_unlink(b.downloadPath)},x.prototype._unbindAppEvents=function(){"undefined"!=typeof gli_keydown_event&&"function"==typeof gli_keydown_event&&(gli_keydown_event(0,function(){},!1),gli_keydown_event(1,function(){},!1),gli_keydown_event(2,function(){},!1)),"undefined"!=typeof gli_photo_change&&"function"==typeof gli_photo_change&&gli_photo_change(function(){},!1),"function"==typeof gli_stop_device_orientation&&gli_stop_device_orientation()},x.prototype.getLocalBooksId=function(a){var b=this,c=b.opts,d=c.downloadPath+"/"+c.user_id;"function"==typeof gli_file_getfolder&&"function"==typeof a?gli_file_getfolder(d,function(b){var c=[];b&&b.length>0&&(c=b.split(";")),a(c)}):console.warn("%c gli_file_getfolder 方法不存在","background:yellow;")},x.prototype.exit=function(a){var b=this.opts;try{this._saveProgressFile(),this._saveSettingFile(!0),this._unbindAppEvents(),this._saveBookState()}catch(a){console.log("[readerPad.js -->] exit"+a)}b.exitReaderCb()},x.prototype.open=function(a){console.info("[readerPAD.js] --> open!")},x}(b,a,c,d,da,ea,fa,ka,la,ma,y,z,A,B,C,D,m,n,E,na,H,I),pa=function(a,b,c,d,e,f){function g(g){"PC"==g.clientType?e.isBrowserLegal()?h=new c(g):a(g.domWrapId).html(f.checkBrowserTxt):"MOBILE"==g.clientType?h=new b(g):"PAD"==g.clientType?h=new d(g):console.error("[clientType]---> 参数传入有误！！")}var h=null;return g.prototype.open=function(){console.log("Reader --> open!"),h.open()},g.prototype.exit=function(){console.log("Reader --> exit!"),h.exit()},g.prototype.prev=function(){h.prev()},g.prototype.next=function(){h.next()},g.prototype.getPagesAll=function(){return h.getPagesAll()},g.prototype.getDownloadInfo=function(){return h.getDownloadInfo()},g.prototype.getCatalogInfo=function(){return h.getCatalogInfo()},g.prototype.download=function(){h.download()},g.prototype.delLocalData=function(){h.delLocalData()},g.prototype.getLocalBooksId=function(a){h.getLocalBooksId(a)},window.Reader=g,g}(a,K,ca,oa,c,n)}();